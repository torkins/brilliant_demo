(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const _ of document.querySelectorAll('link[rel="modulepreload"]'))c(_);new MutationObserver(_=>{for(const p of _)if(p.type==="childList")for(const A of p.addedNodes)A.tagName==="LINK"&&A.rel==="modulepreload"&&c(A)}).observe(document,{childList:!0,subtree:!0});function o(_){const p={};return _.integrity&&(p.integrity=_.integrity),_.referrerPolicy&&(p.referrerPolicy=_.referrerPolicy),_.crossOrigin==="use-credentials"?p.credentials="include":_.crossOrigin==="anonymous"?p.credentials="omit":p.credentials="same-origin",p}function c(_){if(_.ep)return;_.ep=!0;const p=o(_);fetch(_.href,p)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Hs(n){const s=Object.create(null);for(const o of n.split(","))s[o]=1;return o=>o in s}const wt={},Vn=[],Fi=()=>{},nl=()=>!1,Wr=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),qs=n=>n.startsWith("onUpdate:"),ei=Object.assign,Gs=(n,s)=>{const o=n.indexOf(s);o>-1&&n.splice(o,1)},rl=Object.prototype.hasOwnProperty,vt=(n,s)=>rl.call(n,s),st=Array.isArray,Dn=n=>jr(n)==="[object Map]",go=n=>jr(n)==="[object Set]",ct=n=>typeof n=="function",Bt=n=>typeof n=="string",dn=n=>typeof n=="symbol",Ot=n=>n!==null&&typeof n=="object",_o=n=>(Ot(n)||ct(n))&&ct(n.then)&&ct(n.catch),mo=Object.prototype.toString,jr=n=>mo.call(n),sl=n=>jr(n).slice(8,-1),vo=n=>jr(n)==="[object Object]",Ws=n=>Bt(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,er=Hs(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Kr=n=>{const s=Object.create(null);return o=>s[o]||(s[o]=n(o))},al=/-(\w)/g,ln=Kr(n=>n.replace(al,(s,o)=>o?o.toUpperCase():"")),ol=/\B([A-Z])/g,pn=Kr(n=>n.replace(ol,"-$1").toLowerCase()),yo=Kr(n=>n.charAt(0).toUpperCase()+n.slice(1)),_s=Kr(n=>n?`on${yo(n)}`:""),an=(n,s)=>!Object.is(n,s),Or=(n,...s)=>{for(let o=0;o<n.length;o++)n[o](...s)},Es=(n,s,o,c=!1)=>{Object.defineProperty(n,s,{configurable:!0,enumerable:!1,writable:c,value:o})},Ts=n=>{const s=parseFloat(n);return isNaN(s)?n:s};let Ia;const $r=()=>Ia||(Ia=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function js(n){if(st(n)){const s={};for(let o=0;o<n.length;o++){const c=n[o],_=Bt(c)?cl(c):js(c);if(_)for(const p in _)s[p]=_[p]}return s}else if(Bt(n)||Ot(n))return n}const ul=/;(?![^(]*\))/g,ll=/:([^]+)/,hl=/\/\*[^]*?\*\//g;function cl(n){const s={};return n.replace(hl,"").split(ul).forEach(o=>{if(o){const c=o.split(ll);c.length>1&&(s[c[0].trim()]=c[1].trim())}}),s}function lr(n){let s="";if(Bt(n))s=n;else if(st(n))for(let o=0;o<n.length;o++){const c=lr(n[o]);c&&(s+=c+" ")}else if(Ot(n))for(const o in n)n[o]&&(s+=o+" ");return s.trim()}const fl="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",dl=Hs(fl);function xo(n){return!!n||n===""}const bo=n=>!!(n&&n.__v_isRef===!0),yi=n=>Bt(n)?n:n==null?"":st(n)||Ot(n)&&(n.toString===mo||!ct(n.toString))?bo(n)?yi(n.value):JSON.stringify(n,wo,2):String(n),wo=(n,s)=>bo(s)?wo(n,s.value):Dn(s)?{[`Map(${s.size})`]:[...s.entries()].reduce((o,[c,_],p)=>(o[ms(c,p)+" =>"]=_,o),{})}:go(s)?{[`Set(${s.size})`]:[...s.values()].map(o=>ms(o))}:dn(s)?ms(s):Ot(s)&&!st(s)&&!vo(s)?String(s):s,ms=(n,s="")=>{var o;return dn(n)?`Symbol(${(o=n.description)!=null?o:s})`:n};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Xt;class Co{constructor(s=!1){this.detached=s,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Xt,!s&&Xt&&(this.index=(Xt.scopes||(Xt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let s,o;if(this.scopes)for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].pause();for(s=0,o=this.effects.length;s<o;s++)this.effects[s].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let s,o;if(this.scopes)for(s=0,o=this.scopes.length;s<o;s++)this.scopes[s].resume();for(s=0,o=this.effects.length;s<o;s++)this.effects[s].resume()}}run(s){if(this._active){const o=Xt;try{return Xt=this,s()}finally{Xt=o}}}on(){++this._on===1&&(this.prevScope=Xt,Xt=this)}off(){this._on>0&&--this._on===0&&(Xt=this.prevScope,this.prevScope=void 0)}stop(s){if(this._active){this._active=!1;let o,c;for(o=0,c=this.effects.length;o<c;o++)this.effects[o].stop();for(this.effects.length=0,o=0,c=this.cleanups.length;o<c;o++)this.cleanups[o]();if(this.cleanups.length=0,this.scopes){for(o=0,c=this.scopes.length;o<c;o++)this.scopes[o].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!s){const _=this.parent.scopes.pop();_&&_!==this&&(this.parent.scopes[this.index]=_,_.index=this.index)}this.parent=void 0}}}function So(n){return new Co(n)}function Po(){return Xt}function pl(n,s=!1){Xt&&Xt.cleanups.push(n)}let kt;const vs=new WeakSet;class Io{constructor(s){this.fn=s,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Xt&&Xt.active&&Xt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vs.has(this)&&(vs.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ao(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,ka(this),Eo(this);const s=kt,o=Ai;kt=this,Ai=!0;try{return this.fn()}finally{To(this),kt=s,Ai=o,this.flags&=-3}}stop(){if(this.flags&1){for(let s=this.deps;s;s=s.nextDep)Zs(s);this.deps=this.depsTail=void 0,ka(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vs.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Ms(this)&&this.run()}get dirty(){return Ms(this)}}let ko=0,tr,ir;function Ao(n,s=!1){if(n.flags|=8,s){n.next=ir,ir=n;return}n.next=tr,tr=n}function Ks(){ko++}function $s(){if(--ko>0)return;if(ir){let s=ir;for(ir=void 0;s;){const o=s.next;s.next=void 0,s.flags&=-9,s=o}}let n;for(;tr;){let s=tr;for(tr=void 0;s;){const o=s.next;if(s.next=void 0,s.flags&=-9,s.flags&1)try{s.trigger()}catch(c){n||(n=c)}s=o}}if(n)throw n}function Eo(n){for(let s=n.deps;s;s=s.nextDep)s.version=-1,s.prevActiveLink=s.dep.activeLink,s.dep.activeLink=s}function To(n){let s,o=n.depsTail,c=o;for(;c;){const _=c.prevDep;c.version===-1?(c===o&&(o=_),Zs(c),gl(c)):s=c,c.dep.activeLink=c.prevActiveLink,c.prevActiveLink=void 0,c=_}n.deps=s,n.depsTail=o}function Ms(n){for(let s=n.deps;s;s=s.nextDep)if(s.dep.version!==s.version||s.dep.computed&&(Mo(s.dep.computed)||s.dep.version!==s.version))return!0;return!!n._dirty}function Mo(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===hr)||(n.globalVersion=hr,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Ms(n))))return;n.flags|=2;const s=n.dep,o=kt,c=Ai;kt=n,Ai=!0;try{Eo(n);const _=n.fn(n._value);(s.version===0||an(_,n._value))&&(n.flags|=128,n._value=_,s.version++)}catch(_){throw s.version++,_}finally{kt=o,Ai=c,To(n),n.flags&=-3}}function Zs(n,s=!1){const{dep:o,prevSub:c,nextSub:_}=n;if(c&&(c.nextSub=_,n.prevSub=void 0),_&&(_.prevSub=c,n.nextSub=void 0),o.subs===n&&(o.subs=c,!c&&o.computed)){o.computed.flags&=-5;for(let p=o.computed.deps;p;p=p.nextDep)Zs(p,!0)}!s&&!--o.sc&&o.map&&o.map.delete(o.key)}function gl(n){const{prevDep:s,nextDep:o}=n;s&&(s.nextDep=o,n.prevDep=void 0),o&&(o.prevDep=s,n.nextDep=void 0)}let Ai=!0;const Oo=[];function Ki(){Oo.push(Ai),Ai=!1}function $i(){const n=Oo.pop();Ai=n===void 0?!0:n}function ka(n){const{cleanup:s}=n;if(n.cleanup=void 0,s){const o=kt;kt=void 0;try{s()}finally{kt=o}}}let hr=0;class _l{constructor(s,o){this.sub=s,this.dep=o,this.version=o.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Js{constructor(s){this.computed=s,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(s){if(!kt||!Ai||kt===this.computed)return;let o=this.activeLink;if(o===void 0||o.sub!==kt)o=this.activeLink=new _l(kt,this),kt.deps?(o.prevDep=kt.depsTail,kt.depsTail.nextDep=o,kt.depsTail=o):kt.deps=kt.depsTail=o,Lo(o);else if(o.version===-1&&(o.version=this.version,o.nextDep)){const c=o.nextDep;c.prevDep=o.prevDep,o.prevDep&&(o.prevDep.nextDep=c),o.prevDep=kt.depsTail,o.nextDep=void 0,kt.depsTail.nextDep=o,kt.depsTail=o,kt.deps===o&&(kt.deps=c)}return o}trigger(s){this.version++,hr++,this.notify(s)}notify(s){Ks();try{for(let o=this.subs;o;o=o.prevSub)o.sub.notify()&&o.sub.dep.notify()}finally{$s()}}}function Lo(n){if(n.dep.sc++,n.sub.flags&4){const s=n.dep.computed;if(s&&!n.dep.subs){s.flags|=20;for(let c=s.deps;c;c=c.nextDep)Lo(c)}const o=n.dep.subs;o!==n&&(n.prevSub=o,o&&(o.nextSub=n)),n.dep.subs=n}}const Vr=new WeakMap,In=Symbol(""),Os=Symbol(""),cr=Symbol("");function Qt(n,s,o){if(Ai&&kt){let c=Vr.get(n);c||Vr.set(n,c=new Map);let _=c.get(o);_||(c.set(o,_=new Js),_.map=c,_.key=o),_.track()}}function Wi(n,s,o,c,_,p){const A=Vr.get(n);if(!A){hr++;return}const F=D=>{D&&D.trigger()};if(Ks(),s==="clear")A.forEach(F);else{const D=st(n),te=D&&Ws(o);if(D&&o==="length"){const J=Number(c);A.forEach((Q,oe)=>{(oe==="length"||oe===cr||!dn(oe)&&oe>=J)&&F(Q)})}else switch((o!==void 0||A.has(void 0))&&F(A.get(o)),te&&F(A.get(cr)),s){case"add":D?te&&F(A.get("length")):(F(A.get(In)),Dn(n)&&F(A.get(Os)));break;case"delete":D||(F(A.get(In)),Dn(n)&&F(A.get(Os)));break;case"set":Dn(n)&&F(A.get(In));break}}$s()}function ml(n,s){const o=Vr.get(n);return o&&o.get(s)}function On(n){const s=gt(n);return s===n?s:(Qt(s,"iterate",cr),wi(n)?s:s.map(Zt))}function Zr(n){return Qt(n=gt(n),"iterate",cr),n}const vl={__proto__:null,[Symbol.iterator](){return ys(this,Symbol.iterator,Zt)},concat(...n){return On(this).concat(...n.map(s=>st(s)?On(s):s))},entries(){return ys(this,"entries",n=>(n[1]=Zt(n[1]),n))},every(n,s){return qi(this,"every",n,s,void 0,arguments)},filter(n,s){return qi(this,"filter",n,s,o=>o.map(Zt),arguments)},find(n,s){return qi(this,"find",n,s,Zt,arguments)},findIndex(n,s){return qi(this,"findIndex",n,s,void 0,arguments)},findLast(n,s){return qi(this,"findLast",n,s,Zt,arguments)},findLastIndex(n,s){return qi(this,"findLastIndex",n,s,void 0,arguments)},forEach(n,s){return qi(this,"forEach",n,s,void 0,arguments)},includes(...n){return xs(this,"includes",n)},indexOf(...n){return xs(this,"indexOf",n)},join(n){return On(this).join(n)},lastIndexOf(...n){return xs(this,"lastIndexOf",n)},map(n,s){return qi(this,"map",n,s,void 0,arguments)},pop(){return Jn(this,"pop")},push(...n){return Jn(this,"push",n)},reduce(n,...s){return Aa(this,"reduce",n,s)},reduceRight(n,...s){return Aa(this,"reduceRight",n,s)},shift(){return Jn(this,"shift")},some(n,s){return qi(this,"some",n,s,void 0,arguments)},splice(...n){return Jn(this,"splice",n)},toReversed(){return On(this).toReversed()},toSorted(n){return On(this).toSorted(n)},toSpliced(...n){return On(this).toSpliced(...n)},unshift(...n){return Jn(this,"unshift",n)},values(){return ys(this,"values",Zt)}};function ys(n,s,o){const c=Zr(n),_=c[s]();return c!==n&&!wi(n)&&(_._next=_.next,_.next=()=>{const p=_._next();return p.value&&(p.value=o(p.value)),p}),_}const yl=Array.prototype;function qi(n,s,o,c,_,p){const A=Zr(n),F=A!==n&&!wi(n),D=A[s];if(D!==yl[s]){const Q=D.apply(n,p);return F?Zt(Q):Q}let te=o;A!==n&&(F?te=function(Q,oe){return o.call(this,Zt(Q),oe,n)}:o.length>2&&(te=function(Q,oe){return o.call(this,Q,oe,n)}));const J=D.call(A,te,c);return F&&_?_(J):J}function Aa(n,s,o,c){const _=Zr(n);let p=o;return _!==n&&(wi(n)?o.length>3&&(p=function(A,F,D){return o.call(this,A,F,D,n)}):p=function(A,F,D){return o.call(this,A,Zt(F),D,n)}),_[s](p,...c)}function xs(n,s,o){const c=gt(n);Qt(c,"iterate",cr);const _=c[s](...o);return(_===-1||_===!1)&&Qs(o[0])?(o[0]=gt(o[0]),c[s](...o)):_}function Jn(n,s,o=[]){Ki(),Ks();const c=gt(n)[s].apply(n,o);return $s(),$i(),c}const xl=Hs("__proto__,__v_isRef,__isVue"),Ro=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(dn));function bl(n){dn(n)||(n=String(n));const s=gt(this);return Qt(s,"has",n),s.hasOwnProperty(n)}class No{constructor(s=!1,o=!1){this._isReadonly=s,this._isShallow=o}get(s,o,c){if(o==="__v_skip")return s.__v_skip;const _=this._isReadonly,p=this._isShallow;if(o==="__v_isReactive")return!_;if(o==="__v_isReadonly")return _;if(o==="__v_isShallow")return p;if(o==="__v_raw")return c===(_?p?Ml:Bo:p?Do:Vo).get(s)||Object.getPrototypeOf(s)===Object.getPrototypeOf(c)?s:void 0;const A=st(s);if(!_){let D;if(A&&(D=vl[o]))return D;if(o==="hasOwnProperty")return bl}const F=Reflect.get(s,o,Ft(s)?s:c);return(dn(o)?Ro.has(o):xl(o))||(_||Qt(s,"get",o),p)?F:Ft(F)?A&&Ws(o)?F:F.value:Ot(F)?_?zo(F):Jr(F):F}}class Fo extends No{constructor(s=!1){super(!1,s)}set(s,o,c,_){let p=s[o];if(!this._isShallow){const D=hn(p);if(!wi(c)&&!hn(c)&&(p=gt(p),c=gt(c)),!st(s)&&Ft(p)&&!Ft(c))return D?!1:(p.value=c,!0)}const A=st(s)&&Ws(o)?Number(o)<s.length:vt(s,o),F=Reflect.set(s,o,c,Ft(s)?s:_);return s===gt(_)&&(A?an(c,p)&&Wi(s,"set",o,c):Wi(s,"add",o,c)),F}deleteProperty(s,o){const c=vt(s,o);s[o];const _=Reflect.deleteProperty(s,o);return _&&c&&Wi(s,"delete",o,void 0),_}has(s,o){const c=Reflect.has(s,o);return(!dn(o)||!Ro.has(o))&&Qt(s,"has",o),c}ownKeys(s){return Qt(s,"iterate",st(s)?"length":In),Reflect.ownKeys(s)}}class wl extends No{constructor(s=!1){super(!0,s)}set(s,o){return!0}deleteProperty(s,o){return!0}}const Cl=new Fo,Sl=new wl,Pl=new Fo(!0);const Ls=n=>n,Ar=n=>Reflect.getPrototypeOf(n);function Il(n,s,o){return function(...c){const _=this.__v_raw,p=gt(_),A=Dn(p),F=n==="entries"||n===Symbol.iterator&&A,D=n==="keys"&&A,te=_[n](...c),J=o?Ls:s?Dr:Zt;return!s&&Qt(p,"iterate",D?Os:In),{next(){const{value:Q,done:oe}=te.next();return oe?{value:Q,done:oe}:{value:F?[J(Q[0]),J(Q[1])]:J(Q),done:oe}},[Symbol.iterator](){return this}}}}function Er(n){return function(...s){return n==="delete"?!1:n==="clear"?void 0:this}}function kl(n,s){const o={get(_){const p=this.__v_raw,A=gt(p),F=gt(_);n||(an(_,F)&&Qt(A,"get",_),Qt(A,"get",F));const{has:D}=Ar(A),te=s?Ls:n?Dr:Zt;if(D.call(A,_))return te(p.get(_));if(D.call(A,F))return te(p.get(F));p!==A&&p.get(_)},get size(){const _=this.__v_raw;return!n&&Qt(gt(_),"iterate",In),Reflect.get(_,"size",_)},has(_){const p=this.__v_raw,A=gt(p),F=gt(_);return n||(an(_,F)&&Qt(A,"has",_),Qt(A,"has",F)),_===F?p.has(_):p.has(_)||p.has(F)},forEach(_,p){const A=this,F=A.__v_raw,D=gt(F),te=s?Ls:n?Dr:Zt;return!n&&Qt(D,"iterate",In),F.forEach((J,Q)=>_.call(p,te(J),te(Q),A))}};return ei(o,n?{add:Er("add"),set:Er("set"),delete:Er("delete"),clear:Er("clear")}:{add(_){!s&&!wi(_)&&!hn(_)&&(_=gt(_));const p=gt(this);return Ar(p).has.call(p,_)||(p.add(_),Wi(p,"add",_,_)),this},set(_,p){!s&&!wi(p)&&!hn(p)&&(p=gt(p));const A=gt(this),{has:F,get:D}=Ar(A);let te=F.call(A,_);te||(_=gt(_),te=F.call(A,_));const J=D.call(A,_);return A.set(_,p),te?an(p,J)&&Wi(A,"set",_,p):Wi(A,"add",_,p),this},delete(_){const p=gt(this),{has:A,get:F}=Ar(p);let D=A.call(p,_);D||(_=gt(_),D=A.call(p,_)),F&&F.call(p,_);const te=p.delete(_);return D&&Wi(p,"delete",_,void 0),te},clear(){const _=gt(this),p=_.size!==0,A=_.clear();return p&&Wi(_,"clear",void 0,void 0),A}}),["keys","values","entries",Symbol.iterator].forEach(_=>{o[_]=Il(_,n,s)}),o}function Ys(n,s){const o=kl(n,s);return(c,_,p)=>_==="__v_isReactive"?!n:_==="__v_isReadonly"?n:_==="__v_raw"?c:Reflect.get(vt(o,_)&&_ in c?o:c,_,p)}const Al={get:Ys(!1,!1)},El={get:Ys(!1,!0)},Tl={get:Ys(!0,!1)};const Vo=new WeakMap,Do=new WeakMap,Bo=new WeakMap,Ml=new WeakMap;function Ol(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Ll(n){return n.__v_skip||!Object.isExtensible(n)?0:Ol(sl(n))}function Jr(n){return hn(n)?n:Xs(n,!1,Cl,Al,Vo)}function Rl(n){return Xs(n,!1,Pl,El,Do)}function zo(n){return Xs(n,!0,Sl,Tl,Bo)}function Xs(n,s,o,c,_){if(!Ot(n)||n.__v_raw&&!(s&&n.__v_isReactive))return n;const p=Ll(n);if(p===0)return n;const A=_.get(n);if(A)return A;const F=new Proxy(n,p===2?c:o);return _.set(n,F),F}function on(n){return hn(n)?on(n.__v_raw):!!(n&&n.__v_isReactive)}function hn(n){return!!(n&&n.__v_isReadonly)}function wi(n){return!!(n&&n.__v_isShallow)}function Qs(n){return n?!!n.__v_raw:!1}function gt(n){const s=n&&n.__v_raw;return s?gt(s):n}function ea(n){return!vt(n,"__v_skip")&&Object.isExtensible(n)&&Es(n,"__v_skip",!0),n}const Zt=n=>Ot(n)?Jr(n):n,Dr=n=>Ot(n)?zo(n):n;function Ft(n){return n?n.__v_isRef===!0:!1}function Gt(n){return Nl(n,!1)}function Nl(n,s){return Ft(n)?n:new Fl(n,s)}class Fl{constructor(s,o){this.dep=new Js,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=o?s:gt(s),this._value=o?s:Zt(s),this.__v_isShallow=o}get value(){return this.dep.track(),this._value}set value(s){const o=this._rawValue,c=this.__v_isShallow||wi(s)||hn(s);s=c?s:gt(s),an(s,o)&&(this._rawValue=s,this._value=c?s:Zt(s),this.dep.trigger())}}function ai(n){return Ft(n)?n.value:n}const Vl={get:(n,s,o)=>s==="__v_raw"?n:ai(Reflect.get(n,s,o)),set:(n,s,o,c)=>{const _=n[s];return Ft(_)&&!Ft(o)?(_.value=o,!0):Reflect.set(n,s,o,c)}};function Uo(n){return on(n)?n:new Proxy(n,Vl)}function Dl(n){const s=st(n)?new Array(n.length):{};for(const o in n)s[o]=zl(n,o);return s}class Bl{constructor(s,o,c){this._object=s,this._key=o,this._defaultValue=c,this.__v_isRef=!0,this._value=void 0}get value(){const s=this._object[this._key];return this._value=s===void 0?this._defaultValue:s}set value(s){this._object[this._key]=s}get dep(){return ml(gt(this._object),this._key)}}function zl(n,s,o){const c=n[s];return Ft(c)?c:new Bl(n,s,o)}class Ul{constructor(s,o,c){this.fn=s,this.setter=o,this._value=void 0,this.dep=new Js(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hr-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!o,this.isSSR=c}notify(){if(this.flags|=16,!(this.flags&8)&&kt!==this)return Ao(this,!0),!0}get value(){const s=this.dep.track();return Mo(this),s&&(s.version=this.dep.version),this._value}set value(s){this.setter&&this.setter(s)}}function Hl(n,s,o=!1){let c,_;return ct(n)?c=n:(c=n.get,_=n.set),new Ul(c,_,o)}const Tr={},Br=new WeakMap;let Pn;function ql(n,s=!1,o=Pn){if(o){let c=Br.get(o);c||Br.set(o,c=[]),c.push(n)}}function Gl(n,s,o=wt){const{immediate:c,deep:_,once:p,scheduler:A,augmentJob:F,call:D}=o,te=Fe=>_?Fe:wi(Fe)||_===!1||_===0?ji(Fe,1):ji(Fe);let J,Q,oe,U,ze=!1,de=!1;if(Ft(n)?(Q=()=>n.value,ze=wi(n)):on(n)?(Q=()=>te(n),ze=!0):st(n)?(de=!0,ze=n.some(Fe=>on(Fe)||wi(Fe)),Q=()=>n.map(Fe=>{if(Ft(Fe))return Fe.value;if(on(Fe))return te(Fe);if(ct(Fe))return D?D(Fe,2):Fe()})):ct(n)?s?Q=D?()=>D(n,2):n:Q=()=>{if(oe){Ki();try{oe()}finally{$i()}}const Fe=Pn;Pn=J;try{return D?D(n,3,[U]):n(U)}finally{Pn=Fe}}:Q=Fi,s&&_){const Fe=Q,pe=_===!0?1/0:_;Q=()=>ji(Fe(),pe)}const be=Po(),Ce=()=>{J.stop(),be&&be.active&&Gs(be.effects,J)};if(p&&s){const Fe=s;s=(...pe)=>{Fe(...pe),Ce()}}let Ye=de?new Array(n.length).fill(Tr):Tr;const Ve=Fe=>{if(!(!(J.flags&1)||!J.dirty&&!Fe))if(s){const pe=J.run();if(_||ze||(de?pe.some((M,Ge)=>an(M,Ye[Ge])):an(pe,Ye))){oe&&oe();const M=Pn;Pn=J;try{const Ge=[pe,Ye===Tr?void 0:de&&Ye[0]===Tr?[]:Ye,U];Ye=pe,D?D(s,3,Ge):s(...Ge)}finally{Pn=M}}}else J.run()};return F&&F(Ve),J=new Io(Q),J.scheduler=A?()=>A(Ve,!1):Ve,U=Fe=>ql(Fe,!1,J),oe=J.onStop=()=>{const Fe=Br.get(J);if(Fe){if(D)D(Fe,4);else for(const pe of Fe)pe();Br.delete(J)}},s?c?Ve(!0):Ye=J.run():A?A(Ve.bind(null,!0),!0):J.run(),Ce.pause=J.pause.bind(J),Ce.resume=J.resume.bind(J),Ce.stop=Ce,Ce}function ji(n,s=1/0,o){if(s<=0||!Ot(n)||n.__v_skip||(o=o||new Set,o.has(n)))return n;if(o.add(n),s--,Ft(n))ji(n.value,s,o);else if(st(n))for(let c=0;c<n.length;c++)ji(n[c],s,o);else if(go(n)||Dn(n))n.forEach(c=>{ji(c,s,o)});else if(vo(n)){for(const c in n)ji(n[c],s,o);for(const c of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,c)&&ji(n[c],s,o)}return n}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function gr(n,s,o,c){try{return c?n(...c):n()}catch(_){Yr(_,s,o)}}function Vi(n,s,o,c){if(ct(n)){const _=gr(n,s,o,c);return _&&_o(_)&&_.catch(p=>{Yr(p,s,o)}),_}if(st(n)){const _=[];for(let p=0;p<n.length;p++)_.push(Vi(n[p],s,o,c));return _}}function Yr(n,s,o,c=!0){const _=s?s.vnode:null,{errorHandler:p,throwUnhandledErrorInProduction:A}=s&&s.appContext.config||wt;if(s){let F=s.parent;const D=s.proxy,te=`https://vuejs.org/error-reference/#runtime-${o}`;for(;F;){const J=F.ec;if(J){for(let Q=0;Q<J.length;Q++)if(J[Q](n,D,te)===!1)return}F=F.parent}if(p){Ki(),gr(p,null,10,[n,D,te]),$i();return}}Wl(n,o,_,c,A)}function Wl(n,s,o,c=!0,_=!1){if(_)throw n;console.error(n)}const ni=[];let Ri=-1;const Bn=[];let nn=null,Rn=0;const Ho=Promise.resolve();let zr=null;function ta(n){const s=zr||Ho;return n?s.then(this?n.bind(this):n):s}function jl(n){let s=Ri+1,o=ni.length;for(;s<o;){const c=s+o>>>1,_=ni[c],p=fr(_);p<n||p===n&&_.flags&2?s=c+1:o=c}return s}function ia(n){if(!(n.flags&1)){const s=fr(n),o=ni[ni.length-1];!o||!(n.flags&2)&&s>=fr(o)?ni.push(n):ni.splice(jl(s),0,n),n.flags|=1,qo()}}function qo(){zr||(zr=Ho.then(Wo))}function Kl(n){st(n)?Bn.push(...n):nn&&n.id===-1?nn.splice(Rn+1,0,n):n.flags&1||(Bn.push(n),n.flags|=1),qo()}function Ea(n,s,o=Ri+1){for(;o<ni.length;o++){const c=ni[o];if(c&&c.flags&2){if(n&&c.id!==n.uid)continue;ni.splice(o,1),o--,c.flags&4&&(c.flags&=-2),c(),c.flags&4||(c.flags&=-2)}}}function Go(n){if(Bn.length){const s=[...new Set(Bn)].sort((o,c)=>fr(o)-fr(c));if(Bn.length=0,nn){nn.push(...s);return}for(nn=s,Rn=0;Rn<nn.length;Rn++){const o=nn[Rn];o.flags&4&&(o.flags&=-2),o.flags&8||o(),o.flags&=-2}nn=null,Rn=0}}const fr=n=>n.id==null?n.flags&2?-1:1/0:n.id;function Wo(n){try{for(Ri=0;Ri<ni.length;Ri++){const s=ni[Ri];s&&!(s.flags&8)&&(s.flags&4&&(s.flags&=-2),gr(s,s.i,s.i?15:14),s.flags&4||(s.flags&=-2))}}finally{for(;Ri<ni.length;Ri++){const s=ni[Ri];s&&(s.flags&=-2)}Ri=-1,ni.length=0,Go(),zr=null,(ni.length||Bn.length)&&Wo()}}let bi=null,jo=null;function Ur(n){const s=bi;return bi=n,jo=n&&n.type.__scopeId||null,s}function $l(n,s=bi,o){if(!s||n._n)return n;const c=(..._)=>{c._d&&Ba(-1);const p=Ur(s);let A;try{A=n(..._)}finally{Ur(p),c._d&&Ba(1)}return A};return c._n=!0,c._c=!0,c._d=!0,c}function Ko(n,s){if(bi===null)return n;const o=is(bi),c=n.dirs||(n.dirs=[]);for(let _=0;_<s.length;_++){let[p,A,F,D=wt]=s[_];p&&(ct(p)&&(p={mounted:p,updated:p}),p.deep&&ji(A),c.push({dir:p,instance:o,value:A,oldValue:void 0,arg:F,modifiers:D}))}return n}function Cn(n,s,o,c){const _=n.dirs,p=s&&s.dirs;for(let A=0;A<_.length;A++){const F=_[A];p&&(F.oldValue=p[A].value);let D=F.dir[c];D&&(Ki(),Vi(D,o,8,[n.el,F,n,s]),$i())}}const Zl=Symbol("_vte"),Jl=n=>n.__isTeleport;function na(n,s){n.shapeFlag&6&&n.component?(n.transition=s,na(n.component.subTree,s)):n.shapeFlag&128?(n.ssContent.transition=s.clone(n.ssContent),n.ssFallback.transition=s.clone(n.ssFallback)):n.transition=s}/*! #__NO_SIDE_EFFECTS__ */function Xr(n,s){return ct(n)?ei({name:n.name},s,{setup:n}):n}function $o(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function nr(n,s,o,c,_=!1){if(st(n)){n.forEach((ze,de)=>nr(ze,s&&(st(s)?s[de]:s),o,c,_));return}if(rr(c)&&!_){c.shapeFlag&512&&c.type.__asyncResolved&&c.component.subTree.component&&nr(n,s,o,c.component.subTree);return}const p=c.shapeFlag&4?is(c.component):c.el,A=_?null:p,{i:F,r:D}=n,te=s&&s.r,J=F.refs===wt?F.refs={}:F.refs,Q=F.setupState,oe=gt(Q),U=Q===wt?()=>!1:ze=>vt(oe,ze);if(te!=null&&te!==D&&(Bt(te)?(J[te]=null,U(te)&&(Q[te]=null)):Ft(te)&&(te.value=null)),ct(D))gr(D,F,12,[A,J]);else{const ze=Bt(D),de=Ft(D);if(ze||de){const be=()=>{if(n.f){const Ce=ze?U(D)?Q[D]:J[D]:D.value;_?st(Ce)&&Gs(Ce,p):st(Ce)?Ce.includes(p)||Ce.push(p):ze?(J[D]=[p],U(D)&&(Q[D]=J[D])):(D.value=[p],n.k&&(J[n.k]=D.value))}else ze?(J[D]=A,U(D)&&(Q[D]=A)):de&&(D.value=A,n.k&&(J[n.k]=A))};A?(be.id=-1,di(be,o)):be()}}}$r().requestIdleCallback;$r().cancelIdleCallback;const rr=n=>!!n.type.__asyncLoader,Zo=n=>n.type.__isKeepAlive;function Yl(n,s){Jo(n,"a",s)}function Xl(n,s){Jo(n,"da",s)}function Jo(n,s,o=ri){const c=n.__wdc||(n.__wdc=()=>{let _=o;for(;_;){if(_.isDeactivated)return;_=_.parent}return n()});if(Qr(s,c,o),o){let _=o.parent;for(;_&&_.parent;)Zo(_.parent.vnode)&&Ql(c,s,o,_),_=_.parent}}function Ql(n,s,o,c){const _=Qr(s,n,c,!0);ra(()=>{Gs(c[s],_)},o)}function Qr(n,s,o=ri,c=!1){if(o){const _=o[n]||(o[n]=[]),p=s.__weh||(s.__weh=(...A)=>{Ki();const F=_r(o),D=Vi(s,o,n,A);return F(),$i(),D});return c?_.unshift(p):_.push(p),p}}const Zi=n=>(s,o=ri)=>{(!pr||n==="sp")&&Qr(n,(...c)=>s(...c),o)},eh=Zi("bm"),Yo=Zi("m"),th=Zi("bu"),ih=Zi("u"),nh=Zi("bum"),ra=Zi("um"),rh=Zi("sp"),sh=Zi("rtg"),ah=Zi("rtc");function oh(n,s=ri){Qr("ec",n,s)}const uh=Symbol.for("v-ndc");function Ta(n,s,o,c){let _;const p=o,A=st(n);if(A||Bt(n)){const F=A&&on(n);let D=!1,te=!1;F&&(D=!wi(n),te=hn(n),n=Zr(n)),_=new Array(n.length);for(let J=0,Q=n.length;J<Q;J++)_[J]=s(D?te?Dr(Zt(n[J])):Zt(n[J]):n[J],J,void 0,p)}else if(typeof n=="number"){_=new Array(n);for(let F=0;F<n;F++)_[F]=s(F+1,F,void 0,p)}else if(Ot(n))if(n[Symbol.iterator])_=Array.from(n,(F,D)=>s(F,D,void 0,p));else{const F=Object.keys(n);_=new Array(F.length);for(let D=0,te=F.length;D<te;D++){const J=F[D];_[D]=s(n[J],J,D,p)}}else _=[];return _}const Rs=n=>n?yu(n)?is(n):Rs(n.parent):null,sr=ei(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Rs(n.parent),$root:n=>Rs(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Qo(n),$forceUpdate:n=>n.f||(n.f=()=>{ia(n.update)}),$nextTick:n=>n.n||(n.n=ta.bind(n.proxy)),$watch:n=>Mh.bind(n)}),bs=(n,s)=>n!==wt&&!n.__isScriptSetup&&vt(n,s),lh={get({_:n},s){if(s==="__v_skip")return!0;const{ctx:o,setupState:c,data:_,props:p,accessCache:A,type:F,appContext:D}=n;let te;if(s[0]!=="$"){const U=A[s];if(U!==void 0)switch(U){case 1:return c[s];case 2:return _[s];case 4:return o[s];case 3:return p[s]}else{if(bs(c,s))return A[s]=1,c[s];if(_!==wt&&vt(_,s))return A[s]=2,_[s];if((te=n.propsOptions[0])&&vt(te,s))return A[s]=3,p[s];if(o!==wt&&vt(o,s))return A[s]=4,o[s];Ns&&(A[s]=0)}}const J=sr[s];let Q,oe;if(J)return s==="$attrs"&&Qt(n.attrs,"get",""),J(n);if((Q=F.__cssModules)&&(Q=Q[s]))return Q;if(o!==wt&&vt(o,s))return A[s]=4,o[s];if(oe=D.config.globalProperties,vt(oe,s))return oe[s]},set({_:n},s,o){const{data:c,setupState:_,ctx:p}=n;return bs(_,s)?(_[s]=o,!0):c!==wt&&vt(c,s)?(c[s]=o,!0):vt(n.props,s)||s[0]==="$"&&s.slice(1)in n?!1:(p[s]=o,!0)},has({_:{data:n,setupState:s,accessCache:o,ctx:c,appContext:_,propsOptions:p}},A){let F;return!!o[A]||n!==wt&&vt(n,A)||bs(s,A)||(F=p[0])&&vt(F,A)||vt(c,A)||vt(sr,A)||vt(_.config.globalProperties,A)},defineProperty(n,s,o){return o.get!=null?n._.accessCache[s]=0:vt(o,"value")&&this.set(n,s,o.value,null),Reflect.defineProperty(n,s,o)}};function Ma(n){return st(n)?n.reduce((s,o)=>(s[o]=null,s),{}):n}let Ns=!0;function hh(n){const s=Qo(n),o=n.proxy,c=n.ctx;Ns=!1,s.beforeCreate&&Oa(s.beforeCreate,n,"bc");const{data:_,computed:p,methods:A,watch:F,provide:D,inject:te,created:J,beforeMount:Q,mounted:oe,beforeUpdate:U,updated:ze,activated:de,deactivated:be,beforeDestroy:Ce,beforeUnmount:Ye,destroyed:Ve,unmounted:Fe,render:pe,renderTracked:M,renderTriggered:Ge,errorCaptured:$e,serverPrefetch:He,expose:lt,inheritAttrs:yt,components:ut,directives:Ct,filters:qe}=s;if(te&&ch(te,c,null),A)for(const Re in A){const me=A[Re];ct(me)&&(c[Re]=me.bind(o))}if(_){const Re=_.call(o,o);Ot(Re)&&(n.data=Jr(Re))}if(Ns=!0,p)for(const Re in p){const me=p[Re],Ee=ct(me)?me.bind(o,o):ct(me.get)?me.get.bind(o,o):Fi,ot=!ct(me)&&ct(me.set)?me.set.bind(o):Fi,St=sn({get:Ee,set:ot});Object.defineProperty(c,Re,{enumerable:!0,configurable:!0,get:()=>St.value,set:zt=>St.value=zt})}if(F)for(const Re in F)Xo(F[Re],c,o,Re);if(D){const Re=ct(D)?D.call(o):D;Reflect.ownKeys(Re).forEach(me=>{mh(me,Re[me])})}J&&Oa(J,n,"c");function ge(Re,me){st(me)?me.forEach(Ee=>Re(Ee.bind(o))):me&&Re(me.bind(o))}if(ge(eh,Q),ge(Yo,oe),ge(th,U),ge(ih,ze),ge(Yl,de),ge(Xl,be),ge(oh,$e),ge(ah,M),ge(sh,Ge),ge(nh,Ye),ge(ra,Fe),ge(rh,He),st(lt))if(lt.length){const Re=n.exposed||(n.exposed={});lt.forEach(me=>{Object.defineProperty(Re,me,{get:()=>o[me],set:Ee=>o[me]=Ee,enumerable:!0})})}else n.exposed||(n.exposed={});pe&&n.render===Fi&&(n.render=pe),yt!=null&&(n.inheritAttrs=yt),ut&&(n.components=ut),Ct&&(n.directives=Ct),He&&$o(n)}function ch(n,s,o=Fi){st(n)&&(n=Fs(n));for(const c in n){const _=n[c];let p;Ot(_)?"default"in _?p=ar(_.from||c,_.default,!0):p=ar(_.from||c):p=ar(_),Ft(p)?Object.defineProperty(s,c,{enumerable:!0,configurable:!0,get:()=>p.value,set:A=>p.value=A}):s[c]=p}}function Oa(n,s,o){Vi(st(n)?n.map(c=>c.bind(s.proxy)):n.bind(s.proxy),s,o)}function Xo(n,s,o,c){let _=c.includes(".")?fu(o,c):()=>o[c];if(Bt(n)){const p=s[n];ct(p)&&un(_,p)}else if(ct(n))un(_,n.bind(o));else if(Ot(n))if(st(n))n.forEach(p=>Xo(p,s,o,c));else{const p=ct(n.handler)?n.handler.bind(o):s[n.handler];ct(p)&&un(_,p,n)}}function Qo(n){const s=n.type,{mixins:o,extends:c}=s,{mixins:_,optionsCache:p,config:{optionMergeStrategies:A}}=n.appContext,F=p.get(s);let D;return F?D=F:!_.length&&!o&&!c?D=s:(D={},_.length&&_.forEach(te=>Hr(D,te,A,!0)),Hr(D,s,A)),Ot(s)&&p.set(s,D),D}function Hr(n,s,o,c=!1){const{mixins:_,extends:p}=s;p&&Hr(n,p,o,!0),_&&_.forEach(A=>Hr(n,A,o,!0));for(const A in s)if(!(c&&A==="expose")){const F=fh[A]||o&&o[A];n[A]=F?F(n[A],s[A]):s[A]}return n}const fh={data:La,props:Ra,emits:Ra,methods:Xn,computed:Xn,beforeCreate:ii,created:ii,beforeMount:ii,mounted:ii,beforeUpdate:ii,updated:ii,beforeDestroy:ii,beforeUnmount:ii,destroyed:ii,unmounted:ii,activated:ii,deactivated:ii,errorCaptured:ii,serverPrefetch:ii,components:Xn,directives:Xn,watch:ph,provide:La,inject:dh};function La(n,s){return s?n?function(){return ei(ct(n)?n.call(this,this):n,ct(s)?s.call(this,this):s)}:s:n}function dh(n,s){return Xn(Fs(n),Fs(s))}function Fs(n){if(st(n)){const s={};for(let o=0;o<n.length;o++)s[n[o]]=n[o];return s}return n}function ii(n,s){return n?[...new Set([].concat(n,s))]:s}function Xn(n,s){return n?ei(Object.create(null),n,s):s}function Ra(n,s){return n?st(n)&&st(s)?[...new Set([...n,...s])]:ei(Object.create(null),Ma(n),Ma(s??{})):s}function ph(n,s){if(!n)return s;if(!s)return n;const o=ei(Object.create(null),n);for(const c in s)o[c]=ii(n[c],s[c]);return o}function eu(){return{app:null,config:{isNativeTag:nl,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let gh=0;function _h(n,s){return function(c,_=null){ct(c)||(c=ei({},c)),_!=null&&!Ot(_)&&(_=null);const p=eu(),A=new WeakSet,F=[];let D=!1;const te=p.app={_uid:gh++,_component:c,_props:_,_container:null,_context:p,_instance:null,version:Qh,get config(){return p.config},set config(J){},use(J,...Q){return A.has(J)||(J&&ct(J.install)?(A.add(J),J.install(te,...Q)):ct(J)&&(A.add(J),J(te,...Q))),te},mixin(J){return p.mixins.includes(J)||p.mixins.push(J),te},component(J,Q){return Q?(p.components[J]=Q,te):p.components[J]},directive(J,Q){return Q?(p.directives[J]=Q,te):p.directives[J]},mount(J,Q,oe){if(!D){const U=te._ceVNode||gi(c,_);return U.appContext=p,oe===!0?oe="svg":oe===!1&&(oe=void 0),n(U,J,oe),D=!0,te._container=J,J.__vue_app__=te,is(U.component)}},onUnmount(J){F.push(J)},unmount(){D&&(Vi(F,te._instance,16),n(null,te._container),delete te._container.__vue_app__)},provide(J,Q){return p.provides[J]=Q,te},runWithContext(J){const Q=kn;kn=te;try{return J()}finally{kn=Q}}};return te}}let kn=null;function mh(n,s){if(ri){let o=ri.provides;const c=ri.parent&&ri.parent.provides;c===o&&(o=ri.provides=Object.create(c)),o[n]=s}}function ar(n,s,o=!1){const c=vu();if(c||kn){let _=kn?kn._context.provides:c?c.parent==null||c.ce?c.vnode.appContext&&c.vnode.appContext.provides:c.parent.provides:void 0;if(_&&n in _)return _[n];if(arguments.length>1)return o&&ct(s)?s.call(c&&c.proxy):s}}function vh(){return!!(vu()||kn)}const tu={},iu=()=>Object.create(tu),nu=n=>Object.getPrototypeOf(n)===tu;function yh(n,s,o,c=!1){const _={},p=iu();n.propsDefaults=Object.create(null),ru(n,s,_,p);for(const A in n.propsOptions[0])A in _||(_[A]=void 0);o?n.props=c?_:Rl(_):n.type.props?n.props=_:n.props=p,n.attrs=p}function xh(n,s,o,c){const{props:_,attrs:p,vnode:{patchFlag:A}}=n,F=gt(_),[D]=n.propsOptions;let te=!1;if((c||A>0)&&!(A&16)){if(A&8){const J=n.vnode.dynamicProps;for(let Q=0;Q<J.length;Q++){let oe=J[Q];if(es(n.emitsOptions,oe))continue;const U=s[oe];if(D)if(vt(p,oe))U!==p[oe]&&(p[oe]=U,te=!0);else{const ze=ln(oe);_[ze]=Vs(D,F,ze,U,n,!1)}else U!==p[oe]&&(p[oe]=U,te=!0)}}}else{ru(n,s,_,p)&&(te=!0);let J;for(const Q in F)(!s||!vt(s,Q)&&((J=pn(Q))===Q||!vt(s,J)))&&(D?o&&(o[Q]!==void 0||o[J]!==void 0)&&(_[Q]=Vs(D,F,Q,void 0,n,!0)):delete _[Q]);if(p!==F)for(const Q in p)(!s||!vt(s,Q))&&(delete p[Q],te=!0)}te&&Wi(n.attrs,"set","")}function ru(n,s,o,c){const[_,p]=n.propsOptions;let A=!1,F;if(s)for(let D in s){if(er(D))continue;const te=s[D];let J;_&&vt(_,J=ln(D))?!p||!p.includes(J)?o[J]=te:(F||(F={}))[J]=te:es(n.emitsOptions,D)||(!(D in c)||te!==c[D])&&(c[D]=te,A=!0)}if(p){const D=gt(o),te=F||wt;for(let J=0;J<p.length;J++){const Q=p[J];o[Q]=Vs(_,D,Q,te[Q],n,!vt(te,Q))}}return A}function Vs(n,s,o,c,_,p){const A=n[o];if(A!=null){const F=vt(A,"default");if(F&&c===void 0){const D=A.default;if(A.type!==Function&&!A.skipFactory&&ct(D)){const{propsDefaults:te}=_;if(o in te)c=te[o];else{const J=_r(_);c=te[o]=D.call(null,s),J()}}else c=D;_.ce&&_.ce._setProp(o,c)}A[0]&&(p&&!F?c=!1:A[1]&&(c===""||c===pn(o))&&(c=!0))}return c}const bh=new WeakMap;function su(n,s,o=!1){const c=o?bh:s.propsCache,_=c.get(n);if(_)return _;const p=n.props,A={},F=[];let D=!1;if(!ct(n)){const J=Q=>{D=!0;const[oe,U]=su(Q,s,!0);ei(A,oe),U&&F.push(...U)};!o&&s.mixins.length&&s.mixins.forEach(J),n.extends&&J(n.extends),n.mixins&&n.mixins.forEach(J)}if(!p&&!D)return Ot(n)&&c.set(n,Vn),Vn;if(st(p))for(let J=0;J<p.length;J++){const Q=ln(p[J]);Na(Q)&&(A[Q]=wt)}else if(p)for(const J in p){const Q=ln(J);if(Na(Q)){const oe=p[J],U=A[Q]=st(oe)||ct(oe)?{type:oe}:ei({},oe),ze=U.type;let de=!1,be=!0;if(st(ze))for(let Ce=0;Ce<ze.length;++Ce){const Ye=ze[Ce],Ve=ct(Ye)&&Ye.name;if(Ve==="Boolean"){de=!0;break}else Ve==="String"&&(be=!1)}else de=ct(ze)&&ze.name==="Boolean";U[0]=de,U[1]=be,(de||vt(U,"default"))&&F.push(Q)}}const te=[A,F];return Ot(n)&&c.set(n,te),te}function Na(n){return n[0]!=="$"&&!er(n)}const sa=n=>n==="_"||n==="__"||n==="_ctx"||n==="$stable",aa=n=>st(n)?n.map(Ni):[Ni(n)],wh=(n,s,o)=>{if(s._n)return s;const c=$l((..._)=>aa(s(..._)),o);return c._c=!1,c},au=(n,s,o)=>{const c=n._ctx;for(const _ in n){if(sa(_))continue;const p=n[_];if(ct(p))s[_]=wh(_,p,c);else if(p!=null){const A=aa(p);s[_]=()=>A}}},ou=(n,s)=>{const o=aa(s);n.slots.default=()=>o},uu=(n,s,o)=>{for(const c in s)(o||!sa(c))&&(n[c]=s[c])},Ch=(n,s,o)=>{const c=n.slots=iu();if(n.vnode.shapeFlag&32){const _=s.__;_&&Es(c,"__",_,!0);const p=s._;p?(uu(c,s,o),o&&Es(c,"_",p,!0)):au(s,c)}else s&&ou(n,s)},Sh=(n,s,o)=>{const{vnode:c,slots:_}=n;let p=!0,A=wt;if(c.shapeFlag&32){const F=s._;F?o&&F===1?p=!1:uu(_,s,o):(p=!s.$stable,au(s,_)),A=s}else s&&(ou(n,s),A={default:1});if(p)for(const F in _)!sa(F)&&A[F]==null&&delete _[F]},di=Dh;function Ph(n){return Ih(n)}function Ih(n,s){const o=$r();o.__VUE__=!0;const{insert:c,remove:_,patchProp:p,createElement:A,createText:F,createComment:D,setText:te,setElementText:J,parentNode:Q,nextSibling:oe,setScopeId:U=Fi,insertStaticContent:ze}=n,de=(j,Y,le,we=null,ye=null,ve=null,Ne=void 0,Oe=null,ke=!!Y.dynamicChildren)=>{if(j===Y)return;j&&!Yn(j,Y)&&(we=Ti(j),zt(j,ye,ve,!0),j=null),Y.patchFlag===-2&&(ke=!1,Y.dynamicChildren=null);const{type:ce,ref:We,shapeFlag:xe}=Y;switch(ce){case ts:be(j,Y,le,we);break;case cn:Ce(j,Y,le,we);break;case Lr:j==null&&Ye(Y,le,we,Ne);break;case xi:ut(j,Y,le,we,ye,ve,Ne,Oe,ke);break;default:xe&1?pe(j,Y,le,we,ye,ve,Ne,Oe,ke):xe&6?Ct(j,Y,le,we,ye,ve,Ne,Oe,ke):(xe&64||xe&128)&&ce.process(j,Y,le,we,ye,ve,Ne,Oe,ke,pt)}We!=null&&ye?nr(We,j&&j.ref,ve,Y||j,!Y):We==null&&j&&j.ref!=null&&nr(j.ref,null,ve,j,!0)},be=(j,Y,le,we)=>{if(j==null)c(Y.el=F(Y.children),le,we);else{const ye=Y.el=j.el;Y.children!==j.children&&te(ye,Y.children)}},Ce=(j,Y,le,we)=>{j==null?c(Y.el=D(Y.children||""),le,we):Y.el=j.el},Ye=(j,Y,le,we)=>{[j.el,j.anchor]=ze(j.children,Y,le,we,j.el,j.anchor)},Ve=({el:j,anchor:Y},le,we)=>{let ye;for(;j&&j!==Y;)ye=oe(j),c(j,le,we),j=ye;c(Y,le,we)},Fe=({el:j,anchor:Y})=>{let le;for(;j&&j!==Y;)le=oe(j),_(j),j=le;_(Y)},pe=(j,Y,le,we,ye,ve,Ne,Oe,ke)=>{Y.type==="svg"?Ne="svg":Y.type==="math"&&(Ne="mathml"),j==null?M(Y,le,we,ye,ve,Ne,Oe,ke):He(j,Y,ye,ve,Ne,Oe,ke)},M=(j,Y,le,we,ye,ve,Ne,Oe)=>{let ke,ce;const{props:We,shapeFlag:xe,transition:je,dirs:Ae}=j;if(ke=j.el=A(j.type,ve,We&&We.is,We),xe&8?J(ke,j.children):xe&16&&$e(j.children,ke,null,we,ye,ws(j,ve),Ne,Oe),Ae&&Cn(j,null,we,"created"),Ge(ke,j,j.scopeId,Ne,we),We){for(const t in We)t!=="value"&&!er(t)&&p(ke,t,null,We[t],ve,we);"value"in We&&p(ke,"value",null,We.value,ve),(ce=We.onVnodeBeforeMount)&&Oi(ce,we,j)}Ae&&Cn(j,null,we,"beforeMount");const e=kh(ye,je);e&&je.beforeEnter(ke),c(ke,Y,le),((ce=We&&We.onVnodeMounted)||e||Ae)&&di(()=>{ce&&Oi(ce,we,j),e&&je.enter(ke),Ae&&Cn(j,null,we,"mounted")},ye)},Ge=(j,Y,le,we,ye)=>{if(le&&U(j,le),we)for(let ve=0;ve<we.length;ve++)U(j,we[ve]);if(ye){let ve=ye.subTree;if(Y===ve||pu(ve.type)&&(ve.ssContent===Y||ve.ssFallback===Y)){const Ne=ye.vnode;Ge(j,Ne,Ne.scopeId,Ne.slotScopeIds,ye.parent)}}},$e=(j,Y,le,we,ye,ve,Ne,Oe,ke=0)=>{for(let ce=ke;ce<j.length;ce++){const We=j[ce]=Oe?rn(j[ce]):Ni(j[ce]);de(null,We,Y,le,we,ye,ve,Ne,Oe)}},He=(j,Y,le,we,ye,ve,Ne)=>{const Oe=Y.el=j.el;let{patchFlag:ke,dynamicChildren:ce,dirs:We}=Y;ke|=j.patchFlag&16;const xe=j.props||wt,je=Y.props||wt;let Ae;if(le&&Sn(le,!1),(Ae=je.onVnodeBeforeUpdate)&&Oi(Ae,le,Y,j),We&&Cn(Y,j,le,"beforeUpdate"),le&&Sn(le,!0),(xe.innerHTML&&je.innerHTML==null||xe.textContent&&je.textContent==null)&&J(Oe,""),ce?lt(j.dynamicChildren,ce,Oe,le,we,ws(Y,ye),ve):Ne||me(j,Y,Oe,null,le,we,ws(Y,ye),ve,!1),ke>0){if(ke&16)yt(Oe,xe,je,le,ye);else if(ke&2&&xe.class!==je.class&&p(Oe,"class",null,je.class,ye),ke&4&&p(Oe,"style",xe.style,je.style,ye),ke&8){const e=Y.dynamicProps;for(let t=0;t<e.length;t++){const r=e[t],a=xe[r],u=je[r];(u!==a||r==="value")&&p(Oe,r,a,u,ye,le)}}ke&1&&j.children!==Y.children&&J(Oe,Y.children)}else!Ne&&ce==null&&yt(Oe,xe,je,le,ye);((Ae=je.onVnodeUpdated)||We)&&di(()=>{Ae&&Oi(Ae,le,Y,j),We&&Cn(Y,j,le,"updated")},we)},lt=(j,Y,le,we,ye,ve,Ne)=>{for(let Oe=0;Oe<Y.length;Oe++){const ke=j[Oe],ce=Y[Oe],We=ke.el&&(ke.type===xi||!Yn(ke,ce)||ke.shapeFlag&198)?Q(ke.el):le;de(ke,ce,We,null,we,ye,ve,Ne,!0)}},yt=(j,Y,le,we,ye)=>{if(Y!==le){if(Y!==wt)for(const ve in Y)!er(ve)&&!(ve in le)&&p(j,ve,Y[ve],null,ye,we);for(const ve in le){if(er(ve))continue;const Ne=le[ve],Oe=Y[ve];Ne!==Oe&&ve!=="value"&&p(j,ve,Oe,Ne,ye,we)}"value"in le&&p(j,"value",Y.value,le.value,ye)}},ut=(j,Y,le,we,ye,ve,Ne,Oe,ke)=>{const ce=Y.el=j?j.el:F(""),We=Y.anchor=j?j.anchor:F("");let{patchFlag:xe,dynamicChildren:je,slotScopeIds:Ae}=Y;Ae&&(Oe=Oe?Oe.concat(Ae):Ae),j==null?(c(ce,le,we),c(We,le,we),$e(Y.children||[],le,We,ye,ve,Ne,Oe,ke)):xe>0&&xe&64&&je&&j.dynamicChildren?(lt(j.dynamicChildren,je,le,ye,ve,Ne,Oe),(Y.key!=null||ye&&Y===ye.subTree)&&lu(j,Y,!0)):me(j,Y,le,We,ye,ve,Ne,Oe,ke)},Ct=(j,Y,le,we,ye,ve,Ne,Oe,ke)=>{Y.slotScopeIds=Oe,j==null?Y.shapeFlag&512?ye.ctx.activate(Y,le,we,Ne,ke):qe(Y,le,we,ye,ve,Ne,ke):_i(j,Y,ke)},qe=(j,Y,le,we,ye,ve,Ne)=>{const Oe=j.component=Kh(j,we,ye);if(Zo(j)&&(Oe.ctx.renderer=pt),$h(Oe,!1,Ne),Oe.asyncDep){if(ye&&ye.registerDep(Oe,ge,Ne),!j.el){const ke=Oe.subTree=gi(cn);Ce(null,ke,Y,le),j.placeholder=ke.el}}else ge(Oe,j,Y,le,ye,ve,Ne)},_i=(j,Y,le)=>{const we=Y.component=j.component;if(Fh(j,Y,le))if(we.asyncDep&&!we.asyncResolved){Re(we,Y,le);return}else we.next=Y,we.update();else Y.el=j.el,we.vnode=Y},ge=(j,Y,le,we,ye,ve,Ne)=>{const Oe=()=>{if(j.isMounted){let{next:xe,bu:je,u:Ae,parent:e,vnode:t}=j;{const f=hu(j);if(f){xe&&(xe.el=t.el,Re(j,xe,Ne)),f.asyncDep.then(()=>{j.isUnmounted||Oe()});return}}let r=xe,a;Sn(j,!1),xe?(xe.el=t.el,Re(j,xe,Ne)):xe=t,je&&Or(je),(a=xe.props&&xe.props.onVnodeBeforeUpdate)&&Oi(a,e,xe,t),Sn(j,!0);const u=Va(j),h=j.subTree;j.subTree=u,de(h,u,Q(h.el),Ti(h),j,ye,ve),xe.el=u.el,r===null&&Vh(j,u.el),Ae&&di(Ae,ye),(a=xe.props&&xe.props.onVnodeUpdated)&&di(()=>Oi(a,e,xe,t),ye)}else{let xe;const{el:je,props:Ae}=Y,{bm:e,m:t,parent:r,root:a,type:u}=j,h=rr(Y);Sn(j,!1),e&&Or(e),!h&&(xe=Ae&&Ae.onVnodeBeforeMount)&&Oi(xe,r,Y),Sn(j,!0);{a.ce&&a.ce._def.shadowRoot!==!1&&a.ce._injectChildStyle(u);const f=j.subTree=Va(j);de(null,f,le,we,j,ye,ve),Y.el=f.el}if(t&&di(t,ye),!h&&(xe=Ae&&Ae.onVnodeMounted)){const f=Y;di(()=>Oi(xe,r,f),ye)}(Y.shapeFlag&256||r&&rr(r.vnode)&&r.vnode.shapeFlag&256)&&j.a&&di(j.a,ye),j.isMounted=!0,Y=le=we=null}};j.scope.on();const ke=j.effect=new Io(Oe);j.scope.off();const ce=j.update=ke.run.bind(ke),We=j.job=ke.runIfDirty.bind(ke);We.i=j,We.id=j.uid,ke.scheduler=()=>ia(We),Sn(j,!0),ce()},Re=(j,Y,le)=>{Y.component=j;const we=j.vnode.props;j.vnode=Y,j.next=null,xh(j,Y.props,we,le),Sh(j,Y.children,le),Ki(),Ea(j),$i()},me=(j,Y,le,we,ye,ve,Ne,Oe,ke=!1)=>{const ce=j&&j.children,We=j?j.shapeFlag:0,xe=Y.children,{patchFlag:je,shapeFlag:Ae}=Y;if(je>0){if(je&128){ot(ce,xe,le,we,ye,ve,Ne,Oe,ke);return}else if(je&256){Ee(ce,xe,le,we,ye,ve,Ne,Oe,ke);return}}Ae&8?(We&16&&ui(ce,ye,ve),xe!==ce&&J(le,xe)):We&16?Ae&16?ot(ce,xe,le,we,ye,ve,Ne,Oe,ke):ui(ce,ye,ve,!0):(We&8&&J(le,""),Ae&16&&$e(xe,le,we,ye,ve,Ne,Oe,ke))},Ee=(j,Y,le,we,ye,ve,Ne,Oe,ke)=>{j=j||Vn,Y=Y||Vn;const ce=j.length,We=Y.length,xe=Math.min(ce,We);let je;for(je=0;je<xe;je++){const Ae=Y[je]=ke?rn(Y[je]):Ni(Y[je]);de(j[je],Ae,le,null,ye,ve,Ne,Oe,ke)}ce>We?ui(j,ye,ve,!0,!1,xe):$e(Y,le,we,ye,ve,Ne,Oe,ke,xe)},ot=(j,Y,le,we,ye,ve,Ne,Oe,ke)=>{let ce=0;const We=Y.length;let xe=j.length-1,je=We-1;for(;ce<=xe&&ce<=je;){const Ae=j[ce],e=Y[ce]=ke?rn(Y[ce]):Ni(Y[ce]);if(Yn(Ae,e))de(Ae,e,le,null,ye,ve,Ne,Oe,ke);else break;ce++}for(;ce<=xe&&ce<=je;){const Ae=j[xe],e=Y[je]=ke?rn(Y[je]):Ni(Y[je]);if(Yn(Ae,e))de(Ae,e,le,null,ye,ve,Ne,Oe,ke);else break;xe--,je--}if(ce>xe){if(ce<=je){const Ae=je+1,e=Ae<We?Y[Ae].el:we;for(;ce<=je;)de(null,Y[ce]=ke?rn(Y[ce]):Ni(Y[ce]),le,e,ye,ve,Ne,Oe,ke),ce++}}else if(ce>je)for(;ce<=xe;)zt(j[ce],ye,ve,!0),ce++;else{const Ae=ce,e=ce,t=new Map;for(ce=e;ce<=je;ce++){const m=Y[ce]=ke?rn(Y[ce]):Ni(Y[ce]);m.key!=null&&t.set(m.key,ce)}let r,a=0;const u=je-e+1;let h=!1,f=0;const d=new Array(u);for(ce=0;ce<u;ce++)d[ce]=0;for(ce=Ae;ce<=xe;ce++){const m=j[ce];if(a>=u){zt(m,ye,ve,!0);continue}let b;if(m.key!=null)b=t.get(m.key);else for(r=e;r<=je;r++)if(d[r-e]===0&&Yn(m,Y[r])){b=r;break}b===void 0?zt(m,ye,ve,!0):(d[b-e]=ce+1,b>=f?f=b:h=!0,de(m,Y[b],le,null,ye,ve,Ne,Oe,ke),a++)}const g=h?Ah(d):Vn;for(r=g.length-1,ce=u-1;ce>=0;ce--){const m=e+ce,b=Y[m],S=Y[m+1],x=m+1<We?S.el||S.placeholder:we;d[ce]===0?de(null,b,le,x,ye,ve,Ne,Oe,ke):h&&(r<0||ce!==g[r]?St(b,le,x,2):r--)}}},St=(j,Y,le,we,ye=null)=>{const{el:ve,type:Ne,transition:Oe,children:ke,shapeFlag:ce}=j;if(ce&6){St(j.component.subTree,Y,le,we);return}if(ce&128){j.suspense.move(Y,le,we);return}if(ce&64){Ne.move(j,Y,le,pt);return}if(Ne===xi){c(ve,Y,le);for(let xe=0;xe<ke.length;xe++)St(ke[xe],Y,le,we);c(j.anchor,Y,le);return}if(Ne===Lr){Ve(j,Y,le);return}if(we!==2&&ce&1&&Oe)if(we===0)Oe.beforeEnter(ve),c(ve,Y,le),di(()=>Oe.enter(ve),ye);else{const{leave:xe,delayLeave:je,afterLeave:Ae}=Oe,e=()=>{j.ctx.isUnmounted?_(ve):c(ve,Y,le)},t=()=>{xe(ve,()=>{e(),Ae&&Ae()})};je?je(ve,e,t):t()}else c(ve,Y,le)},zt=(j,Y,le,we=!1,ye=!1)=>{const{type:ve,props:Ne,ref:Oe,children:ke,dynamicChildren:ce,shapeFlag:We,patchFlag:xe,dirs:je,cacheIndex:Ae}=j;if(xe===-2&&(ye=!1),Oe!=null&&(Ki(),nr(Oe,null,le,j,!0),$i()),Ae!=null&&(Y.renderCache[Ae]=void 0),We&256){Y.ctx.deactivate(j);return}const e=We&1&&je,t=!rr(j);let r;if(t&&(r=Ne&&Ne.onVnodeBeforeUnmount)&&Oi(r,Y,j),We&6)Pt(j.component,le,we);else{if(We&128){j.suspense.unmount(le,we);return}e&&Cn(j,null,Y,"beforeUnmount"),We&64?j.type.remove(j,Y,le,pt,we):ce&&!ce.hasOnce&&(ve!==xi||xe>0&&xe&64)?ui(ce,Y,le,!1,!0):(ve===xi&&xe&384||!ye&&We&16)&&ui(ke,Y,le),we&&oi(j)}(t&&(r=Ne&&Ne.onVnodeUnmounted)||e)&&di(()=>{r&&Oi(r,Y,j),e&&Cn(j,null,Y,"unmounted")},le)},oi=j=>{const{type:Y,el:le,anchor:we,transition:ye}=j;if(Y===xi){gn(le,we);return}if(Y===Lr){Fe(j);return}const ve=()=>{_(le),ye&&!ye.persisted&&ye.afterLeave&&ye.afterLeave()};if(j.shapeFlag&1&&ye&&!ye.persisted){const{leave:Ne,delayLeave:Oe}=ye,ke=()=>Ne(le,ve);Oe?Oe(j.el,ve,ke):ke()}else ve()},gn=(j,Y)=>{let le;for(;j!==Y;)le=oe(j),_(j),j=le;_(Y)},Pt=(j,Y,le)=>{const{bum:we,scope:ye,job:ve,subTree:Ne,um:Oe,m:ke,a:ce,parent:We,slots:{__:xe}}=j;Fa(ke),Fa(ce),we&&Or(we),We&&st(xe)&&xe.forEach(je=>{We.renderCache[je]=void 0}),ye.stop(),ve&&(ve.flags|=8,zt(Ne,j,Y,le)),Oe&&di(Oe,Y),di(()=>{j.isUnmounted=!0},Y),Y&&Y.pendingBranch&&!Y.isUnmounted&&j.asyncDep&&!j.asyncResolved&&j.suspenseId===Y.pendingId&&(Y.deps--,Y.deps===0&&Y.resolve())},ui=(j,Y,le,we=!1,ye=!1,ve=0)=>{for(let Ne=ve;Ne<j.length;Ne++)zt(j[Ne],Y,le,we,ye)},Ti=j=>{if(j.shapeFlag&6)return Ti(j.component.subTree);if(j.shapeFlag&128)return j.suspense.next();const Y=oe(j.anchor||j.el),le=Y&&Y[Zl];return le?oe(le):Y};let Di=!1;const mt=(j,Y,le)=>{j==null?Y._vnode&&zt(Y._vnode,null,null,!0):de(Y._vnode||null,j,Y,null,null,null,le),Y._vnode=j,Di||(Di=!0,Ea(),Go(),Di=!1)},pt={p:de,um:zt,m:St,r:oi,mt:qe,mc:$e,pc:me,pbc:lt,n:Ti,o:n};return{render:mt,hydrate:void 0,createApp:_h(mt)}}function ws({type:n,props:s},o){return o==="svg"&&n==="foreignObject"||o==="mathml"&&n==="annotation-xml"&&s&&s.encoding&&s.encoding.includes("html")?void 0:o}function Sn({effect:n,job:s},o){o?(n.flags|=32,s.flags|=4):(n.flags&=-33,s.flags&=-5)}function kh(n,s){return(!n||n&&!n.pendingBranch)&&s&&!s.persisted}function lu(n,s,o=!1){const c=n.children,_=s.children;if(st(c)&&st(_))for(let p=0;p<c.length;p++){const A=c[p];let F=_[p];F.shapeFlag&1&&!F.dynamicChildren&&((F.patchFlag<=0||F.patchFlag===32)&&(F=_[p]=rn(_[p]),F.el=A.el),!o&&F.patchFlag!==-2&&lu(A,F)),F.type===ts&&(F.el=A.el),F.type===cn&&!F.el&&(F.el=A.el)}}function Ah(n){const s=n.slice(),o=[0];let c,_,p,A,F;const D=n.length;for(c=0;c<D;c++){const te=n[c];if(te!==0){if(_=o[o.length-1],n[_]<te){s[c]=_,o.push(c);continue}for(p=0,A=o.length-1;p<A;)F=p+A>>1,n[o[F]]<te?p=F+1:A=F;te<n[o[p]]&&(p>0&&(s[c]=o[p-1]),o[p]=c)}}for(p=o.length,A=o[p-1];p-- >0;)o[p]=A,A=s[A];return o}function hu(n){const s=n.subTree.component;if(s)return s.asyncDep&&!s.asyncResolved?s:hu(s)}function Fa(n){if(n)for(let s=0;s<n.length;s++)n[s].flags|=8}const Eh=Symbol.for("v-scx"),Th=()=>ar(Eh);function un(n,s,o){return cu(n,s,o)}function cu(n,s,o=wt){const{immediate:c,deep:_,flush:p,once:A}=o,F=ei({},o),D=s&&c||!s&&p!=="post";let te;if(pr){if(p==="sync"){const U=Th();te=U.__watcherHandles||(U.__watcherHandles=[])}else if(!D){const U=()=>{};return U.stop=Fi,U.resume=Fi,U.pause=Fi,U}}const J=ri;F.call=(U,ze,de)=>Vi(U,J,ze,de);let Q=!1;p==="post"?F.scheduler=U=>{di(U,J&&J.suspense)}:p!=="sync"&&(Q=!0,F.scheduler=(U,ze)=>{ze?U():ia(U)}),F.augmentJob=U=>{s&&(U.flags|=4),Q&&(U.flags|=2,J&&(U.id=J.uid,U.i=J))};const oe=Gl(n,s,F);return pr&&(te?te.push(oe):D&&oe()),oe}function Mh(n,s,o){const c=this.proxy,_=Bt(n)?n.includes(".")?fu(c,n):()=>c[n]:n.bind(c,c);let p;ct(s)?p=s:(p=s.handler,o=s);const A=_r(this),F=cu(_,p.bind(c),o);return A(),F}function fu(n,s){const o=s.split(".");return()=>{let c=n;for(let _=0;_<o.length&&c;_++)c=c[o[_]];return c}}const Oh=(n,s)=>s==="modelValue"||s==="model-value"?n.modelModifiers:n[`${s}Modifiers`]||n[`${ln(s)}Modifiers`]||n[`${pn(s)}Modifiers`];function Lh(n,s,...o){if(n.isUnmounted)return;const c=n.vnode.props||wt;let _=o;const p=s.startsWith("update:"),A=p&&Oh(c,s.slice(7));A&&(A.trim&&(_=o.map(J=>Bt(J)?J.trim():J)),A.number&&(_=o.map(Ts)));let F,D=c[F=_s(s)]||c[F=_s(ln(s))];!D&&p&&(D=c[F=_s(pn(s))]),D&&Vi(D,n,6,_);const te=c[F+"Once"];if(te){if(!n.emitted)n.emitted={};else if(n.emitted[F])return;n.emitted[F]=!0,Vi(te,n,6,_)}}function du(n,s,o=!1){const c=s.emitsCache,_=c.get(n);if(_!==void 0)return _;const p=n.emits;let A={},F=!1;if(!ct(n)){const D=te=>{const J=du(te,s,!0);J&&(F=!0,ei(A,J))};!o&&s.mixins.length&&s.mixins.forEach(D),n.extends&&D(n.extends),n.mixins&&n.mixins.forEach(D)}return!p&&!F?(Ot(n)&&c.set(n,null),null):(st(p)?p.forEach(D=>A[D]=null):ei(A,p),Ot(n)&&c.set(n,A),A)}function es(n,s){return!n||!Wr(s)?!1:(s=s.slice(2).replace(/Once$/,""),vt(n,s[0].toLowerCase()+s.slice(1))||vt(n,pn(s))||vt(n,s))}function Va(n){const{type:s,vnode:o,proxy:c,withProxy:_,propsOptions:[p],slots:A,attrs:F,emit:D,render:te,renderCache:J,props:Q,data:oe,setupState:U,ctx:ze,inheritAttrs:de}=n,be=Ur(n);let Ce,Ye;try{if(o.shapeFlag&4){const Fe=_||c,pe=Fe;Ce=Ni(te.call(pe,Fe,J,Q,U,oe,ze)),Ye=F}else{const Fe=s;Ce=Ni(Fe.length>1?Fe(Q,{attrs:F,slots:A,emit:D}):Fe(Q,null)),Ye=s.props?F:Rh(F)}}catch(Fe){or.length=0,Yr(Fe,n,1),Ce=gi(cn)}let Ve=Ce;if(Ye&&de!==!1){const Fe=Object.keys(Ye),{shapeFlag:pe}=Ve;Fe.length&&pe&7&&(p&&Fe.some(qs)&&(Ye=Nh(Ye,p)),Ve=zn(Ve,Ye,!1,!0))}return o.dirs&&(Ve=zn(Ve,null,!1,!0),Ve.dirs=Ve.dirs?Ve.dirs.concat(o.dirs):o.dirs),o.transition&&na(Ve,o.transition),Ce=Ve,Ur(be),Ce}const Rh=n=>{let s;for(const o in n)(o==="class"||o==="style"||Wr(o))&&((s||(s={}))[o]=n[o]);return s},Nh=(n,s)=>{const o={};for(const c in n)(!qs(c)||!(c.slice(9)in s))&&(o[c]=n[c]);return o};function Fh(n,s,o){const{props:c,children:_,component:p}=n,{props:A,children:F,patchFlag:D}=s,te=p.emitsOptions;if(s.dirs||s.transition)return!0;if(o&&D>=0){if(D&1024)return!0;if(D&16)return c?Da(c,A,te):!!A;if(D&8){const J=s.dynamicProps;for(let Q=0;Q<J.length;Q++){const oe=J[Q];if(A[oe]!==c[oe]&&!es(te,oe))return!0}}}else return(_||F)&&(!F||!F.$stable)?!0:c===A?!1:c?A?Da(c,A,te):!0:!!A;return!1}function Da(n,s,o){const c=Object.keys(s);if(c.length!==Object.keys(n).length)return!0;for(let _=0;_<c.length;_++){const p=c[_];if(s[p]!==n[p]&&!es(o,p))return!0}return!1}function Vh({vnode:n,parent:s},o){for(;s;){const c=s.subTree;if(c.suspense&&c.suspense.activeBranch===n&&(c.el=n.el),c===n)(n=s.vnode).el=o,s=s.parent;else break}}const pu=n=>n.__isSuspense;function Dh(n,s){s&&s.pendingBranch?st(n)?s.effects.push(...n):s.effects.push(n):Kl(n)}const xi=Symbol.for("v-fgt"),ts=Symbol.for("v-txt"),cn=Symbol.for("v-cmt"),Lr=Symbol.for("v-stc"),or=[];let pi=null;function $t(n=!1){or.push(pi=n?null:[])}function Bh(){or.pop(),pi=or[or.length-1]||null}let dr=1;function Ba(n,s=!1){dr+=n,n<0&&pi&&s&&(pi.hasOnce=!0)}function gu(n){return n.dynamicChildren=dr>0?pi||Vn:null,Bh(),dr>0&&pi&&pi.push(n),n}function Yt(n,s,o,c,_,p){return gu(Je(n,s,o,c,_,p,!0))}function zh(n,s,o,c,_){return gu(gi(n,s,o,c,_,!0))}function _u(n){return n?n.__v_isVNode===!0:!1}function Yn(n,s){return n.type===s.type&&n.key===s.key}const mu=({key:n})=>n??null,Rr=({ref:n,ref_key:s,ref_for:o})=>(typeof n=="number"&&(n=""+n),n!=null?Bt(n)||Ft(n)||ct(n)?{i:bi,r:n,k:s,f:!!o}:n:null);function Je(n,s=null,o=null,c=0,_=null,p=n===xi?0:1,A=!1,F=!1){const D={__v_isVNode:!0,__v_skip:!0,type:n,props:s,key:s&&mu(s),ref:s&&Rr(s),scopeId:jo,slotScopeIds:null,children:o,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:p,patchFlag:c,dynamicProps:_,dynamicChildren:null,appContext:null,ctx:bi};return F?(oa(D,o),p&128&&n.normalize(D)):o&&(D.shapeFlag|=Bt(o)?8:16),dr>0&&!A&&pi&&(D.patchFlag>0||p&6)&&D.patchFlag!==32&&pi.push(D),D}const gi=Uh;function Uh(n,s=null,o=null,c=0,_=null,p=!1){if((!n||n===uh)&&(n=cn),_u(n)){const F=zn(n,s,!0);return o&&oa(F,o),dr>0&&!p&&pi&&(F.shapeFlag&6?pi[pi.indexOf(n)]=F:pi.push(F)),F.patchFlag=-2,F}if(Xh(n)&&(n=n.__vccOpts),s){s=Hh(s);let{class:F,style:D}=s;F&&!Bt(F)&&(s.class=lr(F)),Ot(D)&&(Qs(D)&&!st(D)&&(D=ei({},D)),s.style=js(D))}const A=Bt(n)?1:pu(n)?128:Jl(n)?64:Ot(n)?4:ct(n)?2:0;return Je(n,s,o,c,_,A,p,!0)}function Hh(n){return n?Qs(n)||nu(n)?ei({},n):n:null}function zn(n,s,o=!1,c=!1){const{props:_,ref:p,patchFlag:A,children:F,transition:D}=n,te=s?Gh(_||{},s):_,J={__v_isVNode:!0,__v_skip:!0,type:n.type,props:te,key:te&&mu(te),ref:s&&s.ref?o&&p?st(p)?p.concat(Rr(s)):[p,Rr(s)]:Rr(s):p,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:F,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:s&&n.type!==xi?A===-1?16:A|16:A,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:D,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&zn(n.ssContent),ssFallback:n.ssFallback&&zn(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return D&&c&&na(J,D.clone(J)),J}function Nn(n=" ",s=0){return gi(ts,null,n,s)}function qh(n,s){const o=gi(Lr,null,n);return o.staticCount=s,o}function Li(n="",s=!1){return s?($t(),zh(cn,null,n)):gi(cn,null,n)}function Ni(n){return n==null||typeof n=="boolean"?gi(cn):st(n)?gi(xi,null,n.slice()):_u(n)?rn(n):gi(ts,null,String(n))}function rn(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:zn(n)}function oa(n,s){let o=0;const{shapeFlag:c}=n;if(s==null)s=null;else if(st(s))o=16;else if(typeof s=="object")if(c&65){const _=s.default;_&&(_._c&&(_._d=!1),oa(n,_()),_._c&&(_._d=!0));return}else{o=32;const _=s._;!_&&!nu(s)?s._ctx=bi:_===3&&bi&&(bi.slots._===1?s._=1:(s._=2,n.patchFlag|=1024))}else ct(s)?(s={default:s,_ctx:bi},o=32):(s=String(s),c&64?(o=16,s=[Nn(s)]):o=8);n.children=s,n.shapeFlag|=o}function Gh(...n){const s={};for(let o=0;o<n.length;o++){const c=n[o];for(const _ in c)if(_==="class")s.class!==c.class&&(s.class=lr([s.class,c.class]));else if(_==="style")s.style=js([s.style,c.style]);else if(Wr(_)){const p=s[_],A=c[_];A&&p!==A&&!(st(p)&&p.includes(A))&&(s[_]=p?[].concat(p,A):A)}else _!==""&&(s[_]=c[_])}return s}function Oi(n,s,o,c=null){Vi(n,s,7,[o,c])}const Wh=eu();let jh=0;function Kh(n,s,o){const c=n.type,_=(s?s.appContext:n.appContext)||Wh,p={uid:jh++,vnode:n,type:c,parent:s,appContext:_,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Co(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:s?s.provides:Object.create(_.provides),ids:s?s.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:su(c,_),emitsOptions:du(c,_),emit:null,emitted:null,propsDefaults:wt,inheritAttrs:c.inheritAttrs,ctx:wt,data:wt,props:wt,attrs:wt,slots:wt,refs:wt,setupState:wt,setupContext:null,suspense:o,suspenseId:o?o.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return p.ctx={_:p},p.root=s?s.root:p,p.emit=Lh.bind(null,p),n.ce&&n.ce(p),p}let ri=null;const vu=()=>ri||bi;let qr,Ds;{const n=$r(),s=(o,c)=>{let _;return(_=n[o])||(_=n[o]=[]),_.push(c),p=>{_.length>1?_.forEach(A=>A(p)):_[0](p)}};qr=s("__VUE_INSTANCE_SETTERS__",o=>ri=o),Ds=s("__VUE_SSR_SETTERS__",o=>pr=o)}const _r=n=>{const s=ri;return qr(n),n.scope.on(),()=>{n.scope.off(),qr(s)}},za=()=>{ri&&ri.scope.off(),qr(null)};function yu(n){return n.vnode.shapeFlag&4}let pr=!1;function $h(n,s=!1,o=!1){s&&Ds(s);const{props:c,children:_}=n.vnode,p=yu(n);yh(n,c,p,s),Ch(n,_,o||s);const A=p?Zh(n,s):void 0;return s&&Ds(!1),A}function Zh(n,s){const o=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,lh);const{setup:c}=o;if(c){Ki();const _=n.setupContext=c.length>1?Yh(n):null,p=_r(n),A=gr(c,n,0,[n.props,_]),F=_o(A);if($i(),p(),(F||n.sp)&&!rr(n)&&$o(n),F){if(A.then(za,za),s)return A.then(D=>{Ua(n,D)}).catch(D=>{Yr(D,n,0)});n.asyncDep=A}else Ua(n,A)}else xu(n)}function Ua(n,s,o){ct(s)?n.type.__ssrInlineRender?n.ssrRender=s:n.render=s:Ot(s)&&(n.setupState=Uo(s)),xu(n)}function xu(n,s,o){const c=n.type;n.render||(n.render=c.render||Fi);{const _=_r(n);Ki();try{hh(n)}finally{$i(),_()}}}const Jh={get(n,s){return Qt(n,"get",""),n[s]}};function Yh(n){const s=o=>{n.exposed=o||{}};return{attrs:new Proxy(n.attrs,Jh),slots:n.slots,emit:n.emit,expose:s}}function is(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Uo(ea(n.exposed)),{get(s,o){if(o in s)return s[o];if(o in sr)return sr[o](n)},has(s,o){return o in s||o in sr}})):n.proxy}function Xh(n){return ct(n)&&"__vccOpts"in n}const sn=(n,s)=>Hl(n,s,pr),Qh="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Bs;const Ha=typeof window<"u"&&window.trustedTypes;if(Ha)try{Bs=Ha.createPolicy("vue",{createHTML:n=>n})}catch{}const bu=Bs?n=>Bs.createHTML(n):n=>n,ec="http://www.w3.org/2000/svg",tc="http://www.w3.org/1998/Math/MathML",Gi=typeof document<"u"?document:null,qa=Gi&&Gi.createElement("template"),ic={insert:(n,s,o)=>{s.insertBefore(n,o||null)},remove:n=>{const s=n.parentNode;s&&s.removeChild(n)},createElement:(n,s,o,c)=>{const _=s==="svg"?Gi.createElementNS(ec,n):s==="mathml"?Gi.createElementNS(tc,n):o?Gi.createElement(n,{is:o}):Gi.createElement(n);return n==="select"&&c&&c.multiple!=null&&_.setAttribute("multiple",c.multiple),_},createText:n=>Gi.createTextNode(n),createComment:n=>Gi.createComment(n),setText:(n,s)=>{n.nodeValue=s},setElementText:(n,s)=>{n.textContent=s},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Gi.querySelector(n),setScopeId(n,s){n.setAttribute(s,"")},insertStaticContent(n,s,o,c,_,p){const A=o?o.previousSibling:s.lastChild;if(_&&(_===p||_.nextSibling))for(;s.insertBefore(_.cloneNode(!0),o),!(_===p||!(_=_.nextSibling)););else{qa.innerHTML=bu(c==="svg"?`<svg>${n}</svg>`:c==="mathml"?`<math>${n}</math>`:n);const F=qa.content;if(c==="svg"||c==="mathml"){const D=F.firstChild;for(;D.firstChild;)F.appendChild(D.firstChild);F.removeChild(D)}s.insertBefore(F,o)}return[A?A.nextSibling:s.firstChild,o?o.previousSibling:s.lastChild]}},nc=Symbol("_vtc");function rc(n,s,o){const c=n[nc];c&&(s=(s?[s,...c]:[...c]).join(" ")),s==null?n.removeAttribute("class"):o?n.setAttribute("class",s):n.className=s}const Ga=Symbol("_vod"),sc=Symbol("_vsh"),ac=Symbol(""),oc=/(^|;)\s*display\s*:/;function uc(n,s,o){const c=n.style,_=Bt(o);let p=!1;if(o&&!_){if(s)if(Bt(s))for(const A of s.split(";")){const F=A.slice(0,A.indexOf(":")).trim();o[F]==null&&Nr(c,F,"")}else for(const A in s)o[A]==null&&Nr(c,A,"");for(const A in o)A==="display"&&(p=!0),Nr(c,A,o[A])}else if(_){if(s!==o){const A=c[ac];A&&(o+=";"+A),c.cssText=o,p=oc.test(o)}}else s&&n.removeAttribute("style");Ga in n&&(n[Ga]=p?c.display:"",n[sc]&&(c.display="none"))}const Wa=/\s*!important$/;function Nr(n,s,o){if(st(o))o.forEach(c=>Nr(n,s,c));else if(o==null&&(o=""),s.startsWith("--"))n.setProperty(s,o);else{const c=lc(n,s);Wa.test(o)?n.setProperty(pn(c),o.replace(Wa,""),"important"):n[c]=o}}const ja=["Webkit","Moz","ms"],Cs={};function lc(n,s){const o=Cs[s];if(o)return o;let c=ln(s);if(c!=="filter"&&c in n)return Cs[s]=c;c=yo(c);for(let _=0;_<ja.length;_++){const p=ja[_]+c;if(p in n)return Cs[s]=p}return s}const Ka="http://www.w3.org/1999/xlink";function $a(n,s,o,c,_,p=dl(s)){c&&s.startsWith("xlink:")?o==null?n.removeAttributeNS(Ka,s.slice(6,s.length)):n.setAttributeNS(Ka,s,o):o==null||p&&!xo(o)?n.removeAttribute(s):n.setAttribute(s,p?"":dn(o)?String(o):o)}function Za(n,s,o,c,_){if(s==="innerHTML"||s==="textContent"){o!=null&&(n[s]=s==="innerHTML"?bu(o):o);return}const p=n.tagName;if(s==="value"&&p!=="PROGRESS"&&!p.includes("-")){const F=p==="OPTION"?n.getAttribute("value")||"":n.value,D=o==null?n.type==="checkbox"?"on":"":String(o);(F!==D||!("_value"in n))&&(n.value=D),o==null&&n.removeAttribute(s),n._value=o;return}let A=!1;if(o===""||o==null){const F=typeof n[s];F==="boolean"?o=xo(o):o==null&&F==="string"?(o="",A=!0):F==="number"&&(o=0,A=!0)}try{n[s]=o}catch{}A&&n.removeAttribute(_||s)}function Fn(n,s,o,c){n.addEventListener(s,o,c)}function hc(n,s,o,c){n.removeEventListener(s,o,c)}const Ja=Symbol("_vei");function cc(n,s,o,c,_=null){const p=n[Ja]||(n[Ja]={}),A=p[s];if(c&&A)A.value=c;else{const[F,D]=fc(s);if(c){const te=p[s]=gc(c,_);Fn(n,F,te,D)}else A&&(hc(n,F,A,D),p[s]=void 0)}}const Ya=/(?:Once|Passive|Capture)$/;function fc(n){let s;if(Ya.test(n)){s={};let c;for(;c=n.match(Ya);)n=n.slice(0,n.length-c[0].length),s[c[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):pn(n.slice(2)),s]}let Ss=0;const dc=Promise.resolve(),pc=()=>Ss||(dc.then(()=>Ss=0),Ss=Date.now());function gc(n,s){const o=c=>{if(!c._vts)c._vts=Date.now();else if(c._vts<=o.attached)return;Vi(_c(c,o.value),s,5,[c])};return o.value=n,o.attached=pc(),o}function _c(n,s){if(st(s)){const o=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{o.call(n),n._stopped=!0},s.map(c=>_=>!_._stopped&&c&&c(_))}else return s}const Xa=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,mc=(n,s,o,c,_,p)=>{const A=_==="svg";s==="class"?rc(n,c,A):s==="style"?uc(n,o,c):Wr(s)?qs(s)||cc(n,s,o,c,p):(s[0]==="."?(s=s.slice(1),!0):s[0]==="^"?(s=s.slice(1),!1):vc(n,s,c,A))?(Za(n,s,c),!n.tagName.includes("-")&&(s==="value"||s==="checked"||s==="selected")&&$a(n,s,c,A,p,s!=="value")):n._isVueCE&&(/[A-Z]/.test(s)||!Bt(c))?Za(n,ln(s),c,p,s):(s==="true-value"?n._trueValue=c:s==="false-value"&&(n._falseValue=c),$a(n,s,c,A))};function vc(n,s,o,c){if(c)return!!(s==="innerHTML"||s==="textContent"||s in n&&Xa(s)&&ct(o));if(s==="spellcheck"||s==="draggable"||s==="translate"||s==="autocorrect"||s==="form"||s==="list"&&n.tagName==="INPUT"||s==="type"&&n.tagName==="TEXTAREA")return!1;if(s==="width"||s==="height"){const _=n.tagName;if(_==="IMG"||_==="VIDEO"||_==="CANVAS"||_==="SOURCE")return!1}return Xa(s)&&Bt(o)?!1:s in n}const Qa=n=>{const s=n.props["onUpdate:modelValue"]||!1;return st(s)?o=>Or(s,o):s};function yc(n){n.target.composing=!0}function eo(n){const s=n.target;s.composing&&(s.composing=!1,s.dispatchEvent(new Event("input")))}const Ps=Symbol("_assign"),wu={created(n,{modifiers:{lazy:s,trim:o,number:c}},_){n[Ps]=Qa(_);const p=c||_.props&&_.props.type==="number";Fn(n,s?"change":"input",A=>{if(A.target.composing)return;let F=n.value;o&&(F=F.trim()),p&&(F=Ts(F)),n[Ps](F)}),o&&Fn(n,"change",()=>{n.value=n.value.trim()}),s||(Fn(n,"compositionstart",yc),Fn(n,"compositionend",eo),Fn(n,"change",eo))},mounted(n,{value:s}){n.value=s??""},beforeUpdate(n,{value:s,oldValue:o,modifiers:{lazy:c,trim:_,number:p}},A){if(n[Ps]=Qa(A),n.composing)return;const F=(p||n.type==="number")&&!/^0\d/.test(n.value)?Ts(n.value):n.value,D=s??"";F!==D&&(document.activeElement===n&&n.type!=="range"&&(c&&s===o||_&&n.value.trim()===D)||(n.value=D))}},xc={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Mr=(n,s)=>{const o=n._withKeys||(n._withKeys={}),c=s.join(".");return o[c]||(o[c]=_=>{if(!("key"in _))return;const p=pn(_.key);if(s.some(A=>A===p||xc[A]===p))return n(_)})},bc=ei({patchProp:mc},ic);let to;function wc(){return to||(to=Ph(bc))}const Cc=(...n)=>{const s=wc().createApp(...n),{mount:o}=s;return s.mount=c=>{const _=Pc(c);if(!_)return;const p=s._component;!ct(p)&&!p.render&&!p.template&&(p.template=_.innerHTML),_.nodeType===1&&(_.textContent="");const A=o(_,!1,Sc(_));return _ instanceof Element&&(_.removeAttribute("v-cloak"),_.setAttribute("data-v-app","")),A},s};function Sc(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Pc(n){return Bt(n)?document.querySelector(n):n}/*!
 * pinia v3.0.3
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Cu;const ns=n=>Cu=n,Su=Symbol();function zs(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var ur;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(ur||(ur={}));function Ic(){const n=So(!0),s=n.run(()=>Gt({}));let o=[],c=[];const _=ea({install(p){ns(_),_._a=p,p.provide(Su,_),p.config.globalProperties.$pinia=_,c.forEach(A=>o.push(A)),c=[]},use(p){return this._a?o.push(p):c.push(p),this},_p:o,_a:null,_e:n,_s:new Map,state:s});return _}const Pu=()=>{};function io(n,s,o,c=Pu){n.push(s);const _=()=>{const p=n.indexOf(s);p>-1&&(n.splice(p,1),c())};return!o&&Po()&&pl(_),_}function Ln(n,...s){n.slice().forEach(o=>{o(...s)})}const kc=n=>n(),no=Symbol(),Is=Symbol();function Us(n,s){n instanceof Map&&s instanceof Map?s.forEach((o,c)=>n.set(c,o)):n instanceof Set&&s instanceof Set&&s.forEach(n.add,n);for(const o in s){if(!s.hasOwnProperty(o))continue;const c=s[o],_=n[o];zs(_)&&zs(c)&&n.hasOwnProperty(o)&&!Ft(c)&&!on(c)?n[o]=Us(_,c):n[o]=c}return n}const Ac=Symbol();function Ec(n){return!zs(n)||!Object.prototype.hasOwnProperty.call(n,Ac)}const{assign:tn}=Object;function Tc(n){return!!(Ft(n)&&n.effect)}function Mc(n,s,o,c){const{state:_,actions:p,getters:A}=s,F=o.state.value[n];let D;function te(){F||(o.state.value[n]=_?_():{});const J=Dl(o.state.value[n]);return tn(J,p,Object.keys(A||{}).reduce((Q,oe)=>(Q[oe]=ea(sn(()=>{ns(o);const U=o._s.get(n);return A[oe].call(U,U)})),Q),{}))}return D=Iu(n,te,s,o,c,!0),D}function Iu(n,s,o={},c,_,p){let A;const F=tn({actions:{}},o),D={deep:!0};let te,J,Q=[],oe=[],U;const ze=c.state.value[n];!p&&!ze&&(c.state.value[n]={}),Gt({});let de;function be($e){let He;te=J=!1,typeof $e=="function"?($e(c.state.value[n]),He={type:ur.patchFunction,storeId:n,events:U}):(Us(c.state.value[n],$e),He={type:ur.patchObject,payload:$e,storeId:n,events:U});const lt=de=Symbol();ta().then(()=>{de===lt&&(te=!0)}),J=!0,Ln(Q,He,c.state.value[n])}const Ce=p?function(){const{state:He}=o,lt=He?He():{};this.$patch(yt=>{tn(yt,lt)})}:Pu;function Ye(){A.stop(),Q=[],oe=[],c._s.delete(n)}const Ve=($e,He="")=>{if(no in $e)return $e[Is]=He,$e;const lt=function(){ns(c);const yt=Array.from(arguments),ut=[],Ct=[];function qe(Re){ut.push(Re)}function _i(Re){Ct.push(Re)}Ln(oe,{args:yt,name:lt[Is],store:pe,after:qe,onError:_i});let ge;try{ge=$e.apply(this&&this.$id===n?this:pe,yt)}catch(Re){throw Ln(Ct,Re),Re}return ge instanceof Promise?ge.then(Re=>(Ln(ut,Re),Re)).catch(Re=>(Ln(Ct,Re),Promise.reject(Re))):(Ln(ut,ge),ge)};return lt[no]=!0,lt[Is]=He,lt},Fe={_p:c,$id:n,$onAction:io.bind(null,oe),$patch:be,$reset:Ce,$subscribe($e,He={}){const lt=io(Q,$e,He.detached,()=>yt()),yt=A.run(()=>un(()=>c.state.value[n],ut=>{(He.flush==="sync"?J:te)&&$e({storeId:n,type:ur.direct,events:U},ut)},tn({},D,He)));return lt},$dispose:Ye},pe=Jr(Fe);c._s.set(n,pe);const Ge=(c._a&&c._a.runWithContext||kc)(()=>c._e.run(()=>(A=So()).run(()=>s({action:Ve}))));for(const $e in Ge){const He=Ge[$e];if(Ft(He)&&!Tc(He)||on(He))p||(ze&&Ec(He)&&(Ft(He)?He.value=ze[$e]:Us(He,ze[$e])),c.state.value[n][$e]=He);else if(typeof He=="function"){const lt=Ve(He,$e);Ge[$e]=lt,F.actions[$e]=He}}return tn(pe,Ge),tn(gt(pe),Ge),Object.defineProperty(pe,"$state",{get:()=>c.state.value[n],set:$e=>{be(He=>{tn(He,$e)})}}),c._p.forEach($e=>{tn(pe,A.run(()=>$e({store:pe,app:c._a,pinia:c,options:F})))}),ze&&p&&o.hydrate&&o.hydrate(pe.$state,ze),te=!0,J=!0,pe}/*! #__NO_SIDE_EFFECTS__ */function Oc(n,s,o){let c;const _=typeof s=="function";c=_?o:s;function p(A,F){const D=vh();return A=A||(D?ar(Su,null):null),A&&ns(A),A=Cu,A._s.has(n)||(_?Iu(n,s,c,A):Mc(n,c,A)),A._s.get(n)}return p.$id=n,p}const Lc=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,Rc=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,Nc=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function Fc(n,s){if(n==="__proto__"||n==="constructor"&&s&&typeof s=="object"&&"prototype"in s){Vc(n);return}return s}function Vc(n){console.warn(`[destr] Dropping "${n}" key to prevent prototype pollution.`)}function Dc(n,s={}){if(typeof n!="string")return n;if(n[0]==='"'&&n[n.length-1]==='"'&&n.indexOf("\\")===-1)return n.slice(1,-1);const o=n.trim();if(o.length<=9)switch(o.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!Nc.test(n)){if(s.strict)throw new SyntaxError("[destr] Invalid JSON");return n}try{if(Lc.test(n)||Rc.test(n)){if(s.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(n,Fc)}return JSON.parse(n)}catch(c){if(s.strict)throw c;return n}}function Bc(n,s){if(n==null)return;let o=n;for(let c=0;c<s.length;c++){if(o==null||o[s[c]]==null)return;o=o[s[c]]}return o}function ua(n,s,o){if(o.length===0)return s;const c=o[0];return o.length>1&&(s=ua(typeof n!="object"||n===null||!Object.prototype.hasOwnProperty.call(n,c)?Number.isInteger(Number(o[1]))?[]:{}:n[c],s,Array.prototype.slice.call(o,1))),Number.isInteger(Number(c))&&Array.isArray(n)?n.slice()[c]:Object.assign({},n,{[c]:s})}function ku(n,s){if(n==null||s.length===0)return n;if(s.length===1){if(n==null)return n;if(Number.isInteger(s[0])&&Array.isArray(n))return Array.prototype.slice.call(n,0).splice(s[0],1);const o={};for(const c in n)o[c]=n[c];return delete o[s[0]],o}if(n[s[0]]==null){if(Number.isInteger(s[0])&&Array.isArray(n))return Array.prototype.concat.call([],n);const o={};for(const c in n)o[c]=n[c];return o}return ua(n,ku(n[s[0]],Array.prototype.slice.call(s,1)),[s[0]])}function Au(n,s){return s.map(o=>o.split(".")).map(o=>[o,Bc(n,o)]).filter(o=>o[1]!==void 0).reduce((o,c)=>ua(o,c[1],c[0]),{})}function Eu(n,s){return s.map(o=>o.split(".")).reduce((o,c)=>ku(o,c),n)}function ro(n,{storage:s,serializer:o,key:c,debug:_,pick:p,omit:A,beforeHydrate:F,afterHydrate:D},te,J=!0){try{J&&F?.(te);const Q=s.getItem(c);if(Q){const oe=o.deserialize(Q),U=p?Au(oe,p):oe,ze=A?Eu(U,A):U;n.$patch(ze)}J&&D?.(te)}catch(Q){_&&console.error("[pinia-plugin-persistedstate]",Q)}}function so(n,{storage:s,serializer:o,key:c,debug:_,pick:p,omit:A}){try{const F=p?Au(n,p):n,D=A?Eu(F,A):F,te=o.serialize(D);s.setItem(c,te)}catch(F){_&&console.error("[pinia-plugin-persistedstate]",F)}}function zc(n,s,o){const{pinia:c,store:_,options:{persist:p=o}}=n;if(!p)return;if(!(_.$id in c.state.value)){const D=c._s.get(_.$id.replace("__hot:",""));D&&Promise.resolve().then(()=>D.$persist());return}const F=(Array.isArray(p)?p:p===!0?[{}]:[p]).map(s);_.$hydrate=({runHooks:D=!0}={})=>{F.forEach(te=>{ro(_,te,n,D)})},_.$persist=()=>{F.forEach(D=>{so(_.$state,D)})},F.forEach(D=>{ro(_,D,n),_.$subscribe((te,J)=>so(J,D),{detached:!0})})}function Uc(n={}){return function(s){zc(s,o=>({key:(n.key?n.key:c=>c)(o.key??s.store.$id),debug:o.debug??n.debug??!1,serializer:o.serializer??n.serializer??{serialize:c=>JSON.stringify(c),deserialize:c=>Dc(c)},storage:o.storage??n.storage??window.localStorage,beforeHydrate:o.beforeHydrate,afterHydrate:o.afterHydrate,pick:o.pick,omit:o.omit}),n.auto??!1)}}var Hc=Uc();function ao(n,s){return n*s}function oo(n,s){return n/s}function Gr(n,s){return{x:ao(n.x,s),y:ao(n.y,s)}}function qc(n,s){return{x:oo(n.x,s),y:oo(n.y,s)}}function Gc(n){return n*Math.PI/180}function uo(n){return n*180/Math.PI}const la=Oc("stage",{state:()=>({currentMode:"edit",selectedComponentId:null,stageSpec:{version:"1.0.0",worldSize:{width:16,height:12},components:[]},raySegments:[],mirrorImageBunnies:[],metersToPixelsRatio:50,gridSize:.5,correctPhantomId:null,gameResult:null}),getters:{getComponentById:n=>s=>n.stageSpec.components.find(o=>o.id===s),getViewer:n=>n.stageSpec.components.find(s=>s.type==="viewer"),getComponentsByType:n=>s=>n.stageSpec.components.filter(o=>o.type===s),getBunnies:n=>n.stageSpec.components.filter(s=>s.type==="bunny"),getPhantoms:n=>n.stageSpec.components.filter(s=>s.type==="phantom"),isEditMode:n=>n.currentMode==="edit",isSandboxMode:n=>n.currentMode==="sandbox",isGameMode:n=>n.currentMode==="game"},actions:{setMode(n){this.currentMode=n,this.selectedComponentId=null,this.clearRays(),this.gameResult=null},selectComponent(n){this.selectedComponentId=n},addComponent(n){const s=`${n}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,o=this.stageSpec.worldSize.width/2,c=this.stageSpec.worldSize.height/2;let _;switch(n){case"viewer":_={id:s,type:"viewer",position:{x:o,y:c},orientation:0};break;case"wall":_={id:s,type:"wall",position:{x:o,y:c},orientation:0,length:2};break;case"mirror":_={id:s,type:"mirror",position:{x:o,y:c},orientation:0,length:2};break;case"bunny":_={id:s,type:"bunny",position:{x:o,y:c}};break;case"phantom":_={id:s,type:"phantom",position:{x:o,y:c}};break;default:throw new Error(`Unknown component type: ${n}`)}this.stageSpec.components.push(_),this.selectedComponentId=s},updateComponent(n,s){const o=this.stageSpec.components.findIndex(c=>c.id===n);o!==-1&&(this.stageSpec.components[o]={...this.stageSpec.components[o],...s})},deleteComponent(n){this.stageSpec.components=this.stageSpec.components.filter(s=>s.id!==n),this.selectedComponentId===n&&(this.selectedComponentId=null)},moveComponent(n,s){const o=this.snapToGrid(s),c={x:Math.max(0,Math.min(this.stageSpec.worldSize.width,o.x)),y:Math.max(0,Math.min(this.stageSpec.worldSize.height,o.y))};this.updateComponent(n,{position:c})},rotateComponent(n,s){const o=this.snapAngle(s);this.updateComponent(n,{orientation:o})},resizeComponent(n,s){const o=Math.max(.5,Math.min(10,s));this.updateComponent(n,{length:o})},snapToGrid(n){return{x:Math.round(n.x/this.gridSize)*this.gridSize,y:Math.round(n.y/this.gridSize)*this.gridSize}},snapAngle(n){const s=Math.PI/36;return Math.round(n/s)*s},setRaySegments(n){this.raySegments=n},setMirrorImageBunnies(n){this.mirrorImageBunnies=n},clearRays(){this.raySegments=[],this.mirrorImageBunnies=[]},updateMetersToPixelsRatio(n){this.metersToPixelsRatio=n},loadStageSpec(n){this.stageSpec=n,this.selectedComponentId=null,this.clearRays()},setCorrectPhantom(n){this.correctPhantomId=n},checkPhantomGuess(n){this.gameResult=n===this.correctPhantomId?"correct":"incorrect"},resetGame(){this.gameResult=null,this.correctPhantomId=null}},persist:!0}),Wc={class:"sidebar"},jc={class:"mode-buttons"},Kc=["onClick"],$c={key:0},Zc={class:"component-buttons"},Jc=["onClick"],Yc={key:1},Xc=["disabled"],Qc={key:2},ef={key:3},tf={key:4,class:"llm-generator"},nf={class:"form-group"},rf=["disabled"],sf={key:0,class:"copy-success-overlay"},af={key:5,class:"component-options"},of={class:"form-group"},uf=["value"],lf={class:"form-group"},hf=["value"],cf={key:0,class:"form-group"},ff=["value"],df={key:1,class:"form-group"},pf=["value"],gf=Xr({__name:"ControlPanel",emits:["animate-ray","unfold-ray"],setup(n,{emit:s}){const o=s,c=la(),_=Gt(!1),p=Gt(""),A=Gt(!1),F=Gt(""),D=Gt(!1),te=Gt(""),J=Gt(!1),Q=Gt(""),oe=Gt(""),U=Gt(!1),ze=["edit","sandbox","game"],de=["viewer","wall","mirror","bunny","phantom"],be=sn(()=>c.selectedComponentId?c.getComponentById(c.selectedComponentId):null);function Ce(){!be.value||!("orientation"in be.value)||(_.value=!0,p.value=uo(be.value.orientation).toString())}function Ye(Re){if(_.value&&(p.value=Re,be.value&&"orientation"in be.value)){const me=parseFloat(Re);if(!isNaN(me)){const Ee=Gc(me);c.rotateComponent(be.value.id,Ee)}}}function Ve(Re){const me=Re.target,Ee=parseFloat(me.value)||0,ot=5;if(Re.key==="ArrowUp"){Re.preventDefault();const St=Math.round((Ee+ot)/ot)*ot;me.value=St.toString(),Ye(St.toString())}else if(Re.key==="ArrowDown"){Re.preventDefault();const St=Math.round((Ee-ot)/ot)*ot;me.value=St.toString(),Ye(St.toString())}}function Fe(){_.value&&(_.value=!1)}function pe(Re){be.value&&(Re==="x"?(A.value=!0,F.value=be.value.position.x.toString()):(D.value=!0,te.value=be.value.position.y.toString()))}function M(Re,me){if(Re==="x"&&A.value?F.value=me:Re==="y"&&D.value&&(te.value=me),be.value){const Ee=parseFloat(me);if(!isNaN(Ee)){const ot={...be.value.position};ot[Re]=Ee,c.moveComponent(be.value.id,ot)}}}function Ge(Re){Re==="x"&&A.value?A.value=!1:Re==="y"&&D.value&&(D.value=!1)}function $e(){!be.value||!("length"in be.value)||(J.value=!0,Q.value=be.value.length.toString())}function He(Re){if(J.value&&(Q.value=Re,be.value&&"length"in be.value)){const me=parseFloat(Re);!isNaN(me)&&me>=.5&&me<=10&&c.resizeComponent(be.value.id,me)}}function lt(Re){const me=Re.target,Ee=parseFloat(me.value)||0,ot=.25;if(Re.key==="ArrowUp"){Re.preventDefault();const St=Math.round((Ee+ot)/ot)*ot;St<=10&&(me.value=St.toString(),He(St.toString()))}else if(Re.key==="ArrowDown"){Re.preventDefault();const St=Math.round((Ee-ot)/ot)*ot;St>=.5&&(me.value=St.toString(),He(St.toString()))}}function yt(){J.value&&(J.value=!1)}function ut(){be.value&&c.deleteComponent(be.value.id)}function Ct(){c.stageSpec.components=[],c.selectComponent(null),c.clearRays()}function qe(){console.log("[ControlPanel] Triggering ray animation"),o("animate-ray")}function _i(){console.log("[ControlPanel] Triggering unfold ray animation"),o("unfold-ray"),console.log("[Clear Board] All components removed from stage")}async function ge(){if(oe.value)try{const Re=`You are an AI assistant helping to generate specifications for a ray reflection physics game. The game simulates light rays bouncing off mirrors and hitting objects.

GAME WORLD:
- 2D coordinate system with positions in meters
- World size is typically 15m wide  10m high  
- Origin (0,0) is at top-left corner
- X increases rightward, Y increases downward

AVAILABLE COMPONENTS:
1. VIEWER: Emits light rays
   - Has position (x, y) and orientation (radians)
   - 0 radians = pointing right, /2 = pointing down,  = pointing left, 3/2 = pointing up
   - Example: { "id": "viewer1", "type": "viewer", "position": {"x": 2, "y": 5}, "orientation": 0 }

2. MIRROR: Reflects light rays
   - Has position (x, y), orientation (radians), and length (meters)
   - Orientation is the angle of the mirror surface
   - Example: { "id": "mirror1", "type": "mirror", "position": {"x": 7, "y": 3}, "orientation": 0.785, "length": 2 }

3. WALL: Absorbs light rays (stops them)
   - Has position (x, y), orientation (radians), and length (meters)
   - Example: { "id": "wall1", "type": "wall", "position": {"x": 10, "y": 4}, "orientation": 1.57, "length": 3 }

4. BUNNY: Target object that stops rays
   - Has position (x, y) only
   - Example: { "id": "bunny1", "type": "bunny", "position": {"x": 12, "y": 6} }
5. PHANTOM: In Game mode, PHANTOMs represent possible locations for the mirror image the Bunny forms.  They should be placed at plausible but incorrect 
where a viewer with a misunderstanding of mirror image positioning might think the bunny is (for example a plausible but incorrect distance). The positions
should be located to be clearly distinct from the actual mirror image so it isn't confusing for the player.
   - Has position (x, y) only
   - Example: { "id": "phantom1", "type": "phantom", "position": {"x": 14, "y": 8} }


COMPLETE EXAMPLE SCENES:

Example 1 - Simple mirror reflection:
{
  "version": "1.0",
  "worldSize": {
    "width": 15,
    "height": 10
  },
  "components": [
    { "id": "viewer1", "type": "viewer", "position": {"x": 2, "y": 5}, "orientation": 0 },
    { "id": "mirror1", "type": "mirror", "position": {"x": 8, "y": 5}, "orientation": 0.785, "length": 2 },
    { "id": "bunny1", "type": "bunny", "position": {"x": 8, "y": 2} }
  ]
}

Example 2 - Complex multi-mirror setup:
{
  "version": "1.0",
  "worldSize": {
    "width": 15,
    "height": 10
  },
  "components": [
    { "id": "viewer1", "type": "viewer", "position": {"x": 1, "y": 8}, "orientation": 0 },
    { "id": "mirror1", "type": "mirror", "position": {"x": 5, "y": 8}, "orientation": 1.57, "length": 2 },
    { "id": "mirror2", "type": "mirror", "position": {"x": 5, "y": 3}, "orientation": 0, "length": 2 },
    { "id": "wall1", "type": "wall", "position": {"x": 12, "y": 5}, "orientation": 1.57, "length": 4 },
    { "id": "bunny1", "type": "bunny", "position": {"x": 10, "y": 3} }
  ]
}

Example 3 - Maze-like puzzle:
{
  "version": "1.0",
  "worldSize": {
    "width": 15,
    "height": 10
  },
  "components": [
    { "id": "viewer1", "type": "viewer", "position": {"x": 1, "y": 1}, "orientation": 1.57 },
    { "id": "wall1", "type": "wall", "position": {"x": 7, "y": 2}, "orientation": 0, "length": 3 },
    { "id": "wall2", "type": "wall", "position": {"x": 3, "y": 6}, "orientation": 1.57, "length": 2 },
    { "id": "mirror1", "type": "mirror", "position": {"x": 6, "y": 8}, "orientation": 2.356, "length": 2 },
    { "id": "mirror2", "type": "mirror", "position": {"x": 12, "y": 7}, "orientation": 0.785, "length": 2 },
    { "id": "bunny1", "type": "bunny", "position": {"x": 13, "y": 3} }
  ]
}

IMPORTANT RULES:
- Onleate coypes: "viewer", "mirror", "wall", "bunny"
- Do NOT create "phantom" or "mirror_image" components (these are generated automatically)
- Always include exactly one viewer
- Use realistic positions within the 1510 world bounds
- Orientations are in radians (0 to 2): 0=right, /2=down, =left, 3/2=up
- Mirror/wall lengths should be 1-4 meters typically
- Generate unique IDs for each component
- Consider ray physics: light reflects off mirrors at equal angles, walls absorb rays
- Plan the ray path so the viewer can potentially see the bunny through reflections

OUTPUT FORMAT: Provide only a valid JSON object with the complete StageSpec structure (version, worldSize, components). No other text.

User Request: "${oe.value}"`;await navigator.clipboard.writeText(Re),U.value=!0,setTimeout(()=>{U.value=!1},2e3),console.log("[Prompt Generator] Prompt copied to clipboard")}catch(Re){console.error("[Prompt Generator] Error copying to clipboard:",Re);const me=document.createElement("textarea");me.value=fullPrompt,document.body.appendChild(me),me.select(),document.execCommand("copy"),document.body.removeChild(me),U.value=!0,setTimeout(()=>{U.value=!1},2e3)}}return(Re,me)=>($t(),Yt("div",Wc,[me[22]||(me[22]=Je("h2",null,"Ray Reflection Game",-1)),Je("div",jc,[($t(),Yt(xi,null,Ta(ze,Ee=>Je("button",{key:Ee,class:lr(["mode-button",{active:ai(c).currentMode===Ee}]),onClick:ot=>ai(c).setMode(Ee)},yi(Ee.charAt(0).toUpperCase()+Ee.slice(1)),11,Kc)),64))]),ai(c).isEditMode?($t(),Yt("div",$c,[me[11]||(me[11]=Je("h3",null,"Components",-1)),Je("div",Zc,[($t(),Yt(xi,null,Ta(de,Ee=>Je("button",{key:Ee,class:"component-button",onClick:ot=>ai(c).addComponent(Ee)}," Add "+yi(Ee.charAt(0).toUpperCase()+Ee.slice(1)),9,Jc)),64))]),Je("div",{style:{"text-align":"center","margin-top":"15px"}},[Je("button",{class:"component-button clear-button",style:{"background-color":"#dc3545",color:"white",width:"100%"},onClick:Ct}," Clear Board ")])])):Li("",!0),ai(c).isSandboxMode?($t(),Yt("div",Yc,[Je("button",{class:"test-button",disabled:!ai(c).getViewer,style:{"margin-top":"8px"},onClick:qe},"  Animate Ray ",8,Xc)])):Li("",!0),ai(c).isGameMode?($t(),Yt("div",Qc,[Je("div",{class:"game-instructions"},[me[12]||(me[12]=Je("h3",null," Mirror Image Game",-1)),me[13]||(me[13]=Je("p",null,"Watch the ray animation, then click on the phantom bunny that represents where the viewer sees the bunny through the mirrors.",-1)),me[14]||(me[14]=Je("div",{class:"instruction-hint"},"  The ray shows the light path from bunny to viewer - click where you think the viewer perceives the bunny to be! ",-1)),Je("button",{class:"test-button",style:{"margin-top":"8px"},onClick:_i},"  Show Solution ")])])):Li("",!0),ai(c).isGameMode&&ai(c).gameResult?($t(),Yt("div",ef,[Je("div",{class:lr(["game-feedback",ai(c).gameResult])},yi(ai(c).gameResult==="correct"?" Correct!":" Try again!"),3)])):Li("",!0),ai(c).isEditMode?($t(),Yt("div",tf,[me[17]||(me[17]=Je("h3",null,"AI Prompt Generator",-1)),Je("div",nf,[me[15]||(me[15]=Je("label",null,"Describe your scene",-1)),Ko(Je("textarea",{"onUpdate:modelValue":me[0]||(me[0]=Ee=>oe.value=Ee),placeholder:"e.g., Create a scene with a viewer looking at a bunny through two mirrors...",rows:"4",style:{width:"100%","margin-bottom":"10px",resize:"vertical"}},null,512),[[wu,oe.value]])]),Je("button",{class:"component-button",disabled:!oe.value,style:{width:"100%","margin-bottom":"10px",display:"flex","align-items":"center","justify-content":"center",gap:"8px"},onClick:ge},me[16]||(me[16]=[qh('<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-v-dc86ab21><rect x="9" y="9" width="13" height="13" rx="2" ry="2" data-v-dc86ab21></rect><path d="m5 15-4 0 0-4" data-v-dc86ab21></path><path d="m5 9-4 0 0-2" data-v-dc86ab21></path><path d="m1 5l4 0 0-4" data-v-dc86ab21></path></svg> Copy AI Prompt ',2)]),8,rf),U.value?($t(),Yt("div",sf,"  Prompt copied to clipboard! ")):Li("",!0)])):Li("",!0),be.value?($t(),Yt("div",af,[Je("h3",null,yi(be.value.type.charAt(0).toUpperCase()+be.value.type.slice(1))+" Options",1),Je("div",of,[me[18]||(me[18]=Je("label",null,"Position X (m)",-1)),Je("input",{type:"number",step:"0.25",value:A.value?F.value:be.value.position.x,onInput:me[1]||(me[1]=Ee=>M("x",Ee.target.value)),onFocus:me[2]||(me[2]=Ee=>pe("x")),onBlur:me[3]||(me[3]=Ee=>Ge("x")),onKeydown:me[4]||(me[4]=Mr(Ee=>Ge("x"),["enter"]))},null,40,uf)]),Je("div",lf,[me[19]||(me[19]=Je("label",null,"Position Y (m)",-1)),Je("input",{type:"number",step:"0.25",value:D.value?te.value:be.value.position.y,onInput:me[5]||(me[5]=Ee=>M("y",Ee.target.value)),onFocus:me[6]||(me[6]=Ee=>pe("y")),onBlur:me[7]||(me[7]=Ee=>Ge("y")),onKeydown:me[8]||(me[8]=Mr(Ee=>Ge("y"),["enter"]))},null,40,hf)]),"orientation"in be.value?($t(),Yt("div",cf,[me[20]||(me[20]=Je("label",null,"Orientation (degrees)",-1)),Je("input",{type:"number",step:"5",value:_.value?p.value:ai(uo)(be.value.orientation),onInput:me[9]||(me[9]=Ee=>Ye(Ee.target.value)),onFocus:Ce,onBlur:Fe,onKeydown:[Mr(Fe,["enter"]),Ve]},null,40,ff)])):Li("",!0),"length"in be.value?($t(),Yt("div",df,[me[21]||(me[21]=Je("label",null,"Length (m)",-1)),Je("input",{type:"number",step:"0.25",min:"0.5",max:"10",value:J.value?Q.value:be.value.length,onInput:me[10]||(me[10]=Ee=>He(Ee.target.value)),onFocus:$e,onBlur:yt,onKeydown:[Mr(yt,["enter"]),lt]},null,40,pf)])):Li("",!0),Je("button",{class:"component-button",style:{"background-color":"#dc3545",color:"white","margin-top":"10px"},onClick:ut}," Delete Component ")])):Li("",!0)]))}}),_f=(n,s)=>{const o=n.__vccOpts||n;for(const[c,_]of s)o[c]=_;return o},mf=_f(gf,[["__scopeId","data-v-dc86ab21"]]);function vf(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function yf(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var s=n.default;if(typeof s=="function"){var o=function c(){var _=!1;try{_=this instanceof c}catch{}return _?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};o.prototype=s.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(n).forEach(function(c){var _=Object.getOwnPropertyDescriptor(n,c);Object.defineProperty(o,c,_.get?_:{enumerable:!0,get:function(){return n[c]}})}),o}function xf(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Fr={exports:{}};const bf={},wf=Object.freeze(Object.defineProperty({__proto__:null,default:bf},Symbol.toStringTag,{value:"Module"})),lo=yf(wf);var Qn={exports:{}},Cf=Qn.exports,ho;function Sf(){return ho||(ho=1,function(n,s){(function(o,c){c(s)})(Cf,function(o){var c=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],_=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],p="-----------------------------------------------------------------------------------------------------------------------------------------------------",A="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",F={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},D="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",te={5:D,"5module":D+" export import",6:D+" const class extends export import super"},J=/^in(stanceof)?$/,Q=new RegExp("["+A+"]"),oe=new RegExp("["+A+p+"]");function U(i,l){for(var C=65536,O=0;O<l.length;O+=2){if(C+=l[O],C>i)return!1;if(C+=l[O+1],C>=i)return!0}return!1}function ze(i,l){return i<65?i===36:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&Q.test(String.fromCharCode(i)):l===!1?!1:U(i,_)}function de(i,l){return i<48?i===36:i<58?!0:i<65?!1:i<91?!0:i<97?i===95:i<123?!0:i<=65535?i>=170&&oe.test(String.fromCharCode(i)):l===!1?!1:U(i,_)||U(i,c)}var be=function(l,C){C===void 0&&(C={}),this.label=l,this.keyword=C.keyword,this.beforeExpr=!!C.beforeExpr,this.startsExpr=!!C.startsExpr,this.isLoop=!!C.isLoop,this.isAssign=!!C.isAssign,this.prefix=!!C.prefix,this.postfix=!!C.postfix,this.binop=C.binop||null,this.updateContext=null};function Ce(i,l){return new be(i,{beforeExpr:!0,binop:l})}var Ye={beforeExpr:!0},Ve={startsExpr:!0},Fe={};function pe(i,l){return l===void 0&&(l={}),l.keyword=i,Fe[i]=new be(i,l)}var M={num:new be("num",Ve),regexp:new be("regexp",Ve),string:new be("string",Ve),name:new be("name",Ve),privateId:new be("privateId",Ve),eof:new be("eof"),bracketL:new be("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new be("]"),braceL:new be("{",{beforeExpr:!0,startsExpr:!0}),braceR:new be("}"),parenL:new be("(",{beforeExpr:!0,startsExpr:!0}),parenR:new be(")"),comma:new be(",",Ye),semi:new be(";",Ye),colon:new be(":",Ye),dot:new be("."),question:new be("?",Ye),questionDot:new be("?."),arrow:new be("=>",Ye),template:new be("template"),invalidTemplate:new be("invalidTemplate"),ellipsis:new be("...",Ye),backQuote:new be("`",Ve),dollarBraceL:new be("${",{beforeExpr:!0,startsExpr:!0}),eq:new be("=",{beforeExpr:!0,isAssign:!0}),assign:new be("_=",{beforeExpr:!0,isAssign:!0}),incDec:new be("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new be("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ce("||",1),logicalAND:Ce("&&",2),bitwiseOR:Ce("|",3),bitwiseXOR:Ce("^",4),bitwiseAND:Ce("&",5),equality:Ce("==/!=/===/!==",6),relational:Ce("</>/<=/>=",7),bitShift:Ce("<</>>/>>>",8),plusMin:new be("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ce("%",10),star:Ce("*",10),slash:Ce("/",10),starstar:new be("**",{beforeExpr:!0}),coalesce:Ce("??",1),_break:pe("break"),_case:pe("case",Ye),_catch:pe("catch"),_continue:pe("continue"),_debugger:pe("debugger"),_default:pe("default",Ye),_do:pe("do",{isLoop:!0,beforeExpr:!0}),_else:pe("else",Ye),_finally:pe("finally"),_for:pe("for",{isLoop:!0}),_function:pe("function",Ve),_if:pe("if"),_return:pe("return",Ye),_switch:pe("switch"),_throw:pe("throw",Ye),_try:pe("try"),_var:pe("var"),_const:pe("const"),_while:pe("while",{isLoop:!0}),_with:pe("with"),_new:pe("new",{beforeExpr:!0,startsExpr:!0}),_this:pe("this",Ve),_super:pe("super",Ve),_class:pe("class",Ve),_extends:pe("extends",Ye),_export:pe("export"),_import:pe("import",Ve),_null:pe("null",Ve),_true:pe("true",Ve),_false:pe("false",Ve),_in:pe("in",{beforeExpr:!0,binop:7}),_instanceof:pe("instanceof",{beforeExpr:!0,binop:7}),_typeof:pe("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:pe("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:pe("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Ge=/\r\n?|\n|\u2028|\u2029/,$e=new RegExp(Ge.source,"g");function He(i){return i===10||i===13||i===8232||i===8233}function lt(i,l,C){C===void 0&&(C=i.length);for(var O=l;O<C;O++){var z=i.charCodeAt(O);if(He(z))return O<C-1&&z===13&&i.charCodeAt(O+1)===10?O+2:O+1}return-1}var yt=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,ut=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Ct=Object.prototype,qe=Ct.hasOwnProperty,_i=Ct.toString,ge=Object.hasOwn||function(i,l){return qe.call(i,l)},Re=Array.isArray||function(i){return _i.call(i)==="[object Array]"},me=Object.create(null);function Ee(i){return me[i]||(me[i]=new RegExp("^(?:"+i.replace(/ /g,"|")+")$"))}function ot(i){return i<=65535?String.fromCharCode(i):(i-=65536,String.fromCharCode((i>>10)+55296,(i&1023)+56320))}var St=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,zt=function(l,C){this.line=l,this.column=C};zt.prototype.offset=function(l){return new zt(this.line,this.column+l)};var oi=function(l,C,O){this.start=C,this.end=O,l.sourceFile!==null&&(this.source=l.sourceFile)};function gn(i,l){for(var C=1,O=0;;){var z=lt(i,O,l);if(z<0)return new zt(C,l-O);++C,O=z}}var Pt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},ui=!1;function Ti(i){var l={};for(var C in Pt)l[C]=i&&ge(i,C)?i[C]:Pt[C];if(l.ecmaVersion==="latest"?l.ecmaVersion=1e8:l.ecmaVersion==null?(!ui&&typeof console=="object"&&console.warn&&(ui=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),l.ecmaVersion=11):l.ecmaVersion>=2015&&(l.ecmaVersion-=2009),l.allowReserved==null&&(l.allowReserved=l.ecmaVersion<5),(!i||i.allowHashBang==null)&&(l.allowHashBang=l.ecmaVersion>=14),Re(l.onToken)){var O=l.onToken;l.onToken=function(z){return O.push(z)}}return Re(l.onComment)&&(l.onComment=Di(l,l.onComment)),l}function Di(i,l){return function(C,O,z,ie,re,Se){var Le={type:C?"Block":"Line",value:O,start:z,end:ie};i.locations&&(Le.loc=new oi(this,re,Se)),i.ranges&&(Le.range=[z,ie]),l.push(Le)}}var mt=1,pt=2,xt=4,j=8,Y=16,le=32,we=64,ye=128,ve=256,Ne=512,Oe=mt|pt|ve;function ke(i,l){return pt|(i?xt:0)|(l?j:0)}var ce=0,We=1,xe=2,je=3,Ae=4,e=5,t=function(l,C,O){this.options=l=Ti(l),this.sourceFile=l.sourceFile,this.keywords=Ee(te[l.ecmaVersion>=6?6:l.sourceType==="module"?"5module":5]);var z="";l.allowReserved!==!0&&(z=F[l.ecmaVersion>=6?6:l.ecmaVersion===5?5:3],l.sourceType==="module"&&(z+=" await")),this.reservedWords=Ee(z);var ie=(z?z+" ":"")+F.strict;this.reservedWordsStrict=Ee(ie),this.reservedWordsStrictBind=Ee(ie+" "+F.strictBind),this.input=String(C),this.containsEsc=!1,O?(this.pos=O,this.lineStart=this.input.lastIndexOf(`
`,O-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ge).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=M.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=l.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&l.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(mt),this.regexpState=null,this.privateNameStack=[]},r={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};t.prototype.parse=function(){var l=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(l)},r.inFunction.get=function(){return(this.currentVarScope().flags&pt)>0},r.inGenerator.get=function(){return(this.currentVarScope().flags&j)>0},r.inAsync.get=function(){return(this.currentVarScope().flags&xt)>0},r.canAwait.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var l=this.scopeStack[i],C=l.flags;if(C&(ve|Ne))return!1;if(C&pt)return(C&xt)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},r.allowSuper.get=function(){var i=this.currentThisScope(),l=i.flags;return(l&we)>0||this.options.allowSuperOutsideMethod},r.allowDirectSuper.get=function(){return(this.currentThisScope().flags&ye)>0},r.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},r.allowNewDotTarget.get=function(){for(var i=this.scopeStack.length-1;i>=0;i--){var l=this.scopeStack[i],C=l.flags;if(C&(ve|Ne)||C&pt&&!(C&Y))return!0}return!1},r.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&ve)>0},t.extend=function(){for(var l=[],C=arguments.length;C--;)l[C]=arguments[C];for(var O=this,z=0;z<l.length;z++)O=l[z](O);return O},t.parse=function(l,C){return new this(C,l).parse()},t.parseExpressionAt=function(l,C,O){var z=new this(O,l,C);return z.nextToken(),z.parseExpression()},t.tokenizer=function(l,C){return new this(C,l)},Object.defineProperties(t.prototype,r);var a=t.prototype,u=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;a.strictDirective=function(i){if(this.options.ecmaVersion<5)return!1;for(;;){ut.lastIndex=i,i+=ut.exec(this.input)[0].length;var l=u.exec(this.input.slice(i));if(!l)return!1;if((l[1]||l[2])==="use strict"){ut.lastIndex=i+l[0].length;var C=ut.exec(this.input),O=C.index+C[0].length,z=this.input.charAt(O);return z===";"||z==="}"||Ge.test(C[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(z)||z==="!"&&this.input.charAt(O+1)==="=")}i+=l[0].length,ut.lastIndex=i,i+=ut.exec(this.input)[0].length,this.input[i]===";"&&i++}},a.eat=function(i){return this.type===i?(this.next(),!0):!1},a.isContextual=function(i){return this.type===M.name&&this.value===i&&!this.containsEsc},a.eatContextual=function(i){return this.isContextual(i)?(this.next(),!0):!1},a.expectContextual=function(i){this.eatContextual(i)||this.unexpected()},a.canInsertSemicolon=function(){return this.type===M.eof||this.type===M.braceR||Ge.test(this.input.slice(this.lastTokEnd,this.start))},a.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},a.semicolon=function(){!this.eat(M.semi)&&!this.insertSemicolon()&&this.unexpected()},a.afterTrailingComma=function(i,l){if(this.type===i)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),l||this.next(),!0},a.expect=function(i){this.eat(i)||this.unexpected()},a.unexpected=function(i){this.raise(i??this.start,"Unexpected token")};var h=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};a.checkPatternErrors=function(i,l){if(i){i.trailingComma>-1&&this.raiseRecoverable(i.trailingComma,"Comma is not permitted after the rest element");var C=l?i.parenthesizedAssign:i.parenthesizedBind;C>-1&&this.raiseRecoverable(C,l?"Assigning to rvalue":"Parenthesized pattern")}},a.checkExpressionErrors=function(i,l){if(!i)return!1;var C=i.shorthandAssign,O=i.doubleProto;if(!l)return C>=0||O>=0;C>=0&&this.raise(C,"Shorthand property assignments are valid only in destructuring patterns"),O>=0&&this.raiseRecoverable(O,"Redefinition of __proto__ property")},a.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},a.isSimpleAssignTarget=function(i){return i.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(i.expression):i.type==="Identifier"||i.type==="MemberExpression"};var f=t.prototype;f.parseTopLevel=function(i){var l=Object.create(null);for(i.body||(i.body=[]);this.type!==M.eof;){var C=this.parseStatement(null,!0,l);i.body.push(C)}if(this.inModule)for(var O=0,z=Object.keys(this.undefinedExports);O<z.length;O+=1){var ie=z[O];this.raiseRecoverable(this.undefinedExports[ie].start,"Export '"+ie+"' is not defined")}return this.adaptDirectivePrologue(i.body),this.next(),i.sourceType=this.options.sourceType,this.finishNode(i,"Program")};var d={kind:"loop"},g={kind:"switch"};f.isLet=function(i){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;ut.lastIndex=this.pos;var l=ut.exec(this.input),C=this.pos+l[0].length,O=this.input.charCodeAt(C);if(O===91||O===92)return!0;if(i)return!1;if(O===123||O>55295&&O<56320)return!0;if(ze(O,!0)){for(var z=C+1;de(O=this.input.charCodeAt(z),!0);)++z;if(O===92||O>55295&&O<56320)return!0;var ie=this.input.slice(C,z);if(!J.test(ie))return!0}return!1},f.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;ut.lastIndex=this.pos;var i=ut.exec(this.input),l=this.pos+i[0].length,C;return!Ge.test(this.input.slice(this.pos,l))&&this.input.slice(l,l+8)==="function"&&(l+8===this.input.length||!(de(C=this.input.charCodeAt(l+8))||C>55295&&C<56320))},f.isUsingKeyword=function(i,l){if(this.options.ecmaVersion<17||!this.isContextual(i?"await":"using"))return!1;ut.lastIndex=this.pos;var C=ut.exec(this.input),O=this.pos+C[0].length;if(Ge.test(this.input.slice(this.pos,O)))return!1;if(i){var z=O+5,ie;if(this.input.slice(O,z)!=="using"||z===this.input.length||de(ie=this.input.charCodeAt(z))||ie>55295&&ie<56320)return!1;ut.lastIndex=z;var re=ut.exec(this.input);if(re&&Ge.test(this.input.slice(z,z+re[0].length)))return!1}if(l){var Se=O+2,Le;if(this.input.slice(O,Se)==="of"&&(Se===this.input.length||!de(Le=this.input.charCodeAt(Se))&&!(Le>55295&&Le<56320)))return!1}var et=this.input.charCodeAt(O);return ze(et,!0)||et===92},f.isAwaitUsing=function(i){return this.isUsingKeyword(!0,i)},f.isUsing=function(i){return this.isUsingKeyword(!1,i)},f.parseStatement=function(i,l,C){var O=this.type,z=this.startNode(),ie;switch(this.isLet(i)&&(O=M._var,ie="let"),O){case M._break:case M._continue:return this.parseBreakContinueStatement(z,O.keyword);case M._debugger:return this.parseDebuggerStatement(z);case M._do:return this.parseDoStatement(z);case M._for:return this.parseForStatement(z);case M._function:return i&&(this.strict||i!=="if"&&i!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(z,!1,!i);case M._class:return i&&this.unexpected(),this.parseClass(z,!0);case M._if:return this.parseIfStatement(z);case M._return:return this.parseReturnStatement(z);case M._switch:return this.parseSwitchStatement(z);case M._throw:return this.parseThrowStatement(z);case M._try:return this.parseTryStatement(z);case M._const:case M._var:return ie=ie||this.value,i&&ie!=="var"&&this.unexpected(),this.parseVarStatement(z,ie);case M._while:return this.parseWhileStatement(z);case M._with:return this.parseWithStatement(z);case M.braceL:return this.parseBlock(!0,z);case M.semi:return this.parseEmptyStatement(z);case M._export:case M._import:if(this.options.ecmaVersion>10&&O===M._import){ut.lastIndex=this.pos;var re=ut.exec(this.input),Se=this.pos+re[0].length,Le=this.input.charCodeAt(Se);if(Le===40||Le===46)return this.parseExpressionStatement(z,this.parseExpression())}return this.options.allowImportExportEverywhere||(l||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),O===M._import?this.parseImport(z):this.parseExport(z,C);default:if(this.isAsyncFunction())return i&&this.unexpected(),this.next(),this.parseFunctionStatement(z,!0,!i);var et=this.isAwaitUsing(!1)?"await using":this.isUsing(!1)?"using":null;if(et)return l&&this.options.sourceType==="script"&&this.raise(this.start,"Using declaration cannot appear in the top level when source type is `script`"),et==="await using"&&(this.canAwait||this.raise(this.start,"Await using cannot appear outside of async function"),this.next()),this.next(),this.parseVar(z,!1,et),this.semicolon(),this.finishNode(z,"VariableDeclaration");var ht=this.value,bt=this.parseExpression();return O===M.name&&bt.type==="Identifier"&&this.eat(M.colon)?this.parseLabeledStatement(z,ht,bt,i):this.parseExpressionStatement(z,bt)}},f.parseBreakContinueStatement=function(i,l){var C=l==="break";this.next(),this.eat(M.semi)||this.insertSemicolon()?i.label=null:this.type!==M.name?this.unexpected():(i.label=this.parseIdent(),this.semicolon());for(var O=0;O<this.labels.length;++O){var z=this.labels[O];if((i.label==null||z.name===i.label.name)&&(z.kind!=null&&(C||z.kind==="loop")||i.label&&C))break}return O===this.labels.length&&this.raise(i.start,"Unsyntactic "+l),this.finishNode(i,C?"BreakStatement":"ContinueStatement")},f.parseDebuggerStatement=function(i){return this.next(),this.semicolon(),this.finishNode(i,"DebuggerStatement")},f.parseDoStatement=function(i){return this.next(),this.labels.push(d),i.body=this.parseStatement("do"),this.labels.pop(),this.expect(M._while),i.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(M.semi):this.semicolon(),this.finishNode(i,"DoWhileStatement")},f.parseForStatement=function(i){this.next();var l=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(d),this.enterScope(0),this.expect(M.parenL),this.type===M.semi)return l>-1&&this.unexpected(l),this.parseFor(i,null);var C=this.isLet();if(this.type===M._var||this.type===M._const||C){var O=this.startNode(),z=C?"let":this.value;return this.next(),this.parseVar(O,!0,z),this.finishNode(O,"VariableDeclaration"),this.parseForAfterInit(i,O,l)}var ie=this.isContextual("let"),re=!1,Se=this.isUsing(!0)?"using":this.isAwaitUsing(!0)?"await using":null;if(Se){var Le=this.startNode();return this.next(),Se==="await using"&&this.next(),this.parseVar(Le,!0,Se),this.finishNode(Le,"VariableDeclaration"),this.parseForAfterInit(i,Le,l)}var et=this.containsEsc,ht=new h,bt=this.start,Ut=l>-1?this.parseExprSubscripts(ht,"await"):this.parseExpression(!0,ht);return this.type===M._in||(re=this.options.ecmaVersion>=6&&this.isContextual("of"))?(l>-1?(this.type===M._in&&this.unexpected(l),i.await=!0):re&&this.options.ecmaVersion>=8&&(Ut.start===bt&&!et&&Ut.type==="Identifier"&&Ut.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(i.await=!1)),ie&&re&&this.raise(Ut.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(Ut,!1,ht),this.checkLValPattern(Ut),this.parseForIn(i,Ut)):(this.checkExpressionErrors(ht,!0),l>-1&&this.unexpected(l),this.parseFor(i,Ut))},f.parseForAfterInit=function(i,l,C){return(this.type===M._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&l.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===M._in?C>-1&&this.unexpected(C):i.await=C>-1),this.parseForIn(i,l)):(C>-1&&this.unexpected(C),this.parseFor(i,l))},f.parseFunctionStatement=function(i,l,C){return this.next(),this.parseFunction(i,b|(C?0:S),!1,l)},f.parseIfStatement=function(i){return this.next(),i.test=this.parseParenExpression(),i.consequent=this.parseStatement("if"),i.alternate=this.eat(M._else)?this.parseStatement("if"):null,this.finishNode(i,"IfStatement")},f.parseReturnStatement=function(i){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(M.semi)||this.insertSemicolon()?i.argument=null:(i.argument=this.parseExpression(),this.semicolon()),this.finishNode(i,"ReturnStatement")},f.parseSwitchStatement=function(i){this.next(),i.discriminant=this.parseParenExpression(),i.cases=[],this.expect(M.braceL),this.labels.push(g),this.enterScope(0);for(var l,C=!1;this.type!==M.braceR;)if(this.type===M._case||this.type===M._default){var O=this.type===M._case;l&&this.finishNode(l,"SwitchCase"),i.cases.push(l=this.startNode()),l.consequent=[],this.next(),O?l.test=this.parseExpression():(C&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),C=!0,l.test=null),this.expect(M.colon)}else l||this.unexpected(),l.consequent.push(this.parseStatement(null));return this.exitScope(),l&&this.finishNode(l,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(i,"SwitchStatement")},f.parseThrowStatement=function(i){return this.next(),Ge.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),i.argument=this.parseExpression(),this.semicolon(),this.finishNode(i,"ThrowStatement")};var m=[];f.parseCatchClauseParam=function(){var i=this.parseBindingAtom(),l=i.type==="Identifier";return this.enterScope(l?le:0),this.checkLValPattern(i,l?Ae:xe),this.expect(M.parenR),i},f.parseTryStatement=function(i){if(this.next(),i.block=this.parseBlock(),i.handler=null,this.type===M._catch){var l=this.startNode();this.next(),this.eat(M.parenL)?l.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),l.param=null,this.enterScope(0)),l.body=this.parseBlock(!1),this.exitScope(),i.handler=this.finishNode(l,"CatchClause")}return i.finalizer=this.eat(M._finally)?this.parseBlock():null,!i.handler&&!i.finalizer&&this.raise(i.start,"Missing catch or finally clause"),this.finishNode(i,"TryStatement")},f.parseVarStatement=function(i,l,C){return this.next(),this.parseVar(i,!1,l,C),this.semicolon(),this.finishNode(i,"VariableDeclaration")},f.parseWhileStatement=function(i){return this.next(),i.test=this.parseParenExpression(),this.labels.push(d),i.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(i,"WhileStatement")},f.parseWithStatement=function(i){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),i.object=this.parseParenExpression(),i.body=this.parseStatement("with"),this.finishNode(i,"WithStatement")},f.parseEmptyStatement=function(i){return this.next(),this.finishNode(i,"EmptyStatement")},f.parseLabeledStatement=function(i,l,C,O){for(var z=0,ie=this.labels;z<ie.length;z+=1){var re=ie[z];re.name===l&&this.raise(C.start,"Label '"+l+"' is already declared")}for(var Se=this.type.isLoop?"loop":this.type===M._switch?"switch":null,Le=this.labels.length-1;Le>=0;Le--){var et=this.labels[Le];if(et.statementStart===i.start)et.statementStart=this.start,et.kind=Se;else break}return this.labels.push({name:l,kind:Se,statementStart:this.start}),i.body=this.parseStatement(O?O.indexOf("label")===-1?O+"label":O:"label"),this.labels.pop(),i.label=C,this.finishNode(i,"LabeledStatement")},f.parseExpressionStatement=function(i,l){return i.expression=l,this.semicolon(),this.finishNode(i,"ExpressionStatement")},f.parseBlock=function(i,l,C){for(i===void 0&&(i=!0),l===void 0&&(l=this.startNode()),l.body=[],this.expect(M.braceL),i&&this.enterScope(0);this.type!==M.braceR;){var O=this.parseStatement(null);l.body.push(O)}return C&&(this.strict=!1),this.next(),i&&this.exitScope(),this.finishNode(l,"BlockStatement")},f.parseFor=function(i,l){return i.init=l,this.expect(M.semi),i.test=this.type===M.semi?null:this.parseExpression(),this.expect(M.semi),i.update=this.type===M.parenR?null:this.parseExpression(),this.expect(M.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,"ForStatement")},f.parseForIn=function(i,l){var C=this.type===M._in;return this.next(),l.type==="VariableDeclaration"&&l.declarations[0].init!=null&&(!C||this.options.ecmaVersion<8||this.strict||l.kind!=="var"||l.declarations[0].id.type!=="Identifier")&&this.raise(l.start,(C?"for-in":"for-of")+" loop variable declaration may not have an initializer"),i.left=l,i.right=C?this.parseExpression():this.parseMaybeAssign(),this.expect(M.parenR),i.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(i,C?"ForInStatement":"ForOfStatement")},f.parseVar=function(i,l,C,O){for(i.declarations=[],i.kind=C;;){var z=this.startNode();if(this.parseVarId(z,C),this.eat(M.eq)?z.init=this.parseMaybeAssign(l):!O&&C==="const"&&!(this.type===M._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!O&&(C==="using"||C==="await using")&&this.options.ecmaVersion>=17&&this.type!==M._in&&!this.isContextual("of")?this.raise(this.lastTokEnd,"Missing initializer in "+C+" declaration"):!O&&z.id.type!=="Identifier"&&!(l&&(this.type===M._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):z.init=null,i.declarations.push(this.finishNode(z,"VariableDeclarator")),!this.eat(M.comma))break}return i},f.parseVarId=function(i,l){i.id=l==="using"||l==="await using"?this.parseIdent():this.parseBindingAtom(),this.checkLValPattern(i.id,l==="var"?We:xe,!1)};var b=1,S=2,x=4;f.parseFunction=function(i,l,C,O,z){this.initFunction(i),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!O)&&(this.type===M.star&&l&S&&this.unexpected(),i.generator=this.eat(M.star)),this.options.ecmaVersion>=8&&(i.async=!!O),l&b&&(i.id=l&x&&this.type!==M.name?null:this.parseIdent(),i.id&&!(l&S)&&this.checkLValSimple(i.id,this.strict||i.generator||i.async?this.treatFunctionsAsVar?We:xe:je));var ie=this.yieldPos,re=this.awaitPos,Se=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ke(i.async,i.generator)),l&b||(i.id=this.type===M.name?this.parseIdent():null),this.parseFunctionParams(i),this.parseFunctionBody(i,C,!1,z),this.yieldPos=ie,this.awaitPos=re,this.awaitIdentPos=Se,this.finishNode(i,l&b?"FunctionDeclaration":"FunctionExpression")},f.parseFunctionParams=function(i){this.expect(M.parenL),i.params=this.parseBindingList(M.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},f.parseClass=function(i,l){this.next();var C=this.strict;this.strict=!0,this.parseClassId(i,l),this.parseClassSuper(i);var O=this.enterClassBody(),z=this.startNode(),ie=!1;for(z.body=[],this.expect(M.braceL);this.type!==M.braceR;){var re=this.parseClassElement(i.superClass!==null);re&&(z.body.push(re),re.type==="MethodDefinition"&&re.kind==="constructor"?(ie&&this.raiseRecoverable(re.start,"Duplicate constructor in the same class"),ie=!0):re.key&&re.key.type==="PrivateIdentifier"&&y(O,re)&&this.raiseRecoverable(re.key.start,"Identifier '#"+re.key.name+"' has already been declared"))}return this.strict=C,this.next(),i.body=this.finishNode(z,"ClassBody"),this.exitClassBody(),this.finishNode(i,l?"ClassDeclaration":"ClassExpression")},f.parseClassElement=function(i){if(this.eat(M.semi))return null;var l=this.options.ecmaVersion,C=this.startNode(),O="",z=!1,ie=!1,re="method",Se=!1;if(this.eatContextual("static")){if(l>=13&&this.eat(M.braceL))return this.parseClassStaticBlock(C),C;this.isClassElementNameStart()||this.type===M.star?Se=!0:O="static"}if(C.static=Se,!O&&l>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===M.star)&&!this.canInsertSemicolon()?ie=!0:O="async"),!O&&(l>=9||!ie)&&this.eat(M.star)&&(z=!0),!O&&!ie&&!z){var Le=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?re=Le:O=Le)}if(O?(C.computed=!1,C.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),C.key.name=O,this.finishNode(C.key,"Identifier")):this.parseClassElementName(C),l<13||this.type===M.parenL||re!=="method"||z||ie){var et=!C.static&&L(C,"constructor"),ht=et&&i;et&&re!=="method"&&this.raise(C.key.start,"Constructor can't have get/set modifier"),C.kind=et?"constructor":re,this.parseClassMethod(C,z,ie,ht)}else this.parseClassField(C);return C},f.isClassElementNameStart=function(){return this.type===M.name||this.type===M.privateId||this.type===M.num||this.type===M.string||this.type===M.bracketL||this.type.keyword},f.parseClassElementName=function(i){this.type===M.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),i.computed=!1,i.key=this.parsePrivateIdent()):this.parsePropertyName(i)},f.parseClassMethod=function(i,l,C,O){var z=i.key;i.kind==="constructor"?(l&&this.raise(z.start,"Constructor can't be a generator"),C&&this.raise(z.start,"Constructor can't be an async method")):i.static&&L(i,"prototype")&&this.raise(z.start,"Classes may not have a static property named prototype");var ie=i.value=this.parseMethod(l,C,O);return i.kind==="get"&&ie.params.length!==0&&this.raiseRecoverable(ie.start,"getter should have no params"),i.kind==="set"&&ie.params.length!==1&&this.raiseRecoverable(ie.start,"setter should have exactly one param"),i.kind==="set"&&ie.params[0].type==="RestElement"&&this.raiseRecoverable(ie.params[0].start,"Setter cannot use rest params"),this.finishNode(i,"MethodDefinition")},f.parseClassField=function(i){return L(i,"constructor")?this.raise(i.key.start,"Classes can't have a field named 'constructor'"):i.static&&L(i,"prototype")&&this.raise(i.key.start,"Classes can't have a static field named 'prototype'"),this.eat(M.eq)?(this.enterScope(Ne|we),i.value=this.parseMaybeAssign(),this.exitScope()):i.value=null,this.semicolon(),this.finishNode(i,"PropertyDefinition")},f.parseClassStaticBlock=function(i){i.body=[];var l=this.labels;for(this.labels=[],this.enterScope(ve|we);this.type!==M.braceR;){var C=this.parseStatement(null);i.body.push(C)}return this.next(),this.exitScope(),this.labels=l,this.finishNode(i,"StaticBlock")},f.parseClassId=function(i,l){this.type===M.name?(i.id=this.parseIdent(),l&&this.checkLValSimple(i.id,xe,!1)):(l===!0&&this.unexpected(),i.id=null)},f.parseClassSuper=function(i){i.superClass=this.eat(M._extends)?this.parseExprSubscripts(null,!1):null},f.enterClassBody=function(){var i={declared:Object.create(null),used:[]};return this.privateNameStack.push(i),i.declared},f.exitClassBody=function(){var i=this.privateNameStack.pop(),l=i.declared,C=i.used;if(this.options.checkPrivateFields)for(var O=this.privateNameStack.length,z=O===0?null:this.privateNameStack[O-1],ie=0;ie<C.length;++ie){var re=C[ie];ge(l,re.name)||(z?z.used.push(re):this.raiseRecoverable(re.start,"Private field '#"+re.name+"' must be declared in an enclosing class"))}};function y(i,l){var C=l.key.name,O=i[C],z="true";return l.type==="MethodDefinition"&&(l.kind==="get"||l.kind==="set")&&(z=(l.static?"s":"i")+l.kind),O==="iget"&&z==="iset"||O==="iset"&&z==="iget"||O==="sget"&&z==="sset"||O==="sset"&&z==="sget"?(i[C]="true",!1):O?!0:(i[C]=z,!1)}function L(i,l){var C=i.computed,O=i.key;return!C&&(O.type==="Identifier"&&O.name===l||O.type==="Literal"&&O.value===l)}f.parseExportAllDeclaration=function(i,l){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(i.exported=this.parseModuleExportName(),this.checkExport(l,i.exported,this.lastTokStart)):i.exported=null),this.expectContextual("from"),this.type!==M.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ExportAllDeclaration")},f.parseExport=function(i,l){if(this.next(),this.eat(M.star))return this.parseExportAllDeclaration(i,l);if(this.eat(M._default))return this.checkExport(l,"default",this.lastTokStart),i.declaration=this.parseExportDefaultDeclaration(),this.finishNode(i,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())i.declaration=this.parseExportDeclaration(i),i.declaration.type==="VariableDeclaration"?this.checkVariableExport(l,i.declaration.declarations):this.checkExport(l,i.declaration.id,i.declaration.id.start),i.specifiers=[],i.source=null,this.options.ecmaVersion>=16&&(i.attributes=[]);else{if(i.declaration=null,i.specifiers=this.parseExportSpecifiers(l),this.eatContextual("from"))this.type!==M.string&&this.unexpected(),i.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause());else{for(var C=0,O=i.specifiers;C<O.length;C+=1){var z=O[C];this.checkUnreserved(z.local),this.checkLocalExport(z.local),z.local.type==="Literal"&&this.raise(z.local.start,"A string literal cannot be used as an exported binding without `from`.")}i.source=null,this.options.ecmaVersion>=16&&(i.attributes=[])}this.semicolon()}return this.finishNode(i,"ExportNamedDeclaration")},f.parseExportDeclaration=function(i){return this.parseStatement(null)},f.parseExportDefaultDeclaration=function(){var i;if(this.type===M._function||(i=this.isAsyncFunction())){var l=this.startNode();return this.next(),i&&this.next(),this.parseFunction(l,b|x,!1,i)}else if(this.type===M._class){var C=this.startNode();return this.parseClass(C,"nullableID")}else{var O=this.parseMaybeAssign();return this.semicolon(),O}},f.checkExport=function(i,l,C){i&&(typeof l!="string"&&(l=l.type==="Identifier"?l.name:l.value),ge(i,l)&&this.raiseRecoverable(C,"Duplicate export '"+l+"'"),i[l]=!0)},f.checkPatternExport=function(i,l){var C=l.type;if(C==="Identifier")this.checkExport(i,l,l.start);else if(C==="ObjectPattern")for(var O=0,z=l.properties;O<z.length;O+=1){var ie=z[O];this.checkPatternExport(i,ie)}else if(C==="ArrayPattern")for(var re=0,Se=l.elements;re<Se.length;re+=1){var Le=Se[re];Le&&this.checkPatternExport(i,Le)}else C==="Property"?this.checkPatternExport(i,l.value):C==="AssignmentPattern"?this.checkPatternExport(i,l.left):C==="RestElement"&&this.checkPatternExport(i,l.argument)},f.checkVariableExport=function(i,l){if(i)for(var C=0,O=l;C<O.length;C+=1){var z=O[C];this.checkPatternExport(i,z.id)}},f.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},f.parseExportSpecifier=function(i){var l=this.startNode();return l.local=this.parseModuleExportName(),l.exported=this.eatContextual("as")?this.parseModuleExportName():l.local,this.checkExport(i,l.exported,l.exported.start),this.finishNode(l,"ExportSpecifier")},f.parseExportSpecifiers=function(i){var l=[],C=!0;for(this.expect(M.braceL);!this.eat(M.braceR);){if(C)C=!1;else if(this.expect(M.comma),this.afterTrailingComma(M.braceR))break;l.push(this.parseExportSpecifier(i))}return l},f.parseImport=function(i){return this.next(),this.type===M.string?(i.specifiers=m,i.source=this.parseExprAtom()):(i.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),i.source=this.type===M.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(i.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(i,"ImportDeclaration")},f.parseImportSpecifier=function(){var i=this.startNode();return i.imported=this.parseModuleExportName(),this.eatContextual("as")?i.local=this.parseIdent():(this.checkUnreserved(i.imported),i.local=i.imported),this.checkLValSimple(i.local,xe),this.finishNode(i,"ImportSpecifier")},f.parseImportDefaultSpecifier=function(){var i=this.startNode();return i.local=this.parseIdent(),this.checkLValSimple(i.local,xe),this.finishNode(i,"ImportDefaultSpecifier")},f.parseImportNamespaceSpecifier=function(){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,xe),this.finishNode(i,"ImportNamespaceSpecifier")},f.parseImportSpecifiers=function(){var i=[],l=!0;if(this.type===M.name&&(i.push(this.parseImportDefaultSpecifier()),!this.eat(M.comma)))return i;if(this.type===M.star)return i.push(this.parseImportNamespaceSpecifier()),i;for(this.expect(M.braceL);!this.eat(M.braceR);){if(l)l=!1;else if(this.expect(M.comma),this.afterTrailingComma(M.braceR))break;i.push(this.parseImportSpecifier())}return i},f.parseWithClause=function(){var i=[];if(!this.eat(M._with))return i;this.expect(M.braceL);for(var l={},C=!0;!this.eat(M.braceR);){if(C)C=!1;else if(this.expect(M.comma),this.afterTrailingComma(M.braceR))break;var O=this.parseImportAttribute(),z=O.key.type==="Identifier"?O.key.name:O.key.value;ge(l,z)&&this.raiseRecoverable(O.key.start,"Duplicate attribute key '"+z+"'"),l[z]=!0,i.push(O)}return i},f.parseImportAttribute=function(){var i=this.startNode();return i.key=this.type===M.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(M.colon),this.type!==M.string&&this.unexpected(),i.value=this.parseExprAtom(),this.finishNode(i,"ImportAttribute")},f.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===M.string){var i=this.parseLiteral(this.value);return St.test(i.value)&&this.raise(i.start,"An export name cannot include a lone surrogate."),i}return this.parseIdent(!0)},f.adaptDirectivePrologue=function(i){for(var l=0;l<i.length&&this.isDirectiveCandidate(i[l]);++l)i[l].directive=i[l].expression.raw.slice(1,-1)},f.isDirectiveCandidate=function(i){return this.options.ecmaVersion>=5&&i.type==="ExpressionStatement"&&i.expression.type==="Literal"&&typeof i.expression.value=="string"&&(this.input[i.start]==='"'||this.input[i.start]==="'")};var P=t.prototype;P.toAssignable=function(i,l,C){if(this.options.ecmaVersion>=6&&i)switch(i.type){case"Identifier":this.inAsync&&i.name==="await"&&this.raise(i.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":i.type="ObjectPattern",C&&this.checkPatternErrors(C,!0);for(var O=0,z=i.properties;O<z.length;O+=1){var ie=z[O];this.toAssignable(ie,l),ie.type==="RestElement"&&(ie.argument.type==="ArrayPattern"||ie.argument.type==="ObjectPattern")&&this.raise(ie.argument.start,"Unexpected token")}break;case"Property":i.kind!=="init"&&this.raise(i.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(i.value,l);break;case"ArrayExpression":i.type="ArrayPattern",C&&this.checkPatternErrors(C,!0),this.toAssignableList(i.elements,l);break;case"SpreadElement":i.type="RestElement",this.toAssignable(i.argument,l),i.argument.type==="AssignmentPattern"&&this.raise(i.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":i.operator!=="="&&this.raise(i.left.end,"Only '=' operator can be used for specifying default value."),i.type="AssignmentPattern",delete i.operator,this.toAssignable(i.left,l);break;case"ParenthesizedExpression":this.toAssignable(i.expression,l,C);break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!l)break;default:this.raise(i.start,"Assigning to rvalue")}else C&&this.checkPatternErrors(C,!0);return i},P.toAssignableList=function(i,l){for(var C=i.length,O=0;O<C;O++){var z=i[O];z&&this.toAssignable(z,l)}if(C){var ie=i[C-1];this.options.ecmaVersion===6&&l&&ie&&ie.type==="RestElement"&&ie.argument.type!=="Identifier"&&this.unexpected(ie.argument.start)}return i},P.parseSpread=function(i){var l=this.startNode();return this.next(),l.argument=this.parseMaybeAssign(!1,i),this.finishNode(l,"SpreadElement")},P.parseRestBinding=function(){var i=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==M.name&&this.unexpected(),i.argument=this.parseBindingAtom(),this.finishNode(i,"RestElement")},P.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case M.bracketL:var i=this.startNode();return this.next(),i.elements=this.parseBindingList(M.bracketR,!0,!0),this.finishNode(i,"ArrayPattern");case M.braceL:return this.parseObj(!0)}return this.parseIdent()},P.parseBindingList=function(i,l,C,O){for(var z=[],ie=!0;!this.eat(i);)if(ie?ie=!1:this.expect(M.comma),l&&this.type===M.comma)z.push(null);else{if(C&&this.afterTrailingComma(i))break;if(this.type===M.ellipsis){var re=this.parseRestBinding();this.parseBindingListItem(re),z.push(re),this.type===M.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(i);break}else z.push(this.parseAssignableListItem(O))}return z},P.parseAssignableListItem=function(i){var l=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(l),l},P.parseBindingListItem=function(i){return i},P.parseMaybeDefault=function(i,l,C){if(C=C||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(M.eq))return C;var O=this.startNodeAt(i,l);return O.left=C,O.right=this.parseMaybeAssign(),this.finishNode(O,"AssignmentPattern")},P.checkLValSimple=function(i,l,C){l===void 0&&(l=ce);var O=l!==ce;switch(i.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(i.name)&&this.raiseRecoverable(i.start,(O?"Binding ":"Assigning to ")+i.name+" in strict mode"),O&&(l===xe&&i.name==="let"&&this.raiseRecoverable(i.start,"let is disallowed as a lexically bound name"),C&&(ge(C,i.name)&&this.raiseRecoverable(i.start,"Argument name clash"),C[i.name]=!0),l!==e&&this.declareName(i.name,l,i.start));break;case"ChainExpression":this.raiseRecoverable(i.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":O&&this.raiseRecoverable(i.start,"Binding member expression");break;case"ParenthesizedExpression":return O&&this.raiseRecoverable(i.start,"Binding parenthesized expression"),this.checkLValSimple(i.expression,l,C);default:this.raise(i.start,(O?"Binding":"Assigning to")+" rvalue")}},P.checkLValPattern=function(i,l,C){switch(l===void 0&&(l=ce),i.type){case"ObjectPattern":for(var O=0,z=i.properties;O<z.length;O+=1){var ie=z[O];this.checkLValInnerPattern(ie,l,C)}break;case"ArrayPattern":for(var re=0,Se=i.elements;re<Se.length;re+=1){var Le=Se[re];Le&&this.checkLValInnerPattern(Le,l,C)}break;default:this.checkLValSimple(i,l,C)}},P.checkLValInnerPattern=function(i,l,C){switch(l===void 0&&(l=ce),i.type){case"Property":this.checkLValInnerPattern(i.value,l,C);break;case"AssignmentPattern":this.checkLValPattern(i.left,l,C);break;case"RestElement":this.checkLValPattern(i.argument,l,C);break;default:this.checkLValPattern(i,l,C)}};var T=function(l,C,O,z,ie){this.token=l,this.isExpr=!!C,this.preserveSpace=!!O,this.override=z,this.generator=!!ie},w={b_stat:new T("{",!1),b_expr:new T("{",!0),b_tmpl:new T("${",!1),p_stat:new T("(",!1),p_expr:new T("(",!0),q_tmpl:new T("`",!0,!0,function(i){return i.tryReadTemplateToken()}),f_stat:new T("function",!1),f_expr:new T("function",!0),f_expr_gen:new T("function",!0,!1,null,!0),f_gen:new T("function",!1,!1,null,!0)},k=t.prototype;k.initialContext=function(){return[w.b_stat]},k.curContext=function(){return this.context[this.context.length-1]},k.braceIsBlock=function(i){var l=this.curContext();return l===w.f_expr||l===w.f_stat?!0:i===M.colon&&(l===w.b_stat||l===w.b_expr)?!l.isExpr:i===M._return||i===M.name&&this.exprAllowed?Ge.test(this.input.slice(this.lastTokEnd,this.start)):i===M._else||i===M.semi||i===M.eof||i===M.parenR||i===M.arrow?!0:i===M.braceL?l===w.b_stat:i===M._var||i===M._const||i===M.name?!1:!this.exprAllowed},k.inGeneratorContext=function(){for(var i=this.context.length-1;i>=1;i--){var l=this.context[i];if(l.token==="function")return l.generator}return!1},k.updateContext=function(i){var l,C=this.type;C.keyword&&i===M.dot?this.exprAllowed=!1:(l=C.updateContext)?l.call(this,i):this.exprAllowed=C.beforeExpr},k.overrideContext=function(i){this.curContext()!==i&&(this.context[this.context.length-1]=i)},M.parenR.updateContext=M.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var i=this.context.pop();i===w.b_stat&&this.curContext().token==="function"&&(i=this.context.pop()),this.exprAllowed=!i.isExpr},M.braceL.updateContext=function(i){this.context.push(this.braceIsBlock(i)?w.b_stat:w.b_expr),this.exprAllowed=!0},M.dollarBraceL.updateContext=function(){this.context.push(w.b_tmpl),this.exprAllowed=!0},M.parenL.updateContext=function(i){var l=i===M._if||i===M._for||i===M._with||i===M._while;this.context.push(l?w.p_stat:w.p_expr),this.exprAllowed=!0},M.incDec.updateContext=function(){},M._function.updateContext=M._class.updateContext=function(i){i.beforeExpr&&i!==M._else&&!(i===M.semi&&this.curContext()!==w.p_stat)&&!(i===M._return&&Ge.test(this.input.slice(this.lastTokEnd,this.start)))&&!((i===M.colon||i===M.braceL)&&this.curContext()===w.b_stat)?this.context.push(w.f_expr):this.context.push(w.f_stat),this.exprAllowed=!1},M.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},M.backQuote.updateContext=function(){this.curContext()===w.q_tmpl?this.context.pop():this.context.push(w.q_tmpl),this.exprAllowed=!1},M.star.updateContext=function(i){if(i===M._function){var l=this.context.length-1;this.context[l]===w.f_expr?this.context[l]=w.f_expr_gen:this.context[l]=w.f_gen}this.exprAllowed=!0},M.name.updateContext=function(i){var l=!1;this.options.ecmaVersion>=6&&i!==M.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(l=!0),this.exprAllowed=l};var v=t.prototype;v.checkPropClash=function(i,l,C){if(!(this.options.ecmaVersion>=9&&i.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(i.computed||i.method||i.shorthand))){var O=i.key,z;switch(O.type){case"Identifier":z=O.name;break;case"Literal":z=String(O.value);break;default:return}var ie=i.kind;if(this.options.ecmaVersion>=6){z==="__proto__"&&ie==="init"&&(l.proto&&(C?C.doubleProto<0&&(C.doubleProto=O.start):this.raiseRecoverable(O.start,"Redefinition of __proto__ property")),l.proto=!0);return}z="$"+z;var re=l[z];if(re){var Se;ie==="init"?Se=this.strict&&re.init||re.get||re.set:Se=re.init||re[ie],Se&&this.raiseRecoverable(O.start,"Redefinition of property")}else re=l[z]={init:!1,get:!1,set:!1};re[ie]=!0}},v.parseExpression=function(i,l){var C=this.start,O=this.startLoc,z=this.parseMaybeAssign(i,l);if(this.type===M.comma){var ie=this.startNodeAt(C,O);for(ie.expressions=[z];this.eat(M.comma);)ie.expressions.push(this.parseMaybeAssign(i,l));return this.finishNode(ie,"SequenceExpression")}return z},v.parseMaybeAssign=function(i,l,C){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(i);this.exprAllowed=!1}var O=!1,z=-1,ie=-1,re=-1;l?(z=l.parenthesizedAssign,ie=l.trailingComma,re=l.doubleProto,l.parenthesizedAssign=l.trailingComma=-1):(l=new h,O=!0);var Se=this.start,Le=this.startLoc;(this.type===M.parenL||this.type===M.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=i==="await");var et=this.parseMaybeConditional(i,l);if(C&&(et=C.call(this,et,Se,Le)),this.type.isAssign){var ht=this.startNodeAt(Se,Le);return ht.operator=this.value,this.type===M.eq&&(et=this.toAssignable(et,!1,l)),O||(l.parenthesizedAssign=l.trailingComma=l.doubleProto=-1),l.shorthandAssign>=et.start&&(l.shorthandAssign=-1),this.type===M.eq?this.checkLValPattern(et):this.checkLValSimple(et),ht.left=et,this.next(),ht.right=this.parseMaybeAssign(i),re>-1&&(l.doubleProto=re),this.finishNode(ht,"AssignmentExpression")}else O&&this.checkExpressionErrors(l,!0);return z>-1&&(l.parenthesizedAssign=z),ie>-1&&(l.trailingComma=ie),et},v.parseMaybeConditional=function(i,l){var C=this.start,O=this.startLoc,z=this.parseExprOps(i,l);if(this.checkExpressionErrors(l))return z;if(this.eat(M.question)){var ie=this.startNodeAt(C,O);return ie.test=z,ie.consequent=this.parseMaybeAssign(),this.expect(M.colon),ie.alternate=this.parseMaybeAssign(i),this.finishNode(ie,"ConditionalExpression")}return z},v.parseExprOps=function(i,l){var C=this.start,O=this.startLoc,z=this.parseMaybeUnary(l,!1,!1,i);return this.checkExpressionErrors(l)||z.start===C&&z.type==="ArrowFunctionExpression"?z:this.parseExprOp(z,C,O,-1,i)},v.parseExprOp=function(i,l,C,O,z){var ie=this.type.binop;if(ie!=null&&(!z||this.type!==M._in)&&ie>O){var re=this.type===M.logicalOR||this.type===M.logicalAND,Se=this.type===M.coalesce;Se&&(ie=M.logicalAND.binop);var Le=this.value;this.next();var et=this.start,ht=this.startLoc,bt=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,z),et,ht,ie,z),Ut=this.buildBinary(l,C,i,bt,Le,re||Se);return(re&&this.type===M.coalesce||Se&&(this.type===M.logicalOR||this.type===M.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Ut,l,C,O,z)}return i},v.buildBinary=function(i,l,C,O,z,ie){O.type==="PrivateIdentifier"&&this.raise(O.start,"Private identifier can only be left side of binary expression");var re=this.startNodeAt(i,l);return re.left=C,re.operator=z,re.right=O,this.finishNode(re,ie?"LogicalExpression":"BinaryExpression")},v.parseMaybeUnary=function(i,l,C,O){var z=this.start,ie=this.startLoc,re;if(this.isContextual("await")&&this.canAwait)re=this.parseAwait(O),l=!0;else if(this.type.prefix){var Se=this.startNode(),Le=this.type===M.incDec;Se.operator=this.value,Se.prefix=!0,this.next(),Se.argument=this.parseMaybeUnary(null,!0,Le,O),this.checkExpressionErrors(i,!0),Le?this.checkLValSimple(Se.argument):this.strict&&Se.operator==="delete"&&I(Se.argument)?this.raiseRecoverable(Se.start,"Deleting local variable in strict mode"):Se.operator==="delete"&&R(Se.argument)?this.raiseRecoverable(Se.start,"Private fields can not be deleted"):l=!0,re=this.finishNode(Se,Le?"UpdateExpression":"UnaryExpression")}else if(!l&&this.type===M.privateId)(O||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),re=this.parsePrivateIdent(),this.type!==M._in&&this.unexpected();else{if(re=this.parseExprSubscripts(i,O),this.checkExpressionErrors(i))return re;for(;this.type.postfix&&!this.canInsertSemicolon();){var et=this.startNodeAt(z,ie);et.operator=this.value,et.prefix=!1,et.argument=re,this.checkLValSimple(re),this.next(),re=this.finishNode(et,"UpdateExpression")}}if(!C&&this.eat(M.starstar))if(l)this.unexpected(this.lastTokStart);else return this.buildBinary(z,ie,re,this.parseMaybeUnary(null,!1,!1,O),"**",!1);else return re};function I(i){return i.type==="Identifier"||i.type==="ParenthesizedExpression"&&I(i.expression)}function R(i){return i.type==="MemberExpression"&&i.property.type==="PrivateIdentifier"||i.type==="ChainExpression"&&R(i.expression)||i.type==="ParenthesizedExpression"&&R(i.expression)}v.parseExprSubscripts=function(i,l){var C=this.start,O=this.startLoc,z=this.parseExprAtom(i,l);if(z.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return z;var ie=this.parseSubscripts(z,C,O,!1,l);return i&&ie.type==="MemberExpression"&&(i.parenthesizedAssign>=ie.start&&(i.parenthesizedAssign=-1),i.parenthesizedBind>=ie.start&&(i.parenthesizedBind=-1),i.trailingComma>=ie.start&&(i.trailingComma=-1)),ie},v.parseSubscripts=function(i,l,C,O,z){for(var ie=this.options.ecmaVersion>=8&&i.type==="Identifier"&&i.name==="async"&&this.lastTokEnd===i.end&&!this.canInsertSemicolon()&&i.end-i.start===5&&this.potentialArrowAt===i.start,re=!1;;){var Se=this.parseSubscript(i,l,C,O,ie,re,z);if(Se.optional&&(re=!0),Se===i||Se.type==="ArrowFunctionExpression"){if(re){var Le=this.startNodeAt(l,C);Le.expression=Se,Se=this.finishNode(Le,"ChainExpression")}return Se}i=Se}},v.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(M.arrow)},v.parseSubscriptAsyncArrow=function(i,l,C,O){return this.parseArrowExpression(this.startNodeAt(i,l),C,!0,O)},v.parseSubscript=function(i,l,C,O,z,ie,re){var Se=this.options.ecmaVersion>=11,Le=Se&&this.eat(M.questionDot);O&&Le&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var et=this.eat(M.bracketL);if(et||Le&&this.type!==M.parenL&&this.type!==M.backQuote||this.eat(M.dot)){var ht=this.startNodeAt(l,C);ht.object=i,et?(ht.property=this.parseExpression(),this.expect(M.bracketR)):this.type===M.privateId&&i.type!=="Super"?ht.property=this.parsePrivateIdent():ht.property=this.parseIdent(this.options.allowReserved!=="never"),ht.computed=!!et,Se&&(ht.optional=Le),i=this.finishNode(ht,"MemberExpression")}else if(!O&&this.eat(M.parenL)){var bt=new h,Ut=this.yieldPos,vn=this.awaitPos,Ui=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var Mi=this.parseExprList(M.parenR,this.options.ecmaVersion>=8,!1,bt);if(z&&!Le&&this.shouldParseAsyncArrow())return this.checkPatternErrors(bt,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Ut,this.awaitPos=vn,this.awaitIdentPos=Ui,this.parseSubscriptAsyncArrow(l,C,Mi,re);this.checkExpressionErrors(bt,!0),this.yieldPos=Ut||this.yieldPos,this.awaitPos=vn||this.awaitPos,this.awaitIdentPos=Ui||this.awaitIdentPos;var Yi=this.startNodeAt(l,C);Yi.callee=i,Yi.arguments=Mi,Se&&(Yi.optional=Le),i=this.finishNode(Yi,"CallExpression")}else if(this.type===M.backQuote){(Le||ie)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var Xi=this.startNodeAt(l,C);Xi.tag=i,Xi.quasi=this.parseTemplate({isTagged:!0}),i=this.finishNode(Xi,"TaggedTemplateExpression")}return i},v.parseExprAtom=function(i,l,C){this.type===M.slash&&this.readRegexp();var O,z=this.potentialArrowAt===this.start;switch(this.type){case M._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),O=this.startNode(),this.next(),this.type===M.parenL&&!this.allowDirectSuper&&this.raise(O.start,"super() call outside constructor of a subclass"),this.type!==M.dot&&this.type!==M.bracketL&&this.type!==M.parenL&&this.unexpected(),this.finishNode(O,"Super");case M._this:return O=this.startNode(),this.next(),this.finishNode(O,"ThisExpression");case M.name:var ie=this.start,re=this.startLoc,Se=this.containsEsc,Le=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!Se&&Le.name==="async"&&!this.canInsertSemicolon()&&this.eat(M._function))return this.overrideContext(w.f_expr),this.parseFunction(this.startNodeAt(ie,re),0,!1,!0,l);if(z&&!this.canInsertSemicolon()){if(this.eat(M.arrow))return this.parseArrowExpression(this.startNodeAt(ie,re),[Le],!1,l);if(this.options.ecmaVersion>=8&&Le.name==="async"&&this.type===M.name&&!Se&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return Le=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(M.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(ie,re),[Le],!0,l)}return Le;case M.regexp:var et=this.value;return O=this.parseLiteral(et.value),O.regex={pattern:et.pattern,flags:et.flags},O;case M.num:case M.string:return this.parseLiteral(this.value);case M._null:case M._true:case M._false:return O=this.startNode(),O.value=this.type===M._null?null:this.type===M._true,O.raw=this.type.keyword,this.next(),this.finishNode(O,"Literal");case M.parenL:var ht=this.start,bt=this.parseParenAndDistinguishExpression(z,l);return i&&(i.parenthesizedAssign<0&&!this.isSimpleAssignTarget(bt)&&(i.parenthesizedAssign=ht),i.parenthesizedBind<0&&(i.parenthesizedBind=ht)),bt;case M.bracketL:return O=this.startNode(),this.next(),O.elements=this.parseExprList(M.bracketR,!0,!0,i),this.finishNode(O,"ArrayExpression");case M.braceL:return this.overrideContext(w.b_expr),this.parseObj(!1,i);case M._function:return O=this.startNode(),this.next(),this.parseFunction(O,0);case M._class:return this.parseClass(this.startNode(),!1);case M._new:return this.parseNew();case M.backQuote:return this.parseTemplate();case M._import:return this.options.ecmaVersion>=11?this.parseExprImport(C):this.unexpected();default:return this.parseExprAtomDefault()}},v.parseExprAtomDefault=function(){this.unexpected()},v.parseExprImport=function(i){var l=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===M.parenL&&!i)return this.parseDynamicImport(l);if(this.type===M.dot){var C=this.startNodeAt(l.start,l.loc&&l.loc.start);return C.name="import",l.meta=this.finishNode(C,"Identifier"),this.parseImportMeta(l)}else this.unexpected()},v.parseDynamicImport=function(i){if(this.next(),i.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(M.parenR)?i.options=null:(this.expect(M.comma),this.afterTrailingComma(M.parenR)?i.options=null:(i.options=this.parseMaybeAssign(),this.eat(M.parenR)||(this.expect(M.comma),this.afterTrailingComma(M.parenR)||this.unexpected())));else if(!this.eat(M.parenR)){var l=this.start;this.eat(M.comma)&&this.eat(M.parenR)?this.raiseRecoverable(l,"Trailing comma is not allowed in import()"):this.unexpected(l)}return this.finishNode(i,"ImportExpression")},v.parseImportMeta=function(i){this.next();var l=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="meta"&&this.raiseRecoverable(i.property.start,"The only valid meta property for import is 'import.meta'"),l&&this.raiseRecoverable(i.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(i.start,"Cannot use 'import.meta' outside a module"),this.finishNode(i,"MetaProperty")},v.parseLiteral=function(i){var l=this.startNode();return l.value=i,l.raw=this.input.slice(this.start,this.end),l.raw.charCodeAt(l.raw.length-1)===110&&(l.bigint=l.value!=null?l.value.toString():l.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(l,"Literal")},v.parseParenExpression=function(){this.expect(M.parenL);var i=this.parseExpression();return this.expect(M.parenR),i},v.shouldParseArrow=function(i){return!this.canInsertSemicolon()},v.parseParenAndDistinguishExpression=function(i,l){var C=this.start,O=this.startLoc,z,ie=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var re=this.start,Se=this.startLoc,Le=[],et=!0,ht=!1,bt=new h,Ut=this.yieldPos,vn=this.awaitPos,Ui;for(this.yieldPos=0,this.awaitPos=0;this.type!==M.parenR;)if(et?et=!1:this.expect(M.comma),ie&&this.afterTrailingComma(M.parenR,!0)){ht=!0;break}else if(this.type===M.ellipsis){Ui=this.start,Le.push(this.parseParenItem(this.parseRestBinding())),this.type===M.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else Le.push(this.parseMaybeAssign(!1,bt,this.parseParenItem));var Mi=this.lastTokEnd,Yi=this.lastTokEndLoc;if(this.expect(M.parenR),i&&this.shouldParseArrow(Le)&&this.eat(M.arrow))return this.checkPatternErrors(bt,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Ut,this.awaitPos=vn,this.parseParenArrowList(C,O,Le,l);(!Le.length||ht)&&this.unexpected(this.lastTokStart),Ui&&this.unexpected(Ui),this.checkExpressionErrors(bt,!0),this.yieldPos=Ut||this.yieldPos,this.awaitPos=vn||this.awaitPos,Le.length>1?(z=this.startNodeAt(re,Se),z.expressions=Le,this.finishNodeAt(z,"SequenceExpression",Mi,Yi)):z=Le[0]}else z=this.parseParenExpression();if(this.options.preserveParens){var Xi=this.startNodeAt(C,O);return Xi.expression=z,this.finishNode(Xi,"ParenthesizedExpression")}else return z},v.parseParenItem=function(i){return i},v.parseParenArrowList=function(i,l,C,O){return this.parseArrowExpression(this.startNodeAt(i,l),C,!1,O)};var N=[];v.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var i=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===M.dot){var l=this.startNodeAt(i.start,i.loc&&i.loc.start);l.name="new",i.meta=this.finishNode(l,"Identifier"),this.next();var C=this.containsEsc;return i.property=this.parseIdent(!0),i.property.name!=="target"&&this.raiseRecoverable(i.property.start,"The only valid meta property for new is 'new.target'"),C&&this.raiseRecoverable(i.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(i.start,"'new.target' can only be used in functions and class static block"),this.finishNode(i,"MetaProperty")}var O=this.start,z=this.startLoc;return i.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),O,z,!0,!1),this.eat(M.parenL)?i.arguments=this.parseExprList(M.parenR,this.options.ecmaVersion>=8,!1):i.arguments=N,this.finishNode(i,"NewExpression")},v.parseTemplateElement=function(i){var l=i.isTagged,C=this.startNode();return this.type===M.invalidTemplate?(l||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),C.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):C.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),C.tail=this.type===M.backQuote,this.finishNode(C,"TemplateElement")},v.parseTemplate=function(i){i===void 0&&(i={});var l=i.isTagged;l===void 0&&(l=!1);var C=this.startNode();this.next(),C.expressions=[];var O=this.parseTemplateElement({isTagged:l});for(C.quasis=[O];!O.tail;)this.type===M.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(M.dollarBraceL),C.expressions.push(this.parseExpression()),this.expect(M.braceR),C.quasis.push(O=this.parseTemplateElement({isTagged:l}));return this.next(),this.finishNode(C,"TemplateLiteral")},v.isAsyncProp=function(i){return!i.computed&&i.key.type==="Identifier"&&i.key.name==="async"&&(this.type===M.name||this.type===M.num||this.type===M.string||this.type===M.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===M.star)&&!Ge.test(this.input.slice(this.lastTokEnd,this.start))},v.parseObj=function(i,l){var C=this.startNode(),O=!0,z={};for(C.properties=[],this.next();!this.eat(M.braceR);){if(O)O=!1;else if(this.expect(M.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(M.braceR))break;var ie=this.parseProperty(i,l);i||this.checkPropClash(ie,z,l),C.properties.push(ie)}return this.finishNode(C,i?"ObjectPattern":"ObjectExpression")},v.parseProperty=function(i,l){var C=this.startNode(),O,z,ie,re;if(this.options.ecmaVersion>=9&&this.eat(M.ellipsis))return i?(C.argument=this.parseIdent(!1),this.type===M.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(C,"RestElement")):(C.argument=this.parseMaybeAssign(!1,l),this.type===M.comma&&l&&l.trailingComma<0&&(l.trailingComma=this.start),this.finishNode(C,"SpreadElement"));this.options.ecmaVersion>=6&&(C.method=!1,C.shorthand=!1,(i||l)&&(ie=this.start,re=this.startLoc),i||(O=this.eat(M.star)));var Se=this.containsEsc;return this.parsePropertyName(C),!i&&!Se&&this.options.ecmaVersion>=8&&!O&&this.isAsyncProp(C)?(z=!0,O=this.options.ecmaVersion>=9&&this.eat(M.star),this.parsePropertyName(C)):z=!1,this.parsePropertyValue(C,i,O,z,ie,re,l,Se),this.finishNode(C,"Property")},v.parseGetterSetter=function(i){var l=i.key.name;this.parsePropertyName(i),i.value=this.parseMethod(!1),i.kind=l;var C=i.kind==="get"?0:1;if(i.value.params.length!==C){var O=i.value.start;i.kind==="get"?this.raiseRecoverable(O,"getter should have no params"):this.raiseRecoverable(O,"setter should have exactly one param")}else i.kind==="set"&&i.value.params[0].type==="RestElement"&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")},v.parsePropertyValue=function(i,l,C,O,z,ie,re,Se){(C||O)&&this.type===M.colon&&this.unexpected(),this.eat(M.colon)?(i.value=l?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,re),i.kind="init"):this.options.ecmaVersion>=6&&this.type===M.parenL?(l&&this.unexpected(),i.method=!0,i.value=this.parseMethod(C,O),i.kind="init"):!l&&!Se&&this.options.ecmaVersion>=5&&!i.computed&&i.key.type==="Identifier"&&(i.key.name==="get"||i.key.name==="set")&&this.type!==M.comma&&this.type!==M.braceR&&this.type!==M.eq?((C||O)&&this.unexpected(),this.parseGetterSetter(i)):this.options.ecmaVersion>=6&&!i.computed&&i.key.type==="Identifier"?((C||O)&&this.unexpected(),this.checkUnreserved(i.key),i.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=z),l?i.value=this.parseMaybeDefault(z,ie,this.copyNode(i.key)):this.type===M.eq&&re?(re.shorthandAssign<0&&(re.shorthandAssign=this.start),i.value=this.parseMaybeDefault(z,ie,this.copyNode(i.key))):i.value=this.copyNode(i.key),i.kind="init",i.shorthand=!0):this.unexpected()},v.parsePropertyName=function(i){if(this.options.ecmaVersion>=6){if(this.eat(M.bracketL))return i.computed=!0,i.key=this.parseMaybeAssign(),this.expect(M.bracketR),i.key;i.computed=!1}return i.key=this.type===M.num||this.type===M.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},v.initFunction=function(i){i.id=null,this.options.ecmaVersion>=6&&(i.generator=i.expression=!1),this.options.ecmaVersion>=8&&(i.async=!1)},v.parseMethod=function(i,l,C){var O=this.startNode(),z=this.yieldPos,ie=this.awaitPos,re=this.awaitIdentPos;return this.initFunction(O),this.options.ecmaVersion>=6&&(O.generator=i),this.options.ecmaVersion>=8&&(O.async=!!l),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(ke(l,O.generator)|we|(C?ye:0)),this.expect(M.parenL),O.params=this.parseBindingList(M.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(O,!1,!0,!1),this.yieldPos=z,this.awaitPos=ie,this.awaitIdentPos=re,this.finishNode(O,"FunctionExpression")},v.parseArrowExpression=function(i,l,C,O){var z=this.yieldPos,ie=this.awaitPos,re=this.awaitIdentPos;return this.enterScope(ke(C,!1)|Y),this.initFunction(i),this.options.ecmaVersion>=8&&(i.async=!!C),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,i.params=this.toAssignableList(l,!0),this.parseFunctionBody(i,!0,!1,O),this.yieldPos=z,this.awaitPos=ie,this.awaitIdentPos=re,this.finishNode(i,"ArrowFunctionExpression")},v.parseFunctionBody=function(i,l,C,O){var z=l&&this.type!==M.braceL,ie=this.strict,re=!1;if(z)i.body=this.parseMaybeAssign(O),i.expression=!0,this.checkParams(i,!1);else{var Se=this.options.ecmaVersion>=7&&!this.isSimpleParamList(i.params);(!ie||Se)&&(re=this.strictDirective(this.end),re&&Se&&this.raiseRecoverable(i.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var Le=this.labels;this.labels=[],re&&(this.strict=!0),this.checkParams(i,!ie&&!re&&!l&&!C&&this.isSimpleParamList(i.params)),this.strict&&i.id&&this.checkLValSimple(i.id,e),i.body=this.parseBlock(!1,void 0,re&&!ie),i.expression=!1,this.adaptDirectivePrologue(i.body.body),this.labels=Le}this.exitScope()},v.isSimpleParamList=function(i){for(var l=0,C=i;l<C.length;l+=1){var O=C[l];if(O.type!=="Identifier")return!1}return!0},v.checkParams=function(i,l){for(var C=Object.create(null),O=0,z=i.params;O<z.length;O+=1){var ie=z[O];this.checkLValInnerPattern(ie,We,l?null:C)}},v.parseExprList=function(i,l,C,O){for(var z=[],ie=!0;!this.eat(i);){if(ie)ie=!1;else if(this.expect(M.comma),l&&this.afterTrailingComma(i))break;var re=void 0;C&&this.type===M.comma?re=null:this.type===M.ellipsis?(re=this.parseSpread(O),O&&this.type===M.comma&&O.trailingComma<0&&(O.trailingComma=this.start)):re=this.parseMaybeAssign(!1,O),z.push(re)}return z},v.checkUnreserved=function(i){var l=i.start,C=i.end,O=i.name;if(this.inGenerator&&O==="yield"&&this.raiseRecoverable(l,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&O==="await"&&this.raiseRecoverable(l,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Oe)&&O==="arguments"&&this.raiseRecoverable(l,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(O==="arguments"||O==="await")&&this.raise(l,"Cannot use "+O+" in class static initialization block"),this.keywords.test(O)&&this.raise(l,"Unexpected keyword '"+O+"'"),!(this.options.ecmaVersion<6&&this.input.slice(l,C).indexOf("\\")!==-1)){var z=this.strict?this.reservedWordsStrict:this.reservedWords;z.test(O)&&(!this.inAsync&&O==="await"&&this.raiseRecoverable(l,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(l,"The keyword '"+O+"' is reserved"))}},v.parseIdent=function(i){var l=this.parseIdentNode();return this.next(!!i),this.finishNode(l,"Identifier"),i||(this.checkUnreserved(l),l.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=l.start)),l},v.parseIdentNode=function(){var i=this.startNode();return this.type===M.name?i.name=this.value:this.type.keyword?(i.name=this.type.keyword,(i.name==="class"||i.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=M.name):this.unexpected(),i},v.parsePrivateIdent=function(){var i=this.startNode();return this.type===M.privateId?i.name=this.value:this.unexpected(),this.next(),this.finishNode(i,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(i.start,"Private field '#"+i.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(i)),i},v.parseYield=function(i){this.yieldPos||(this.yieldPos=this.start);var l=this.startNode();return this.next(),this.type===M.semi||this.canInsertSemicolon()||this.type!==M.star&&!this.type.startsExpr?(l.delegate=!1,l.argument=null):(l.delegate=this.eat(M.star),l.argument=this.parseMaybeAssign(i)),this.finishNode(l,"YieldExpression")},v.parseAwait=function(i){this.awaitPos||(this.awaitPos=this.start);var l=this.startNode();return this.next(),l.argument=this.parseMaybeUnary(null,!0,!1,i),this.finishNode(l,"AwaitExpression")};var E=t.prototype;E.raise=function(i,l){var C=gn(this.input,i);l+=" ("+C.line+":"+C.column+")",this.sourceFile&&(l+=" in "+this.sourceFile);var O=new SyntaxError(l);throw O.pos=i,O.loc=C,O.raisedAt=this.pos,O},E.raiseRecoverable=E.raise,E.curPosition=function(){if(this.options.locations)return new zt(this.curLine,this.pos-this.lineStart)};var V=t.prototype,H=function(l){this.flags=l,this.var=[],this.lexical=[],this.functions=[]};V.enterScope=function(i){this.scopeStack.push(new H(i))},V.exitScope=function(){this.scopeStack.pop()},V.treatFunctionsAsVarInScope=function(i){return i.flags&pt||!this.inModule&&i.flags&mt},V.declareName=function(i,l,C){var O=!1;if(l===xe){var z=this.currentScope();O=z.lexical.indexOf(i)>-1||z.functions.indexOf(i)>-1||z.var.indexOf(i)>-1,z.lexical.push(i),this.inModule&&z.flags&mt&&delete this.undefinedExports[i]}else if(l===Ae){var ie=this.currentScope();ie.lexical.push(i)}else if(l===je){var re=this.currentScope();this.treatFunctionsAsVar?O=re.lexical.indexOf(i)>-1:O=re.lexical.indexOf(i)>-1||re.var.indexOf(i)>-1,re.functions.push(i)}else for(var Se=this.scopeStack.length-1;Se>=0;--Se){var Le=this.scopeStack[Se];if(Le.lexical.indexOf(i)>-1&&!(Le.flags&le&&Le.lexical[0]===i)||!this.treatFunctionsAsVarInScope(Le)&&Le.functions.indexOf(i)>-1){O=!0;break}if(Le.var.push(i),this.inModule&&Le.flags&mt&&delete this.undefinedExports[i],Le.flags&Oe)break}O&&this.raiseRecoverable(C,"Identifier '"+i+"' has already been declared")},V.checkLocalExport=function(i){this.scopeStack[0].lexical.indexOf(i.name)===-1&&this.scopeStack[0].var.indexOf(i.name)===-1&&(this.undefinedExports[i.name]=i)},V.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},V.currentVarScope=function(){for(var i=this.scopeStack.length-1;;i--){var l=this.scopeStack[i];if(l.flags&(Oe|Ne|ve))return l}},V.currentThisScope=function(){for(var i=this.scopeStack.length-1;;i--){var l=this.scopeStack[i];if(l.flags&(Oe|Ne|ve)&&!(l.flags&Y))return l}};var q=function(l,C,O){this.type="",this.start=C,this.end=0,l.options.locations&&(this.loc=new oi(l,O)),l.options.directSourceFile&&(this.sourceFile=l.options.directSourceFile),l.options.ranges&&(this.range=[C,0])},K=t.prototype;K.startNode=function(){return new q(this,this.start,this.startLoc)},K.startNodeAt=function(i,l){return new q(this,i,l)};function B(i,l,C,O){return i.type=l,i.end=C,this.options.locations&&(i.loc.end=O),this.options.ranges&&(i.range[1]=C),i}K.finishNode=function(i,l){return B.call(this,i,l,this.lastTokEnd,this.lastTokEndLoc)},K.finishNodeAt=function(i,l,C,O){return B.call(this,i,l,C,O)},K.copyNode=function(i){var l=new q(this,i.start,this.startLoc);for(var C in i)l[C]=i[C];return l};var W="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",$="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",X=$+" Extended_Pictographic",ee=X,ne=ee+" EBase EComp EMod EPres ExtPict",_e=ne,Pe=_e,Te={9:$,10:X,11:ee,12:ne,13:_e,14:Pe},De="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",ue={9:"",10:"",11:"",12:"",13:"",14:De},he="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Me="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Ue=Me+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Be=Ue+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Ze=Be+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",Ke=Ze+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",tt=Ke+" "+W,at={9:Me,10:Ue,11:Be,12:Ze,13:Ke,14:tt},Xe={};function Lt(i){var l=Xe[i]={binary:Ee(Te[i]+" "+he),binaryOfStrings:Ee(ue[i]),nonBinary:{General_Category:Ee(he),Script:Ee(at[i])}};l.nonBinary.Script_Extensions=l.nonBinary.Script,l.nonBinary.gc=l.nonBinary.General_Category,l.nonBinary.sc=l.nonBinary.Script,l.nonBinary.scx=l.nonBinary.Script_Extensions}for(var Et=0,Vt=[9,10,11,12,13,14];Et<Vt.length;Et+=1){var Tt=Vt[Et];Lt(Tt)}var Ie=t.prototype,It=function(l,C){this.parent=l,this.base=C||this};It.prototype.separatedFrom=function(l){for(var C=this;C;C=C.parent)for(var O=l;O;O=O.parent)if(C.base===O.base&&C!==O)return!0;return!1},It.prototype.sibling=function(){return new It(this.parent,this.base)};var At=function(l){this.parser=l,this.validFlags="gim"+(l.options.ecmaVersion>=6?"uy":"")+(l.options.ecmaVersion>=9?"s":"")+(l.options.ecmaVersion>=13?"d":"")+(l.options.ecmaVersion>=15?"v":""),this.unicodeProperties=Xe[l.options.ecmaVersion>=14?14:l.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};At.prototype.reset=function(l,C,O){var z=O.indexOf("v")!==-1,ie=O.indexOf("u")!==-1;this.start=l|0,this.source=C+"",this.flags=O,z&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=ie&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=ie&&this.parser.options.ecmaVersion>=9)},At.prototype.raise=function(l){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+l)},At.prototype.at=function(l,C){C===void 0&&(C=!1);var O=this.source,z=O.length;if(l>=z)return-1;var ie=O.charCodeAt(l);if(!(C||this.switchU)||ie<=55295||ie>=57344||l+1>=z)return ie;var re=O.charCodeAt(l+1);return re>=56320&&re<=57343?(ie<<10)+re-56613888:ie},At.prototype.nextIndex=function(l,C){C===void 0&&(C=!1);var O=this.source,z=O.length;if(l>=z)return z;var ie=O.charCodeAt(l),re;return!(C||this.switchU)||ie<=55295||ie>=57344||l+1>=z||(re=O.charCodeAt(l+1))<56320||re>57343?l+1:l+2},At.prototype.current=function(l){return l===void 0&&(l=!1),this.at(this.pos,l)},At.prototype.lookahead=function(l){return l===void 0&&(l=!1),this.at(this.nextIndex(this.pos,l),l)},At.prototype.advance=function(l){l===void 0&&(l=!1),this.pos=this.nextIndex(this.pos,l)},At.prototype.eat=function(l,C){return C===void 0&&(C=!1),this.current(C)===l?(this.advance(C),!0):!1},At.prototype.eatChars=function(l,C){C===void 0&&(C=!1);for(var O=this.pos,z=0,ie=l;z<ie.length;z+=1){var re=ie[z],Se=this.at(O,C);if(Se===-1||Se!==re)return!1;O=this.nextIndex(O,C)}return this.pos=O,!0},Ie.validateRegExpFlags=function(i){for(var l=i.validFlags,C=i.flags,O=!1,z=!1,ie=0;ie<C.length;ie++){var re=C.charAt(ie);l.indexOf(re)===-1&&this.raise(i.start,"Invalid regular expression flag"),C.indexOf(re,ie+1)>-1&&this.raise(i.start,"Duplicate regular expression flag"),re==="u"&&(O=!0),re==="v"&&(z=!0)}this.options.ecmaVersion>=15&&O&&z&&this.raise(i.start,"Invalid regular expression flag")};function Rt(i){for(var l in i)return!0;return!1}Ie.validateRegExpPattern=function(i){this.regexp_pattern(i),!i.switchN&&this.options.ecmaVersion>=9&&Rt(i.groupNames)&&(i.switchN=!0,this.regexp_pattern(i))},Ie.regexp_pattern=function(i){i.pos=0,i.lastIntValue=0,i.lastStringValue="",i.lastAssertionIsQuantifiable=!1,i.numCapturingParens=0,i.maxBackReference=0,i.groupNames=Object.create(null),i.backReferenceNames.length=0,i.branchID=null,this.regexp_disjunction(i),i.pos!==i.source.length&&(i.eat(41)&&i.raise("Unmatched ')'"),(i.eat(93)||i.eat(125))&&i.raise("Lone quantifier brackets")),i.maxBackReference>i.numCapturingParens&&i.raise("Invalid escape");for(var l=0,C=i.backReferenceNames;l<C.length;l+=1){var O=C[l];i.groupNames[O]||i.raise("Invalid named capture referenced")}},Ie.regexp_disjunction=function(i){var l=this.options.ecmaVersion>=16;for(l&&(i.branchID=new It(i.branchID,null)),this.regexp_alternative(i);i.eat(124);)l&&(i.branchID=i.branchID.sibling()),this.regexp_alternative(i);l&&(i.branchID=i.branchID.parent),this.regexp_eatQuantifier(i,!0)&&i.raise("Nothing to repeat"),i.eat(123)&&i.raise("Lone quantifier brackets")},Ie.regexp_alternative=function(i){for(;i.pos<i.source.length&&this.regexp_eatTerm(i););},Ie.regexp_eatTerm=function(i){return this.regexp_eatAssertion(i)?(i.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(i)&&i.switchU&&i.raise("Invalid quantifier"),!0):(i.switchU?this.regexp_eatAtom(i):this.regexp_eatExtendedAtom(i))?(this.regexp_eatQuantifier(i),!0):!1},Ie.regexp_eatAssertion=function(i){var l=i.pos;if(i.lastAssertionIsQuantifiable=!1,i.eat(94)||i.eat(36))return!0;if(i.eat(92)){if(i.eat(66)||i.eat(98))return!0;i.pos=l}if(i.eat(40)&&i.eat(63)){var C=!1;if(this.options.ecmaVersion>=9&&(C=i.eat(60)),i.eat(61)||i.eat(33))return this.regexp_disjunction(i),i.eat(41)||i.raise("Unterminated group"),i.lastAssertionIsQuantifiable=!C,!0}return i.pos=l,!1},Ie.regexp_eatQuantifier=function(i,l){return l===void 0&&(l=!1),this.regexp_eatQuantifierPrefix(i,l)?(i.eat(63),!0):!1},Ie.regexp_eatQuantifierPrefix=function(i,l){return i.eat(42)||i.eat(43)||i.eat(63)||this.regexp_eatBracedQuantifier(i,l)},Ie.regexp_eatBracedQuantifier=function(i,l){var C=i.pos;if(i.eat(123)){var O=0,z=-1;if(this.regexp_eatDecimalDigits(i)&&(O=i.lastIntValue,i.eat(44)&&this.regexp_eatDecimalDigits(i)&&(z=i.lastIntValue),i.eat(125)))return z!==-1&&z<O&&!l&&i.raise("numbers out of order in {} quantifier"),!0;i.switchU&&!l&&i.raise("Incomplete quantifier"),i.pos=C}return!1},Ie.regexp_eatAtom=function(i){return this.regexp_eatPatternCharacters(i)||i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)},Ie.regexp_eatReverseSolidusAtomEscape=function(i){var l=i.pos;if(i.eat(92)){if(this.regexp_eatAtomEscape(i))return!0;i.pos=l}return!1},Ie.regexp_eatUncapturingGroup=function(i){var l=i.pos;if(i.eat(40)){if(i.eat(63)){if(this.options.ecmaVersion>=16){var C=this.regexp_eatModifiers(i),O=i.eat(45);if(C||O){for(var z=0;z<C.length;z++){var ie=C.charAt(z);C.indexOf(ie,z+1)>-1&&i.raise("Duplicate regular expression modifiers")}if(O){var re=this.regexp_eatModifiers(i);!C&&!re&&i.current()===58&&i.raise("Invalid regular expression modifiers");for(var Se=0;Se<re.length;Se++){var Le=re.charAt(Se);(re.indexOf(Le,Se+1)>-1||C.indexOf(Le)>-1)&&i.raise("Duplicate regular expression modifiers")}}}}if(i.eat(58)){if(this.regexp_disjunction(i),i.eat(41))return!0;i.raise("Unterminated group")}}i.pos=l}return!1},Ie.regexp_eatCapturingGroup=function(i){if(i.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(i):i.current()===63&&i.raise("Invalid group"),this.regexp_disjunction(i),i.eat(41))return i.numCapturingParens+=1,!0;i.raise("Unterminated group")}return!1},Ie.regexp_eatModifiers=function(i){for(var l="",C=0;(C=i.current())!==-1&&si(C);)l+=ot(C),i.advance();return l};function si(i){return i===105||i===109||i===115}Ie.regexp_eatExtendedAtom=function(i){return i.eat(46)||this.regexp_eatReverseSolidusAtomEscape(i)||this.regexp_eatCharacterClass(i)||this.regexp_eatUncapturingGroup(i)||this.regexp_eatCapturingGroup(i)||this.regexp_eatInvalidBracedQuantifier(i)||this.regexp_eatExtendedPatternCharacter(i)},Ie.regexp_eatInvalidBracedQuantifier=function(i){return this.regexp_eatBracedQuantifier(i,!0)&&i.raise("Nothing to repeat"),!1},Ie.regexp_eatSyntaxCharacter=function(i){var l=i.current();return Si(l)?(i.lastIntValue=l,i.advance(),!0):!1};function Si(i){return i===36||i>=40&&i<=43||i===46||i===63||i>=91&&i<=94||i>=123&&i<=125}Ie.regexp_eatPatternCharacters=function(i){for(var l=i.pos,C=0;(C=i.current())!==-1&&!Si(C);)i.advance();return i.pos!==l},Ie.regexp_eatExtendedPatternCharacter=function(i){var l=i.current();return l!==-1&&l!==36&&!(l>=40&&l<=43)&&l!==46&&l!==63&&l!==91&&l!==94&&l!==124?(i.advance(),!0):!1},Ie.regexp_groupSpecifier=function(i){if(i.eat(63)){this.regexp_eatGroupName(i)||i.raise("Invalid group");var l=this.options.ecmaVersion>=16,C=i.groupNames[i.lastStringValue];if(C)if(l)for(var O=0,z=C;O<z.length;O+=1){var ie=z[O];ie.separatedFrom(i.branchID)||i.raise("Duplicate capture group name")}else i.raise("Duplicate capture group name");l?(C||(i.groupNames[i.lastStringValue]=[])).push(i.branchID):i.groupNames[i.lastStringValue]=!0}},Ie.regexp_eatGroupName=function(i){if(i.lastStringValue="",i.eat(60)){if(this.regexp_eatRegExpIdentifierName(i)&&i.eat(62))return!0;i.raise("Invalid capture group name")}return!1},Ie.regexp_eatRegExpIdentifierName=function(i){if(i.lastStringValue="",this.regexp_eatRegExpIdentifierStart(i)){for(i.lastStringValue+=ot(i.lastIntValue);this.regexp_eatRegExpIdentifierPart(i);)i.lastStringValue+=ot(i.lastIntValue);return!0}return!1},Ie.regexp_eatRegExpIdentifierStart=function(i){var l=i.pos,C=this.options.ecmaVersion>=11,O=i.current(C);return i.advance(C),O===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,C)&&(O=i.lastIntValue),li(O)?(i.lastIntValue=O,!0):(i.pos=l,!1)};function li(i){return ze(i,!0)||i===36||i===95}Ie.regexp_eatRegExpIdentifierPart=function(i){var l=i.pos,C=this.options.ecmaVersion>=11,O=i.current(C);return i.advance(C),O===92&&this.regexp_eatRegExpUnicodeEscapeSequence(i,C)&&(O=i.lastIntValue),hi(O)?(i.lastIntValue=O,!0):(i.pos=l,!1)};function hi(i){return de(i,!0)||i===36||i===95||i===8204||i===8205}Ie.regexp_eatAtomEscape=function(i){return this.regexp_eatBackReference(i)||this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)||i.switchN&&this.regexp_eatKGroupName(i)?!0:(i.switchU&&(i.current()===99&&i.raise("Invalid unicode escape"),i.raise("Invalid escape")),!1)},Ie.regexp_eatBackReference=function(i){var l=i.pos;if(this.regexp_eatDecimalEscape(i)){var C=i.lastIntValue;if(i.switchU)return C>i.maxBackReference&&(i.maxBackReference=C),!0;if(C<=i.numCapturingParens)return!0;i.pos=l}return!1},Ie.regexp_eatKGroupName=function(i){if(i.eat(107)){if(this.regexp_eatGroupName(i))return i.backReferenceNames.push(i.lastStringValue),!0;i.raise("Invalid named reference")}return!1},Ie.regexp_eatCharacterEscape=function(i){return this.regexp_eatControlEscape(i)||this.regexp_eatCControlLetter(i)||this.regexp_eatZero(i)||this.regexp_eatHexEscapeSequence(i)||this.regexp_eatRegExpUnicodeEscapeSequence(i,!1)||!i.switchU&&this.regexp_eatLegacyOctalEscapeSequence(i)||this.regexp_eatIdentityEscape(i)},Ie.regexp_eatCControlLetter=function(i){var l=i.pos;if(i.eat(99)){if(this.regexp_eatControlLetter(i))return!0;i.pos=l}return!1},Ie.regexp_eatZero=function(i){return i.current()===48&&!Ji(i.lookahead())?(i.lastIntValue=0,i.advance(),!0):!1},Ie.regexp_eatControlEscape=function(i){var l=i.current();return l===116?(i.lastIntValue=9,i.advance(),!0):l===110?(i.lastIntValue=10,i.advance(),!0):l===118?(i.lastIntValue=11,i.advance(),!0):l===102?(i.lastIntValue=12,i.advance(),!0):l===114?(i.lastIntValue=13,i.advance(),!0):!1},Ie.regexp_eatControlLetter=function(i){var l=i.current();return Wt(l)?(i.lastIntValue=l%32,i.advance(),!0):!1};function Wt(i){return i>=65&&i<=90||i>=97&&i<=122}Ie.regexp_eatRegExpUnicodeEscapeSequence=function(i,l){l===void 0&&(l=!1);var C=i.pos,O=l||i.switchU;if(i.eat(117)){if(this.regexp_eatFixedHexDigits(i,4)){var z=i.lastIntValue;if(O&&z>=55296&&z<=56319){var ie=i.pos;if(i.eat(92)&&i.eat(117)&&this.regexp_eatFixedHexDigits(i,4)){var re=i.lastIntValue;if(re>=56320&&re<=57343)return i.lastIntValue=(z-55296)*1024+(re-56320)+65536,!0}i.pos=ie,i.lastIntValue=z}return!0}if(O&&i.eat(123)&&this.regexp_eatHexDigits(i)&&i.eat(125)&&ti(i.lastIntValue))return!0;O&&i.raise("Invalid unicode escape"),i.pos=C}return!1};function ti(i){return i>=0&&i<=1114111}Ie.regexp_eatIdentityEscape=function(i){if(i.switchU)return this.regexp_eatSyntaxCharacter(i)?!0:i.eat(47)?(i.lastIntValue=47,!0):!1;var l=i.current();return l!==99&&(!i.switchN||l!==107)?(i.lastIntValue=l,i.advance(),!0):!1},Ie.regexp_eatDecimalEscape=function(i){i.lastIntValue=0;var l=i.current();if(l>=49&&l<=57){do i.lastIntValue=10*i.lastIntValue+(l-48),i.advance();while((l=i.current())>=48&&l<=57);return!0}return!1};var Pi=0,Nt=1,jt=2;Ie.regexp_eatCharacterClassEscape=function(i){var l=i.current();if(mr(l))return i.lastIntValue=-1,i.advance(),Nt;var C=!1;if(i.switchU&&this.options.ecmaVersion>=9&&((C=l===80)||l===112)){i.lastIntValue=-1,i.advance();var O;if(i.eat(123)&&(O=this.regexp_eatUnicodePropertyValueExpression(i))&&i.eat(125))return C&&O===jt&&i.raise("Invalid property name"),O;i.raise("Invalid property name")}return Pi};function mr(i){return i===100||i===68||i===115||i===83||i===119||i===87}Ie.regexp_eatUnicodePropertyValueExpression=function(i){var l=i.pos;if(this.regexp_eatUnicodePropertyName(i)&&i.eat(61)){var C=i.lastStringValue;if(this.regexp_eatUnicodePropertyValue(i)){var O=i.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(i,C,O),Nt}}if(i.pos=l,this.regexp_eatLoneUnicodePropertyNameOrValue(i)){var z=i.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(i,z)}return Pi},Ie.regexp_validateUnicodePropertyNameAndValue=function(i,l,C){ge(i.unicodeProperties.nonBinary,l)||i.raise("Invalid property name"),i.unicodeProperties.nonBinary[l].test(C)||i.raise("Invalid property value")},Ie.regexp_validateUnicodePropertyNameOrValue=function(i,l){if(i.unicodeProperties.binary.test(l))return Nt;if(i.switchV&&i.unicodeProperties.binaryOfStrings.test(l))return jt;i.raise("Invalid property name")},Ie.regexp_eatUnicodePropertyName=function(i){var l=0;for(i.lastStringValue="";Hn(l=i.current());)i.lastStringValue+=ot(l),i.advance();return i.lastStringValue!==""};function Hn(i){return Wt(i)||i===95}Ie.regexp_eatUnicodePropertyValue=function(i){var l=0;for(i.lastStringValue="";vr(l=i.current());)i.lastStringValue+=ot(l),i.advance();return i.lastStringValue!==""};function vr(i){return Hn(i)||Ji(i)}Ie.regexp_eatLoneUnicodePropertyNameOrValue=function(i){return this.regexp_eatUnicodePropertyValue(i)},Ie.regexp_eatCharacterClass=function(i){if(i.eat(91)){var l=i.eat(94),C=this.regexp_classContents(i);return i.eat(93)||i.raise("Unterminated character class"),l&&C===jt&&i.raise("Negated character class may contain strings"),!0}return!1},Ie.regexp_classContents=function(i){return i.current()===93?Nt:i.switchV?this.regexp_classSetExpression(i):(this.regexp_nonEmptyClassRanges(i),Nt)},Ie.regexp_nonEmptyClassRanges=function(i){for(;this.regexp_eatClassAtom(i);){var l=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassAtom(i)){var C=i.lastIntValue;i.switchU&&(l===-1||C===-1)&&i.raise("Invalid character class"),l!==-1&&C!==-1&&l>C&&i.raise("Range out of order in character class")}}},Ie.regexp_eatClassAtom=function(i){var l=i.pos;if(i.eat(92)){if(this.regexp_eatClassEscape(i))return!0;if(i.switchU){var C=i.current();(C===99||Bi(C))&&i.raise("Invalid class escape"),i.raise("Invalid escape")}i.pos=l}var O=i.current();return O!==93?(i.lastIntValue=O,i.advance(),!0):!1},Ie.regexp_eatClassEscape=function(i){var l=i.pos;if(i.eat(98))return i.lastIntValue=8,!0;if(i.switchU&&i.eat(45))return i.lastIntValue=45,!0;if(!i.switchU&&i.eat(99)){if(this.regexp_eatClassControlLetter(i))return!0;i.pos=l}return this.regexp_eatCharacterClassEscape(i)||this.regexp_eatCharacterEscape(i)},Ie.regexp_classSetExpression=function(i){var l=Nt,C;if(!this.regexp_eatClassSetRange(i))if(C=this.regexp_eatClassSetOperand(i)){C===jt&&(l=jt);for(var O=i.pos;i.eatChars([38,38]);){if(i.current()!==38&&(C=this.regexp_eatClassSetOperand(i))){C!==jt&&(l=Nt);continue}i.raise("Invalid character in character class")}if(O!==i.pos)return l;for(;i.eatChars([45,45]);)this.regexp_eatClassSetOperand(i)||i.raise("Invalid character in character class");if(O!==i.pos)return l}else i.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(i)){if(C=this.regexp_eatClassSetOperand(i),!C)return l;C===jt&&(l=jt)}},Ie.regexp_eatClassSetRange=function(i){var l=i.pos;if(this.regexp_eatClassSetCharacter(i)){var C=i.lastIntValue;if(i.eat(45)&&this.regexp_eatClassSetCharacter(i)){var O=i.lastIntValue;return C!==-1&&O!==-1&&C>O&&i.raise("Range out of order in character class"),!0}i.pos=l}return!1},Ie.regexp_eatClassSetOperand=function(i){return this.regexp_eatClassSetCharacter(i)?Nt:this.regexp_eatClassStringDisjunction(i)||this.regexp_eatNestedClass(i)},Ie.regexp_eatNestedClass=function(i){var l=i.pos;if(i.eat(91)){var C=i.eat(94),O=this.regexp_classContents(i);if(i.eat(93))return C&&O===jt&&i.raise("Negated character class may contain strings"),O;i.pos=l}if(i.eat(92)){var z=this.regexp_eatCharacterClassEscape(i);if(z)return z;i.pos=l}return null},Ie.regexp_eatClassStringDisjunction=function(i){var l=i.pos;if(i.eatChars([92,113])){if(i.eat(123)){var C=this.regexp_classStringDisjunctionContents(i);if(i.eat(125))return C}else i.raise("Invalid escape");i.pos=l}return null},Ie.regexp_classStringDisjunctionContents=function(i){for(var l=this.regexp_classString(i);i.eat(124);)this.regexp_classString(i)===jt&&(l=jt);return l},Ie.regexp_classString=function(i){for(var l=0;this.regexp_eatClassSetCharacter(i);)l++;return l===1?Nt:jt},Ie.regexp_eatClassSetCharacter=function(i){var l=i.pos;if(i.eat(92))return this.regexp_eatCharacterEscape(i)||this.regexp_eatClassSetReservedPunctuator(i)?!0:i.eat(98)?(i.lastIntValue=8,!0):(i.pos=l,!1);var C=i.current();return C<0||C===i.lookahead()&&yr(C)||xr(C)?!1:(i.advance(),i.lastIntValue=C,!0)};function yr(i){return i===33||i>=35&&i<=38||i>=42&&i<=44||i===46||i>=58&&i<=64||i===94||i===96||i===126}function xr(i){return i===40||i===41||i===45||i===47||i>=91&&i<=93||i>=123&&i<=125}Ie.regexp_eatClassSetReservedPunctuator=function(i){var l=i.current();return An(l)?(i.lastIntValue=l,i.advance(),!0):!1};function An(i){return i===33||i===35||i===37||i===38||i===44||i===45||i>=58&&i<=62||i===64||i===96||i===126}Ie.regexp_eatClassControlLetter=function(i){var l=i.current();return Ji(l)||l===95?(i.lastIntValue=l%32,i.advance(),!0):!1},Ie.regexp_eatHexEscapeSequence=function(i){var l=i.pos;if(i.eat(120)){if(this.regexp_eatFixedHexDigits(i,2))return!0;i.switchU&&i.raise("Invalid escape"),i.pos=l}return!1},Ie.regexp_eatDecimalDigits=function(i){var l=i.pos,C=0;for(i.lastIntValue=0;Ji(C=i.current());)i.lastIntValue=10*i.lastIntValue+(C-48),i.advance();return i.pos!==l};function Ji(i){return i>=48&&i<=57}Ie.regexp_eatHexDigits=function(i){var l=i.pos,C=0;for(i.lastIntValue=0;_n(C=i.current());)i.lastIntValue=16*i.lastIntValue+mn(C),i.advance();return i.pos!==l};function _n(i){return i>=48&&i<=57||i>=65&&i<=70||i>=97&&i<=102}function mn(i){return i>=65&&i<=70?10+(i-65):i>=97&&i<=102?10+(i-97):i-48}Ie.regexp_eatLegacyOctalEscapeSequence=function(i){if(this.regexp_eatOctalDigit(i)){var l=i.lastIntValue;if(this.regexp_eatOctalDigit(i)){var C=i.lastIntValue;l<=3&&this.regexp_eatOctalDigit(i)?i.lastIntValue=l*64+C*8+i.lastIntValue:i.lastIntValue=l*8+C}else i.lastIntValue=l;return!0}return!1},Ie.regexp_eatOctalDigit=function(i){var l=i.current();return Bi(l)?(i.lastIntValue=l-48,i.advance(),!0):(i.lastIntValue=0,!1)};function Bi(i){return i>=48&&i<=55}Ie.regexp_eatFixedHexDigits=function(i,l){var C=i.pos;i.lastIntValue=0;for(var O=0;O<l;++O){var z=i.current();if(!_n(z))return i.pos=C,!1;i.lastIntValue=16*i.lastIntValue+mn(z),i.advance()}return!0};var mi=function(l){this.type=l.type,this.value=l.value,this.start=l.start,this.end=l.end,l.options.locations&&(this.loc=new oi(l,l.startLoc,l.endLoc)),l.options.ranges&&(this.range=[l.start,l.end])},nt=t.prototype;nt.next=function(i){!i&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new mi(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},nt.getToken=function(){return this.next(),new mi(this)},typeof Symbol<"u"&&(nt[Symbol.iterator]=function(){var i=this;return{next:function(){var l=i.getToken();return{done:l.type===M.eof,value:l}}}}),nt.nextToken=function(){var i=this.curContext();if((!i||!i.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(M.eof);if(i.override)return i.override(this);this.readToken(this.fullCharCodeAtPos())},nt.readToken=function(i){return ze(i,this.options.ecmaVersion>=6)||i===92?this.readWord():this.getTokenFromCode(i)},nt.fullCharCodeAtPos=function(){var i=this.input.charCodeAt(this.pos);if(i<=55295||i>=56320)return i;var l=this.input.charCodeAt(this.pos+1);return l<=56319||l>=57344?i:(i<<10)+l-56613888},nt.skipBlockComment=function(){var i=this.options.onComment&&this.curPosition(),l=this.pos,C=this.input.indexOf("*/",this.pos+=2);if(C===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=C+2,this.options.locations)for(var O=void 0,z=l;(O=lt(this.input,z,this.pos))>-1;)++this.curLine,z=this.lineStart=O;this.options.onComment&&this.options.onComment(!0,this.input.slice(l+2,C),l,this.pos,i,this.curPosition())},nt.skipLineComment=function(i){for(var l=this.pos,C=this.options.onComment&&this.curPosition(),O=this.input.charCodeAt(this.pos+=i);this.pos<this.input.length&&!He(O);)O=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(l+i,this.pos),l,this.pos,C,this.curPosition())},nt.skipSpace=function(){e:for(;this.pos<this.input.length;){var i=this.input.charCodeAt(this.pos);switch(i){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(i>8&&i<14||i>=5760&&yt.test(String.fromCharCode(i)))++this.pos;else break e}}},nt.finishToken=function(i,l){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var C=this.type;this.type=i,this.value=l,this.updateContext(C)},nt.readToken_dot=function(){var i=this.input.charCodeAt(this.pos+1);if(i>=48&&i<=57)return this.readNumber(!0);var l=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&i===46&&l===46?(this.pos+=3,this.finishToken(M.ellipsis)):(++this.pos,this.finishToken(M.dot))},nt.readToken_slash=function(){var i=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):i===61?this.finishOp(M.assign,2):this.finishOp(M.slash,1)},nt.readToken_mult_modulo_exp=function(i){var l=this.input.charCodeAt(this.pos+1),C=1,O=i===42?M.star:M.modulo;return this.options.ecmaVersion>=7&&i===42&&l===42&&(++C,O=M.starstar,l=this.input.charCodeAt(this.pos+2)),l===61?this.finishOp(M.assign,C+1):this.finishOp(O,C)},nt.readToken_pipe_amp=function(i){var l=this.input.charCodeAt(this.pos+1);if(l===i){if(this.options.ecmaVersion>=12){var C=this.input.charCodeAt(this.pos+2);if(C===61)return this.finishOp(M.assign,3)}return this.finishOp(i===124?M.logicalOR:M.logicalAND,2)}return l===61?this.finishOp(M.assign,2):this.finishOp(i===124?M.bitwiseOR:M.bitwiseAND,1)},nt.readToken_caret=function(){var i=this.input.charCodeAt(this.pos+1);return i===61?this.finishOp(M.assign,2):this.finishOp(M.bitwiseXOR,1)},nt.readToken_plus_min=function(i){var l=this.input.charCodeAt(this.pos+1);return l===i?l===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Ge.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(M.incDec,2):l===61?this.finishOp(M.assign,2):this.finishOp(M.plusMin,1)},nt.readToken_lt_gt=function(i){var l=this.input.charCodeAt(this.pos+1),C=1;return l===i?(C=i===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+C)===61?this.finishOp(M.assign,C+1):this.finishOp(M.bitShift,C)):l===33&&i===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(l===61&&(C=2),this.finishOp(M.relational,C))},nt.readToken_eq_excl=function(i){var l=this.input.charCodeAt(this.pos+1);return l===61?this.finishOp(M.equality,this.input.charCodeAt(this.pos+2)===61?3:2):i===61&&l===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(M.arrow)):this.finishOp(i===61?M.eq:M.prefix,1)},nt.readToken_question=function(){var i=this.options.ecmaVersion;if(i>=11){var l=this.input.charCodeAt(this.pos+1);if(l===46){var C=this.input.charCodeAt(this.pos+2);if(C<48||C>57)return this.finishOp(M.questionDot,2)}if(l===63){if(i>=12){var O=this.input.charCodeAt(this.pos+2);if(O===61)return this.finishOp(M.assign,3)}return this.finishOp(M.coalesce,2)}}return this.finishOp(M.question,1)},nt.readToken_numberSign=function(){var i=this.options.ecmaVersion,l=35;if(i>=13&&(++this.pos,l=this.fullCharCodeAtPos(),ze(l,!0)||l===92))return this.finishToken(M.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ot(l)+"'")},nt.getTokenFromCode=function(i){switch(i){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(M.parenL);case 41:return++this.pos,this.finishToken(M.parenR);case 59:return++this.pos,this.finishToken(M.semi);case 44:return++this.pos,this.finishToken(M.comma);case 91:return++this.pos,this.finishToken(M.bracketL);case 93:return++this.pos,this.finishToken(M.bracketR);case 123:return++this.pos,this.finishToken(M.braceL);case 125:return++this.pos,this.finishToken(M.braceR);case 58:return++this.pos,this.finishToken(M.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(M.backQuote);case 48:var l=this.input.charCodeAt(this.pos+1);if(l===120||l===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(l===111||l===79)return this.readRadixNumber(8);if(l===98||l===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(i);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(i);case 124:case 38:return this.readToken_pipe_amp(i);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(i);case 60:case 62:return this.readToken_lt_gt(i);case 61:case 33:return this.readToken_eq_excl(i);case 63:return this.readToken_question();case 126:return this.finishOp(M.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ot(i)+"'")},nt.finishOp=function(i,l){var C=this.input.slice(this.pos,this.pos+l);return this.pos+=l,this.finishToken(i,C)},nt.readRegexp=function(){for(var i,l,C=this.pos;;){this.pos>=this.input.length&&this.raise(C,"Unterminated regular expression");var O=this.input.charAt(this.pos);if(Ge.test(O)&&this.raise(C,"Unterminated regular expression"),i)i=!1;else{if(O==="[")l=!0;else if(O==="]"&&l)l=!1;else if(O==="/"&&!l)break;i=O==="\\"}++this.pos}var z=this.input.slice(C,this.pos);++this.pos;var ie=this.pos,re=this.readWord1();this.containsEsc&&this.unexpected(ie);var Se=this.regexpState||(this.regexpState=new At(this));Se.reset(C,z,re),this.validateRegExpFlags(Se),this.validateRegExpPattern(Se);var Le=null;try{Le=new RegExp(z,re)}catch{}return this.finishToken(M.regexp,{pattern:z,flags:re,value:Le})},nt.readInt=function(i,l,C){for(var O=this.options.ecmaVersion>=12&&l===void 0,z=C&&this.input.charCodeAt(this.pos)===48,ie=this.pos,re=0,Se=0,Le=0,et=l??1/0;Le<et;++Le,++this.pos){var ht=this.input.charCodeAt(this.pos),bt=void 0;if(O&&ht===95){z&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),Se===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),Le===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),Se=ht;continue}if(ht>=97?bt=ht-97+10:ht>=65?bt=ht-65+10:ht>=48&&ht<=57?bt=ht-48:bt=1/0,bt>=i)break;Se=ht,re=re*i+bt}return O&&Se===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===ie||l!=null&&this.pos-ie!==l?null:re};function ci(i,l){return l?parseInt(i,8):parseFloat(i.replace(/_/g,""))}function vi(i){return typeof BigInt!="function"?null:BigInt(i.replace(/_/g,""))}nt.readRadixNumber=function(i){var l=this.pos;this.pos+=2;var C=this.readInt(i);return C==null&&this.raise(this.start+2,"Expected number in radix "+i),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(C=vi(this.input.slice(l,this.pos)),++this.pos):ze(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(M.num,C)},nt.readNumber=function(i){var l=this.pos;!i&&this.readInt(10,void 0,!0)===null&&this.raise(l,"Invalid number");var C=this.pos-l>=2&&this.input.charCodeAt(l)===48;C&&this.strict&&this.raise(l,"Invalid number");var O=this.input.charCodeAt(this.pos);if(!C&&!i&&this.options.ecmaVersion>=11&&O===110){var z=vi(this.input.slice(l,this.pos));return++this.pos,ze(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(M.num,z)}C&&/[89]/.test(this.input.slice(l,this.pos))&&(C=!1),O===46&&!C&&(++this.pos,this.readInt(10),O=this.input.charCodeAt(this.pos)),(O===69||O===101)&&!C&&(O=this.input.charCodeAt(++this.pos),(O===43||O===45)&&++this.pos,this.readInt(10)===null&&this.raise(l,"Invalid number")),ze(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var ie=ci(this.input.slice(l,this.pos),C);return this.finishToken(M.num,ie)},nt.readCodePoint=function(){var i=this.input.charCodeAt(this.pos),l;if(i===123){this.options.ecmaVersion<6&&this.unexpected();var C=++this.pos;l=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,l>1114111&&this.invalidStringToken(C,"Code point out of bounds")}else l=this.readHexChar(4);return l},nt.readString=function(i){for(var l="",C=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var O=this.input.charCodeAt(this.pos);if(O===i)break;O===92?(l+=this.input.slice(C,this.pos),l+=this.readEscapedChar(!1),C=this.pos):O===8232||O===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(He(O)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return l+=this.input.slice(C,this.pos++),this.finishToken(M.string,l)};var fi={};nt.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(i){if(i===fi)this.readInvalidTemplateToken();else throw i}this.inTemplateElement=!1},nt.invalidStringToken=function(i,l){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw fi;this.raise(i,l)},nt.readTmplToken=function(){for(var i="",l=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var C=this.input.charCodeAt(this.pos);if(C===96||C===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===M.template||this.type===M.invalidTemplate)?C===36?(this.pos+=2,this.finishToken(M.dollarBraceL)):(++this.pos,this.finishToken(M.backQuote)):(i+=this.input.slice(l,this.pos),this.finishToken(M.template,i));if(C===92)i+=this.input.slice(l,this.pos),i+=this.readEscapedChar(!0),l=this.pos;else if(He(C)){switch(i+=this.input.slice(l,this.pos),++this.pos,C){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:i+=`
`;break;default:i+=String.fromCharCode(C);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),l=this.pos}else++this.pos}},nt.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(M.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},nt.readEscapedChar=function(i){var l=this.input.charCodeAt(++this.pos);switch(++this.pos,l){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ot(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),i){var C=this.pos-1;this.invalidStringToken(C,"Invalid escape sequence in template string")}default:if(l>=48&&l<=55){var O=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],z=parseInt(O,8);return z>255&&(O=O.slice(0,-1),z=parseInt(O,8)),this.pos+=O.length-1,l=this.input.charCodeAt(this.pos),(O!=="0"||l===56||l===57)&&(this.strict||i)&&this.invalidStringToken(this.pos-1-O.length,i?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(z)}return He(l)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode(l)}},nt.readHexChar=function(i){var l=this.pos,C=this.readInt(16,i);return C===null&&this.invalidStringToken(l,"Bad character escape sequence"),C},nt.readWord1=function(){this.containsEsc=!1;for(var i="",l=!0,C=this.pos,O=this.options.ecmaVersion>=6;this.pos<this.input.length;){var z=this.fullCharCodeAtPos();if(de(z,O))this.pos+=z<=65535?1:2;else if(z===92){this.containsEsc=!0,i+=this.input.slice(C,this.pos);var ie=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var re=this.readCodePoint();(l?ze:de)(re,O)||this.invalidStringToken(ie,"Invalid Unicode escape"),i+=ot(re),C=this.pos}else break;l=!1}return i+this.input.slice(C,this.pos)},nt.readWord=function(){var i=this.readWord1(),l=M.name;return this.keywords.test(i)&&(l=Fe[i]),this.finishToken(l,i)};var zi="8.15.0";t.acorn={Parser:t,version:zi,defaultOptions:Pt,Position:zt,SourceLocation:oi,getLineInfo:gn,Node:q,TokenType:be,tokTypes:M,keywordTypes:Fe,TokContext:T,tokContexts:w,isIdentifierChar:de,isIdentifierStart:ze,Token:mi,isNewLine:He,lineBreak:Ge,lineBreakG:$e,nonASCIIwhitespace:yt};function qn(i,l){return t.parse(i,l)}function Gn(i,l,C){return t.parseExpressionAt(i,l,C)}function Wn(i,l){return t.tokenizer(i,l)}o.Node=q,o.Parser=t,o.Position=zt,o.SourceLocation=oi,o.TokContext=T,o.Token=mi,o.TokenType=be,o.defaultOptions=Pt,o.getLineInfo=gn,o.isIdentifierChar=de,o.isIdentifierStart=ze,o.isNewLine=He,o.keywordTypes=Fe,o.lineBreak=Ge,o.lineBreakG=$e,o.nonASCIIwhitespace=yt,o.parse=qn,o.parseExpressionAt=Gn,o.tokContexts=w,o.tokTypes=M,o.tokenizer=Wn,o.version=zi})}(Qn,Qn.exports)),Qn.exports}/*!
 * Paper.js v0.12.18 - The Swiss Army Knife of Vector Graphics Scripting.
 * http://paperjs.org/
 *
 * Copyright (c) 2011 - 2020, Jrg Lehni & Jonathan Puckey
 * http://juerglehni.com/ & https://puckey.studio/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Wed Jul 17 14:57:24 2024 +0200
 *
 ***
 *
 * Straps.js - Class inheritance library with support for bean-style accessors
 *
 * Copyright (c) 2006 - 2020 Jrg Lehni
 * http://juerglehni.com/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Acorn.js
 * https://marijnhaverbeke.nl/acorn/
 *
 * Acorn is a tiny, fast JavaScript parser written in JavaScript,
 * created by Marijn Haverbeke and released under an MIT license.
 *
 */var Pf=Fr.exports,co;function If(){return co||(co=1,function(n){(function(s,o){s=s||lo;var c=s.window,_=s.document,p=new function(){var e=/^(statics|enumerable|beans|preserve)$/,t=[],r=t.slice,a=Object.create,u=Object.getOwnPropertyDescriptor,h=Object.defineProperty,f=t.forEach||function(x,y){for(var L=0,P=this.length;L<P;L++)x.call(y,this[L],L,this)},d=function(x,y){for(var L in this)this.hasOwnProperty(L)&&x.call(y,this[L],L,this)},g=Object.assign||function(x){for(var y=1,L=arguments.length;y<L;y++){var P=arguments[y];for(var T in P)P.hasOwnProperty(T)&&(x[T]=P[T])}return x},m=function(x,y,L){if(x){var P=u(x,"length");(P&&typeof P.value=="number"?f:d).call(x,y,L=L||x)}return L};function b(x,y,L,P,T){var w={};function k(E,V){V=V||(V=u(y,E))&&(V.get?V:V.value),typeof V=="string"&&V[0]==="#"&&(V=x[V.substring(1)]||V);var H=typeof V=="function",q=V,K=T||H&&!V.base?V&&V.get?E in x:x[E]:null,B;(!T||!K)&&(H&&K&&(V.base=K),H&&P!==!1&&(B=E.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(w[B[3].toLowerCase()+B[4]]=B[2]),(!q||H||!q.get||typeof q.get!="function"||!S.isPlainObject(q))&&(q={value:q,writable:!0}),(u(x,E)||{configurable:!0}).configurable&&(q.configurable=!0,q.enumerable=L??!B),h(x,E,q))}if(y){for(var v in y)y.hasOwnProperty(v)&&!e.test(v)&&k(v);for(var v in w){var I=w[v],R=x["set"+I],N=x["get"+I]||R&&x["is"+I];N&&(P===!0||N.length===0)&&k(v,{get:N,set:R})}}return x}function S(){for(var x=0,y=arguments.length;x<y;x++){var L=arguments[x];L&&g(this,L)}return this}return b(S,{inject:function(x){if(x){var y=x.statics===!0?x:x.statics,L=x.beans,P=x.preserve;y!==x&&b(this.prototype,x,x.enumerable,L,P),b(this,y,null,L,P)}for(var T=1,w=arguments.length;T<w;T++)this.inject(arguments[T]);return this},extend:function(){for(var x=this,y,L,P=0,T,w=arguments.length;P<w&&!(y&&L);P++)T=arguments[P],y=y||T.initialize,L=L||T.prototype;return y=y||function(){x.apply(this,arguments)},L=y.prototype=L||a(this.prototype),h(L,"constructor",{value:y,writable:!0,configurable:!0}),b(y,this),arguments.length&&this.inject.apply(y,arguments),y.base=x,y}}).inject({enumerable:!1,initialize:S,set:S,inject:function(){for(var x=0,y=arguments.length;x<y;x++){var L=arguments[x];L&&b(this,L,L.enumerable,L.beans,L.preserve)}return this},extend:function(){var x=a(this);return x.inject.apply(x,arguments)},each:function(x,y){return m(this,x,y)},clone:function(){return new this.constructor(this)},statics:{set:g,each:m,create:a,define:h,describe:u,clone:function(x){return g(new x.constructor,x)},isPlainObject:function(x){var y=x!=null&&x.constructor;return y&&(y===Object||y===S||y.name==="Object")},pick:function(x,y){return x!==o?x:y},slice:function(x,y,L){return r.call(x,y,L)}}})};n.exports=p,p.inject({enumerable:!1,toString:function(){return this._id!=null?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+p.each(this,function(e,t){if(!/^_/.test(t)){var r=typeof e;this.push(t+": "+(r==="number"?J.instance.number(e):r==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(e){return p.importJSON(e,this)},exportJSON:function(e){return p.exportJSON(this,e)},toJSON:function(){return p.serialize(this)},set:function(e,t){return e&&p.filter(this,e,t,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function e(){var t=e.base.apply(this,arguments),r=t.prototype._class;return r&&!p.exports[r]&&(p.exports[r]=t),t},equals:function(e,t){if(e===t)return!0;if(e&&e.equals)return e.equals(t);if(t&&t.equals)return t.equals(e);if(e&&t&&typeof e=="object"&&typeof t=="object"){if(Array.isArray(e)&&Array.isArray(t)){var r=e.length;if(r!==t.length)return!1;for(;r--;)if(!p.equals(e[r],t[r]))return!1}else{var a=Object.keys(e),r=a.length;if(r!==Object.keys(t).length)return!1;for(;r--;){var u=a[r];if(!(t.hasOwnProperty(u)&&p.equals(e[u],t[u])))return!1}}return!0}return!1},read:function(e,t,r,a){if(this===p){var u=this.peek(e,t);return e.__index++,u}var h=this.prototype,f=h._readIndex,d=t||f&&e.__index||0,g=e.length,m=e[d];if(a=a||g-d,m instanceof this||r&&r.readNull&&m==null&&a<=1)return f&&(e.__index=d+1),m&&r&&r.clone?m.clone():m;if(m=p.create(h),f&&(m.__read=!0),m=m.initialize.apply(m,d>0||d+a<g?p.slice(e,d,d+a):e)||m,f){e.__index=d+m.__read;var b=m.__filtered;b&&(e.__filtered=b,m.__filtered=o),m.__read=o}return m},peek:function(e,t){return e[e.__index=t||e.__index||0]},remain:function(e){return e.length-(e.__index||0)},readList:function(e,t,r,a){for(var u=[],h,f=t||0,d=a?f+a:e.length,g=f;g<d;g++)u.push(Array.isArray(h=e[g])?this.read(h,0,r):this.read(e,g,r,1));return u},readNamed:function(e,t,r,a,u){var h=this.getNamed(e,t),f=h!==o;if(f){var d=e.__filtered;if(!d){var g=this.getSource(e);d=e.__filtered=p.create(g),d.__unfiltered=g}d[t]=o}return this.read(f?[h]:e,r,a,u)},readSupported:function(e,t){var r=this.getSource(e),a=this,u=!1;return r&&Object.keys(r).forEach(function(h){if(h in t){var f=a.readNamed(e,h);f!==o&&(t[h]=f),u=!0}}),u},getSource:function(e){var t=e.__source;if(t===o){var r=e.length===1&&e[0];t=e.__source=r&&p.isPlainObject(r)?r:null}return t},getNamed:function(e,t){var r=this.getSource(e);if(r)return t?r[t]:e.__filtered||r},hasNamed:function(e,t){return!!this.getNamed(e,t)},filter:function(e,t,r,a){var u;function h(b){if(!(r&&b in r)&&!(u&&b in u)){var S=t[b];S!==o&&(e[b]=S)}}if(a){for(var f={},d=0,g,m=a.length;d<m;d++)(g=a[d])in t&&(h(g),f[g]=!0);u=f}return Object.keys(t.__unfiltered||t).forEach(h),e},isPlainValue:function(e,t){return p.isPlainObject(e)||Array.isArray(e)||t&&typeof e=="string"},serialize:function(e,t,r,a){t=t||{};var u=!a,h;if(u&&(t.formatter=new J(t.precision),a={length:0,definitions:{},references:{},add:function(S,x){var y="#"+S._id,L=this.references[y];if(!L){this.length++;var P=x.call(S),T=S._class;T&&P[0]!==T&&P.unshift(T),this.definitions[y]=P,L=this.references[y]=[y]}return L}}),e&&e._serialize){h=e._serialize(t,a);var f=e._class;f&&!e._compactSerialize&&(u||!r)&&h[0]!==f&&h.unshift(f)}else if(Array.isArray(e)){h=[];for(var d=0,g=e.length;d<g;d++)h[d]=p.serialize(e[d],t,r,a)}else if(p.isPlainObject(e)){h={};for(var m=Object.keys(e),d=0,g=m.length;d<g;d++){var b=m[d];h[b]=p.serialize(e[b],t,r,a)}}else typeof e=="number"?h=t.formatter.number(e,t.precision):h=e;return u&&a.length>0?[["dictionary",a.definitions],h]:h},deserialize:function(e,t,r,a,u){var h=e,f=!r,d=f&&e&&e.length&&e[0][0]==="dictionary";if(r=r||{},Array.isArray(e)){var g=e[0],m=g==="dictionary";if(e.length==1&&/^#/.test(g))return r.dictionary[g];g=p.exports[g],h=[];for(var b=g?1:0,S=e.length;b<S;b++)h.push(p.deserialize(e[b],t,r,m,d));if(g){var x=h;t?h=t(g,x,f||u):h=new g(x)}}else if(p.isPlainObject(e)){h={},a&&(r.dictionary=h);for(var y in e)h[y]=p.deserialize(e[y],t,r)}return d?h[1]:h},exportJSON:function(e,t){var r=p.serialize(e,t);return t&&t.asString==!1?r:JSON.stringify(r)},importJSON:function(e,t){return p.deserialize(typeof e=="string"?JSON.parse(e):e,function(r,a,u){var h=u&&t&&t.constructor===r,f=h?t:p.create(r.prototype);if(a.length===1&&f instanceof M&&(h||!(f instanceof $e))){var d=a[0];p.isPlainObject(d)&&(d.insert=!1,h&&(a=a.concat([M.INSERT])))}return(h?f.set:r).apply(f,a),h&&(t=null),f})},push:function(e,t){var r=t.length;if(r<4096)e.push.apply(e,t);else{var a=e.length;e.length+=r;for(var u=0;u<r;u++)e[a+u]=t[u]}return e},splice:function(e,t,r,a){var u=t&&t.length,h=r===o;r=h?e.length:r,r>e.length&&(r=e.length);for(var f=0;f<u;f++)t[f]._index=r+f;if(h)return p.push(e,t),[];var d=[r,a];t&&p.push(d,t);for(var g=e.splice.apply(e,d),f=0,m=g.length;f<m;f++)g[f]._index=o;for(var f=r+u,m=e.length;f<m;f++)e[f]._index=f;return g},capitalize:function(e){return e.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(e){return e.replace(/-(.)/g,function(t,r){return r.toUpperCase()})},hyphenate:function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var A={on:function(e,t){if(typeof e!="string")p.each(e,function(h,f){this.on(f,h)},this);else{var r=this._eventTypes,a=r&&r[e],u=this._callbacks=this._callbacks||{};u=u[e]=u[e]||[],u.indexOf(t)===-1&&(u.push(t),a&&a.install&&u.length===1&&a.install.call(this,e))}return this},off:function(e,t){if(typeof e!="string"){p.each(e,function(f,d){this.off(d,f)},this);return}var r=this._eventTypes,a=r&&r[e],u=this._callbacks&&this._callbacks[e],h;return u&&(!t||(h=u.indexOf(t))!==-1&&u.length===1?(a&&a.uninstall&&a.uninstall.call(this,e),delete this._callbacks[e]):h!==-1&&u.splice(h,1)),this},once:function(e,t){return this.on(e,function r(){t.apply(this,arguments),this.off(e,r)})},emit:function(e,t){var r=this._callbacks&&this._callbacks[e];if(!r)return!1;var a=p.slice(arguments,1),u=t&&t.target&&!t.currentTarget;r=r.slice(),u&&(t.currentTarget=this);for(var h=0,f=r.length;h<f;h++)if(r[h].apply(this,a)==!1){t&&t.stop&&t.stop();break}return u&&delete t.currentTarget,!0},responds:function(e){return!!(this._callbacks&&this._callbacks[e])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(e){var t=this._eventTypes,r=this._callbacks,a=e?"install":"uninstall";if(t){for(var u in r)if(r[u].length>0){var h=t[u],f=h&&h[a];f&&f.call(this,u)}}},statics:{inject:function e(t){var r=t._events;if(r){var a={};p.each(r,function(u,h){var f=typeof u=="string",d=f?u:h,g=p.capitalize(d),m=d.substring(2).toLowerCase();a[m]=f?{}:u,d="_"+d,t["get"+g]=function(){return this[d]},t["set"+g]=function(b){var S=this[d];S&&this.off(m,S),b&&this.on(m,b),this[d]=b}}),t._eventTypes=a}return e.base.apply(this,arguments)}}},F=p.extend({_class:"PaperScope",initialize:function e(){Ae=this,this.settings=new p({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var t=e.prototype;if(!this.support){var r=ce.getContext(1,1)||{};t.support={nativeDash:"setLineDash"in r||"mozDash"in r,nativeBlendModes:We.nativeModes},ce.release(r)}if(!this.agent){var a=s.navigator.userAgent.toLowerCase(),u=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(a)||[])[0],h=u==="darwin"?"mac":u,f=t.agent=t.browser={platform:h};h&&(f[h]=!0),a.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node|jsdom)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(d,g,m,b,S){if(!f.chrome){var x=g==="opera"?b:/^(node|trident)$/.test(g)?S:m;f.version=x,f.versionNumber=parseFloat(x),g={trident:"msie",jsdom:"node"}[g]||g,f.name=g,f[g]=!0}}),f.chrome&&delete f.webkit,f.atom&&delete f.chrome}},version:"0.12.18",getView:function(){var e=this.project;return e&&e._view},getPaper:function(){return this},execute:function(e,t){var r=Ae.PaperScript.execute(e,this,t);return xt.updateFocus(),r},install:function(e){var t=this;p.each(["project","view","tool"],function(a){p.define(e,a,{configurable:!0,get:function(){return t[a]}})});for(var r in this)!/^_/.test(r)&&this[r]&&(e[r]=this[r])},setup:function(e){return Ae=this,this.project=new pe(e),this},createCanvas:function(e,t){return ce.getCanvas(e,t)},activate:function(){Ae=this},clear:function(){for(var e=this.projects,t=this.tools,r=e.length-1;r>=0;r--)e[r].remove();for(var r=t.length-1;r>=0;r--)t[r].remove()},remove:function(){this.clear(),delete F._scopes[this._id]},statics:new function(){function e(t){return t+="Attribute",function(r,a){return r[t](a)||r[t]("data-paper-"+a)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:e("get"),hasAttribute:e("has")}}}),D=p.extend(A,{initialize:function(e){this._scope=Ae,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){if(!this._scope)return!1;var e=this._scope[this._reference];return e&&e!==this&&e.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",e),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return this._index==null?!1:(p.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),te={findItemBoundsCollisions:function(e,t,r){function a(f){for(var d=new Array(f.length),g=0;g<f.length;g++){var m=f[g].getBounds();d[g]=[m.left,m.top,m.right,m.bottom]}return d}var u=a(e),h=!t||t===e?u:a(t);return this.findBoundsCollisions(u,h,r||0)},findCurveBoundsCollisions:function(e,t,r,a){function u(x){for(var y=Math.min,L=Math.max,P=new Array(x.length),T=0;T<x.length;T++){var w=x[T];P[T]=[y(w[0],w[2],w[4],w[6]),y(w[1],w[3],w[5],w[7]),L(w[0],w[2],w[4],w[6]),L(w[1],w[3],w[5],w[7])]}return P}var h=u(e),f=!t||t===e?h:u(t);if(a){for(var d=this.findBoundsCollisions(h,f,r||0,!1,!0),g=this.findBoundsCollisions(h,f,r||0,!0,!0),m=[],b=0,S=d.length;b<S;b++)m[b]={hor:d[b],ver:g[b]};return m}return this.findBoundsCollisions(h,f,r||0)},findBoundsCollisions:function(e,t,r,a,u){var h=!t||e===t,f=h?e:e.concat(t),d=e.length,g=f.length;function m(Pe,Te,De){for(var ue=0,he=Pe.length;ue<he;){var Me=he+ue>>>1;f[Pe[Me]][Te]<De?ue=Me+1:he=Me}return ue-1}for(var b=a?1:0,S=b+2,x=a?0:1,y=x+2,L=new Array(g),P=0;P<g;P++)L[P]=P;L.sort(function(Pe,Te){return f[Pe][b]-f[Te][b]});for(var T=[],w=new Array(d),P=0;P<g;P++){var k=L[P],v=f[k],I=h?k:k-d,R=k<d,N=h||!R,E=R?[]:null;if(T.length){var V=m(T,S,v[b]-r)+1;if(T.splice(0,V),h&&u){E=E.concat(T);for(var H=0;H<T.length;H++){var q=T[H];w[q].push(I)}}else for(var K=v[y],B=v[x],H=0;H<T.length;H++){var q=T[H],W=f[q],$=q<d,X=h||q>=d;(u||(R&&X||N&&$)&&K>=W[x]-r&&B<=W[y]+r)&&(R&&X&&E.push(h?q:q-d),N&&$&&w[q].push(I))}}if(R&&(e===t&&E.push(k),w[k]=E),T.length){var ee=v[S],ne=m(T,S,ee);T.splice(ne+1,0,k)}else T.push(k)}for(var P=0;P<w.length;P++){var _e=w[P];_e&&_e.sort(function(Te,De){return Te-De})}return w}},J=p.extend({initialize:function(e){this.precision=p.pick(e,5),this.multiplier=Math.pow(10,this.precision)},number:function(e){return this.precision<16?Math.round(e*this.multiplier)/this.multiplier:e},pair:function(e,t,r){return this.number(e)+(r||",")+this.number(t)},point:function(e,t){return this.number(e.x)+(t||",")+this.number(e.y)},size:function(e,t){return this.number(e.width)+(t||",")+this.number(e.height)},rectangle:function(e,t){return this.point(e,t)+(t||",")+this.size(e,t)}});J.instance=new J;var Q=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],r=Math.abs,a=Math.sqrt,u=Math.pow,h=Math.log2||function(S){return Math.log(S)*Math.LOG2E},f=1e-12,d=112e-18;function g(S,x,y){return S<x?x:S>y?y:S}function m(S,x,y){function L(V){var H=V*134217729,q=V-H,K=q+H,B=V-K;return[K,B]}var P=x*x-S*y,T=x*x+S*y;if(r(P)*3<T){var w=L(S),k=L(x),v=L(y),I=x*x,R=k[0]*k[0]-I+2*k[0]*k[1]+k[1]*k[1],N=S*y,E=w[0]*v[0]-N+w[0]*v[1]+w[1]*v[0]+w[1]*v[1];P=I-N+(R-E)}return P}function b(){var S=Math.max.apply(Math,arguments);return S&&(S<1e-8||S>1e8)?u(2,-Math.round(h(S))):0}return{EPSILON:f,MACHINE_EPSILON:d,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,ANGULAR_EPSILON:1e-5,KAPPA:4*(a(2)-1)/3,isZero:function(S){return S>=-f&&S<=f},isMachineZero:function(S){return S>=-d&&S<=d},clamp:g,integrate:function(S,x,y,L){for(var P=e[L-2],T=t[L-2],w=(y-x)*.5,k=w+x,v=0,I=L+1>>1,R=L&1?T[v++]*S(k):0;v<I;){var N=w*P[v];R+=T[v++]*(S(k+N)+S(k-N))}return w*R},findRoot:function(S,x,y,L,P,T,w){for(var k=0;k<T;k++){var v=S(y),I=v/x(y),R=y-I;if(r(I)<w){y=R;break}v>0?(P=y,y=R<=L?(L+P)*.5:R):(L=y,y=R>=P?(L+P)*.5:R)}return g(y,L,P)},solveQuadratic:function(S,x,y,L,P,T){var w,k=1/0;if(r(S)<f){if(r(x)<f)return r(y)<f?-1:0;w=-y/x}else{x*=-.5;var v=m(S,x,y);if(v&&r(v)<d){var I=b(r(S),r(x),r(y));I&&(S*=I,x*=I,y*=I,v=m(S,x,y))}if(v>=-d){var R=v<0?0:a(v),N=x+(x<0?-R:R);N===0?(w=y/S,k=-w):(w=N/S,k=y/N)}}var E=0,V=P==null,H=P-f,q=T+f;return isFinite(w)&&(V||w>H&&w<q)&&(L[E++]=V?w:g(w,P,T)),k!==w&&isFinite(k)&&(V||k>H&&k<q)&&(L[E++]=V?k:g(k,P,T)),E},solveCubic:function(S,x,y,L,P,T,w){var k=b(r(S),r(x),r(y),r(L)),v,I,R,N,E;k&&(S*=k,x*=k,y*=k,L*=k);function V(ne){v=ne;var _e=S*v;I=_e+x,R=I*v+y,N=(_e+I)*v+R,E=R*v+L}if(r(S)<f)S=x,I=y,R=L,v=1/0;else if(r(L)<f)I=x,R=y,v=0;else{V(-(x/S)/3);var H=E/S,q=u(r(H),1/3),K=H<0?-1:1,B=-N/S,W=B>0?1.324717957244746*Math.max(q,a(B)):q,$=v-K*W;if($!==v){do V($),$=N===0?v:v-E/N/(1+d);while(K*$>K*v);r(S)*v*v>r(L/v)&&(R=-L/v,I=(R-y)/v)}}var X=Q.solveQuadratic(S,I,R,P,T,w),ee=T==null;return isFinite(v)&&(X===0||X>0&&v!==P[0]&&v!==P[1])&&(ee||v>T-f&&v<w+f)&&(P[X++]=ee?v:g(v,T,w)),X}}},oe={_id:1,_pools:{},get:function(e){if(e){var t=this._pools[e];return t||(t=this._pools[e]={_id:1}),t._id++}else return this._id++}},U=p.extend({_class:"Point",_readIndex:!0,initialize:function(t,r){var a=typeof t,u=this.__read,h=0;if(a==="number"){var f=typeof r=="number";this._set(t,f?r:t),u&&(h=f?2:1)}else if(a==="undefined"||t===null)this._set(0,0),u&&(h=t===null?1:0);else{var d=a==="string"?t.split(/[\s,]+/)||[]:t;h=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"x"in d?this._set(d.x||0,d.y||0):"width"in d?this._set(d.width||0,d.height||0):"angle"in d?(this._set(d.length||0,0),this.setAngle(d.angle||0)):(this._set(0,0),h=0)}return u&&(this.__read=h),this},set:"#initialize",_set:function(e,t){return this.x=e,this.y=t,this},equals:function(e){return this===e||e&&(this.x===e.x&&this.y===e.y||Array.isArray(e)&&this.x===e[0]&&this.y===e[1])||!1},clone:function(){return new U(this.x,this.y)},toString:function(){var e=J.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this._set(Math.cos(t)*e,Math.sin(t)*e)}else{var r=e/this.getLength();Q.isZero(r)&&this.getAngle(),this._set(this.x*r,this.y*r)}},getAngle:function(){return this.getAngleInRadians.apply(this,arguments)*180/Math.PI},setAngle:function(e){this.setAngleInRadians.call(this,e*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var e=U.read(arguments),t=this.getLength()*e.getLength();if(Q.isZero(t))return NaN;var r=this.dot(e)/t;return Math.acos(r<-1?-1:r>1?1:r)}else return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(e){if(this._angle=e,!this.isZero()){var t=this.getLength();this._set(Math.cos(e)*t,Math.sin(e)*t)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var e=U.read(arguments);return Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},getDistance:function(){var e=arguments,t=U.read(e),r=t.x-this.x,a=t.y-this.y,u=r*r+a*a,h=p.read(e);return h?u:Math.sqrt(u)},normalize:function(e){e===o&&(e=1);var t=this.getLength(),r=t!==0?e/t:0,a=new U(this.x*r,this.y*r);return r>=0&&(a._angle=this._angle),a},rotate:function(e,t){if(e===0)return this.clone();e=e*Math.PI/180;var r=t?this.subtract(t):this,a=Math.sin(e),u=Math.cos(e);return r=new U(r.x*u-r.y*a,r.x*a+r.y*u),t?r.add(t):r},transform:function(e){return e?e._transformPoint(this):this},add:function(){var e=U.read(arguments);return new U(this.x+e.x,this.y+e.y)},subtract:function(){var e=U.read(arguments);return new U(this.x-e.x,this.y-e.y)},multiply:function(){var e=U.read(arguments);return new U(this.x*e.x,this.y*e.y)},divide:function(){var e=U.read(arguments);return new U(this.x/e.x,this.y/e.y)},modulo:function(){var e=U.read(arguments);return new U(this.x%e.x,this.y%e.y)},negate:function(){return new U(-this.x,-this.y)},isInside:function(){return Ce.read(arguments).contains(this)},isClose:function(){var e=arguments,t=U.read(e),r=p.read(e);return this.getDistance(t)<=r},isCollinear:function(){var e=U.read(arguments);return U.isCollinear(this.x,this.y,e.x,e.y)},isColinear:"#isCollinear",isOrthogonal:function(){var e=U.read(arguments);return U.isOrthogonal(this.x,this.y,e.x,e.y)},isZero:function(){var e=Q.isZero;return e(this.x)&&e(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(e){return this.x*(e>1&&e<4?-1:1)>=0&&this.y*(e>2?-1:1)>=0},dot:function(){var e=U.read(arguments);return this.x*e.x+this.y*e.y},cross:function(){var e=U.read(arguments);return this.x*e.y-this.y*e.x},project:function(){var e=U.read(arguments),t=e.isZero()?0:this.dot(e)/e.dot(e);return new U(e.x*t,e.y*t)},statics:{min:function(){var e=arguments,t=U.read(e),r=U.read(e);return new U(Math.min(t.x,r.x),Math.min(t.y,r.y))},max:function(){var e=arguments,t=U.read(e),r=U.read(e);return new U(Math.max(t.x,r.x),Math.max(t.y,r.y))},random:function(){return new U(Math.random(),Math.random())},isCollinear:function(e,t,r,a){return Math.abs(e*a-t*r)<=Math.sqrt((e*e+t*t)*(r*r+a*a))*1e-8},isOrthogonal:function(e,t,r,a){return Math.abs(e*r+t*a)<=Math.sqrt((e*e+t*t)*(r*r+a*a))*1e-8}}},p.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new U(t(this.x),t(this.y))}},{})),ze=U.extend({initialize:function(t,r,a,u){this._x=t,this._y=r,this._owner=a,this._setter=u},_set:function(e,t,r){return this._x=e,this._y=t,r||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){return this._setter==="setPosition"?4:0}}),de=p.extend({_class:"Size",_readIndex:!0,initialize:function(t,r){var a=typeof t,u=this.__read,h=0;if(a==="number"){var f=typeof r=="number";this._set(t,f?r:t),u&&(h=f?2:1)}else if(a==="undefined"||t===null)this._set(0,0),u&&(h=t===null?1:0);else{var d=a==="string"?t.split(/[\s,]+/)||[]:t;h=1,Array.isArray(d)?this._set(+d[0],+(d.length>1?d[1]:d[0])):"width"in d?this._set(d.width||0,d.height||0):"x"in d?this._set(d.x||0,d.y||0):(this._set(0,0),h=0)}return u&&(this.__read=h),this},set:"#initialize",_set:function(e,t){return this.width=e,this.height=t,this},equals:function(e){return e===this||e&&(this.width===e.width&&this.height===e.height||Array.isArray(e)&&this.width===e[0]&&this.height===e[1])||!1},clone:function(){return new de(this.width,this.height)},toString:function(){var e=J.instance;return"{ width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.width),t.number(this.height)]},add:function(){var e=de.read(arguments);return new de(this.width+e.width,this.height+e.height)},subtract:function(){var e=de.read(arguments);return new de(this.width-e.width,this.height-e.height)},multiply:function(){var e=de.read(arguments);return new de(this.width*e.width,this.height*e.height)},divide:function(){var e=de.read(arguments);return new de(this.width/e.width,this.height/e.height)},modulo:function(){var e=de.read(arguments);return new de(this.width%e.width,this.height%e.height)},negate:function(){return new de(-this.width,-this.height)},isZero:function(){var e=Q.isZero;return e(this.width)&&e(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(e,t){return new de(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return new de(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return new de(Math.random(),Math.random())}}},p.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return new de(t(this.width),t(this.height))}},{})),be=de.extend({initialize:function(t,r,a,u){this._width=t,this._height=r,this._owner=a,this._setter=u},_set:function(e,t,r){return this._width=e,this._height=t,r||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)}}),Ce=p.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,r,a,u){var h=arguments,f=typeof t,d;if(f==="number"?(this._set(t,r,a,u),d=4):f==="undefined"||t===null?(this._set(0,0,0,0),d=t===null?1:0):h.length===1&&(Array.isArray(t)?(this._set.apply(this,t),d=1):t.x!==o||t.width!==o?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),d=1):t.from===o&&t.to===o&&(this._set(0,0,0,0),p.readSupported(h,this)&&(d=1))),d===o){var g=U.readNamed(h,"from"),m=p.peek(h),b=g.x,S=g.y,x,y;if(m&&m.x!==o||p.hasNamed(h,"to")){var L=U.readNamed(h,"to");x=L.x-b,y=L.y-S,x<0&&(b=L.x,x=-x),y<0&&(S=L.y,y=-y)}else{var P=de.read(h);x=P.width,y=P.height}this._set(b,S,x,y),d=h.__index}var T=h.__filtered;return T&&(this.__filtered=T),this.__read&&(this.__read=d),this},set:"#initialize",_set:function(e,t,r,a){return this.x=e,this.y=t,this.width=r,this.height=a,this},clone:function(){return new Ce(this.x,this.y,this.width,this.height)},equals:function(e){var t=p.isPlainValue(e)?Ce.read(arguments):e;return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height||!1},toString:function(){var e=J.instance;return"{ x: "+e.number(this.x)+", y: "+e.number(this.y)+", width: "+e.number(this.width)+", height: "+e.number(this.height)+" }"},_serialize:function(e){var t=e.formatter;return[t.number(this.x),t.number(this.y),t.number(this.width),t.number(this.height)]},getPoint:function(e){var t=e?U:ze;return new t(this.x,this.y,this,"setPoint")},setPoint:function(){var e=U.read(arguments);this.x=e.x,this.y=e.y},getSize:function(e){var t=e?de:be;return new t(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var e=de.read(arguments),t=this._sx,r=this._sy,a=e.width,u=e.height;t&&(this.x+=(this.width-a)*t),r&&(this.y+=(this.height-u)*r),this.width=a,this.height=u,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(e){if(!this._fw){var t=e-this.x;this.width-=this._sx===.5?t*2:t}this.x=e,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(e){if(!this._fh){var t=e-this.y;this.height-=this._sy===.5?t*2:t}this.y=e,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(e){if(!this._fw){var t=e-this.x;this.width=this._sx===.5?t*2:t}this.x=e-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(e){if(!this._fh){var t=e-this.y;this.height=this._sy===.5?t*2:t}this.y=e-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(e){this._fw||this._sx===.5?this.x=e-this.width/2:(this._sx&&(this.x+=(e-this.x)*2*this._sx),this.width=(e-this.x)*2),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(e){this._fh||this._sy===.5?this.y=e-this.height/2:(this._sy&&(this.y+=(e-this.y)*2*this._sy),this.height=(e-this.y)*2),this._sy=.5,this._fh=0},getCenter:function(e){var t=e?U:ze;return new t(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var e=U.read(arguments);return this.setCenterX(e.x),this.setCenterY(e.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return this.width===0||this.height===0},contains:function(e){return e&&e.width!==o||(Array.isArray(e)?e:arguments).length===4?this._containsRectangle(Ce.read(arguments)):this._containsPoint(U.read(arguments))},_containsPoint:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t<=this.x+this.width&&r<=this.y+this.height},_containsRectangle:function(e){var t=e.x,r=e.y;return t>=this.x&&r>=this.y&&t+e.width<=this.x+this.width&&r+e.height<=this.y+this.height},intersects:function(){var e=Ce.read(arguments),t=p.read(arguments)||0;return e.x+e.width>this.x-t&&e.y+e.height>this.y-t&&e.x<this.x+this.width+t&&e.y<this.y+this.height+t},intersect:function(){var e=Ce.read(arguments),t=Math.max(this.x,e.x),r=Math.max(this.y,e.y),a=Math.min(this.x+this.width,e.x+e.width),u=Math.min(this.y+this.height,e.y+e.height);return new Ce(t,r,a-t,u-r)},unite:function(){var e=Ce.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),a=Math.max(this.x+this.width,e.x+e.width),u=Math.max(this.y+this.height,e.y+e.height);return new Ce(t,r,a-t,u-r)},include:function(){var e=U.read(arguments),t=Math.min(this.x,e.x),r=Math.min(this.y,e.y),a=Math.max(this.x+this.width,e.x),u=Math.max(this.y+this.height,e.y);return new Ce(t,r,a-t,u-r)},expand:function(){var e=de.read(arguments),t=e.width,r=e.height;return new Ce(this.x-t/2,this.y-r/2,this.width+t,this.height+r)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===o?e:t)-this.height)}},p.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var r=e.join(""),a=/^[RL]/.test(r);t>=4&&(e[1]+=a?"Y":"X");var u=e[a?0:1],h=e[a?1:0],f="get"+u,d="get"+h,g="set"+u,m="set"+h,b="get"+r,S="set"+r;this[b]=function(x){var y=x?U:ze;return new y(this[f](),this[d](),this,S)},this[S]=function(){var x=U.read(arguments);this[g](x.x),this[m](x.y)}},{beans:!0})),Ye=Ce.extend({initialize:function(t,r,a,u,h,f){this._set(t,r,a,u,!0),this._owner=h,this._setter=f},_set:function(e,t,r,a,u){return this._x=e,this._y=t,this._width=r,this._height=a,u||this._owner[this._setter](this),this}},new function(){var e=Ce.prototype;return p.each(["x","y","width","height"],function(t){var r=p.capitalize(t),a="_"+t;this["get"+r]=function(){return this[a]},this["set"+r]=function(u){this[a]=u,this._dontNotify||this._owner[this._setter](this)}},p.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var r="set"+t;this[r]=function(){this._dontNotify=!0,e[r].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(this._owner._selection&2)},setSelected:function(t){var r=this._owner;r._changeSelection&&r._changeSelection(2,t)}}))}),Ve=p.extend({_class:"Matrix",initialize:function e(t,r){var a=arguments,u=a.length,h=!0;if(u>=6?this._set.apply(this,a):u===1||u===2?t instanceof e?this._set(t._a,t._b,t._c,t._d,t._tx,t._ty,r):Array.isArray(t)?this._set.apply(this,r?t.concat([r]):t):h=!1:u?h=!1:this.reset(),!h)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(e,t,r,a,u,h,f){return this._a=e,this._b=t,this._c=r,this._d=a,this._tx=u,this._ty=h,f||this._changed(),this},_serialize:function(e,t){return p.serialize(this.getValues(),e,!0,t)},_changed:function(){var e=this._owner;e&&(e._applyMatrix?e.transform(null,!0):e._changed(25))},clone:function(){return new Ve(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(e){return e===this||e&&this._a===e._a&&this._b===e._b&&this._c===e._c&&this._d===e._d&&this._tx===e._tx&&this._ty===e._ty},toString:function(){var e=J.instance;return"[["+[e.number(this._a),e.number(this._c),e.number(this._tx)].join(", ")+"], ["+[e.number(this._b),e.number(this._d),e.number(this._ty)].join(", ")+"]]"},reset:function(e){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,e||this._changed(),this},apply:function(e,t){var r=this._owner;return r?(r.transform(null,p.pick(e,!0),t),this.isIdentity()):!1},translate:function(){var e=U.read(arguments),t=e.x,r=e.y;return this._tx+=t*this._a+r*this._c,this._ty+=t*this._b+r*this._d,this._changed(),this},scale:function(){var e=arguments,t=U.read(e),r=U.read(e,0,{readNull:!0});return r&&this.translate(r),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,r&&this.translate(r.negate()),this._changed(),this},rotate:function(e){e*=Math.PI/180;var t=U.read(arguments,1),r=t.x,a=t.y,u=Math.cos(e),h=Math.sin(e),f=r-r*u+a*h,d=a-r*h-a*u,g=this._a,m=this._b,b=this._c,S=this._d;return this._a=u*g+h*b,this._b=u*m+h*S,this._c=-h*g+u*b,this._d=-h*m+u*S,this._tx+=f*g+d*b,this._ty+=f*m+d*S,this._changed(),this},shear:function(){var e=arguments,t=U.read(e),r=U.read(e,0,{readNull:!0});r&&this.translate(r);var a=this._a,u=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*a,this._d+=t.x*u,r&&this.translate(r.negate()),this._changed(),this},skew:function(){var e=arguments,t=U.read(e),r=U.read(e,0,{readNull:!0}),a=Math.PI/180,u=new U(Math.tan(t.x*a),Math.tan(t.y*a));return this.shear(u,r)},append:function(e,t){if(e){var r=this._a,a=this._b,u=this._c,h=this._d,f=e._a,d=e._c,g=e._b,m=e._d,b=e._tx,S=e._ty;this._a=f*r+g*u,this._c=d*r+m*u,this._b=f*a+g*h,this._d=d*a+m*h,this._tx+=b*r+S*u,this._ty+=b*a+S*h,t||this._changed()}return this},prepend:function(e,t){if(e){var r=this._a,a=this._b,u=this._c,h=this._d,f=this._tx,d=this._ty,g=e._a,m=e._c,b=e._b,S=e._d,x=e._tx,y=e._ty;this._a=g*r+m*a,this._c=g*u+m*h,this._b=b*r+S*a,this._d=b*u+S*h,this._tx=g*f+m*d+x,this._ty=b*f+S*d+y,t||this._changed()}return this},appended:function(e){return this.clone().append(e)},prepended:function(e){return this.clone().prepend(e)},invert:function(){var e=this._a,t=this._b,r=this._c,a=this._d,u=this._tx,h=this._ty,f=e*a-t*r,d=null;return f&&!isNaN(f)&&isFinite(u)&&isFinite(h)&&(this._a=a/f,this._b=-t/f,this._c=-r/f,this._d=e/f,this._tx=(r*h-a*u)/f,this._ty=(t*u-e*h)/f,d=this),d},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new Ve(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return this._a===1&&this._b===0&&this._c===0&&this._d===1&&this._tx===0&&this._ty===0},isInvertible:function(){var e=this._a*this._d-this._c*this._b;return e&&!isNaN(e)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(e,t,r){return arguments.length<3?this._transformPoint(U.read(arguments)):this._transformCoordinates(e,t,r)},_transformPoint:function(e,t,r){var a=e.x,u=e.y;return t||(t=new U),t._set(a*this._a+u*this._c+this._tx,a*this._b+u*this._d+this._ty,r)},_transformCoordinates:function(e,t,r){for(var a=0,u=2*r;a<u;a+=2){var h=e[a],f=e[a+1];t[a]=h*this._a+f*this._c+this._tx,t[a+1]=h*this._b+f*this._d+this._ty}return t},_transformCorners:function(e){var t=e.x,r=e.y,a=t+e.width,u=r+e.height,h=[t,r,a,r,a,u,t,u];return this._transformCoordinates(h,h,4)},_transformBounds:function(e,t,r){for(var a=this._transformCorners(e),u=a.slice(0,2),h=u.slice(),f=2;f<8;f++){var d=a[f],g=f&1;d<u[g]?u[g]=d:d>h[g]&&(h[g]=d)}return t||(t=new Ce),t._set(u[0],u[1],h[0]-u[0],h[1]-u[1],r)},inverseTransform:function(){return this._inverseTransform(U.read(arguments))},_inverseTransform:function(e,t,r){var a=this._a,u=this._b,h=this._c,f=this._d,d=this._tx,g=this._ty,m=a*f-u*h,b=null;if(m&&!isNaN(m)&&isFinite(d)&&isFinite(g)){var S=e.x-this._tx,x=e.y-this._ty;t||(t=new U),b=t._set((S*f-x*h)/m,(x*a-S*u)/m,r)}return b},decompose:function(){var e=this._a,t=this._b,r=this._c,a=this._d,u=e*a-t*r,h=Math.sqrt,f=Math.atan2,d=180/Math.PI,g,m,b;if(e!==0||t!==0){var S=h(e*e+t*t);g=Math.acos(e/S)*(t>0?1:-1),m=[S,u/S],b=[f(e*r+t*a,S*S),0]}else if(r!==0||a!==0){var x=h(r*r+a*a);g=Math.asin(r/x)*(a>0?1:-1),m=[u/x,x],b=[0,f(e*r+t*a,x*x)]}else g=0,b=m=[0,0];return{translation:this.getTranslation(),rotation:g*d,scaling:new U(m),skewing:new U(b[0]*d,b[1]*d)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new U(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(e){this.isIdentity()||e.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},p.each(["a","b","c","d","tx","ty"],function(e){var t=p.capitalize(e),r="_"+e;this["get"+t]=function(){return this[r]},this["set"+t]=function(a){this[r]=a,this._changed()}},{})),Fe=p.extend({_class:"Line",initialize:function(t,r,a,u,h){var f=!1;arguments.length>=4?(this._px=t,this._py=r,this._vx=a,this._vy=u,f=h):(this._px=t.x,this._py=t.y,this._vx=r.x,this._vy=r.y,f=a),f||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new U(this._px,this._py)},getVector:function(){return new U(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(e,t){return Fe.intersect(this._px,this._py,this._vx,this._vy,e._px,e._py,e._vx,e._vy,!0,t)},getSide:function(e,t){return Fe.getSide(this._px,this._py,this._vx,this._vy,e.x,e.y,!0,t)},getDistance:function(e){return Math.abs(this.getSignedDistance(e))},getSignedDistance:function(e){return Fe.getSignedDistance(this._px,this._py,this._vx,this._vy,e.x,e.y,!0)},isCollinear:function(e){return U.isCollinear(this._vx,this._vy,e._vx,e._vy)},isOrthogonal:function(e){return U.isOrthogonal(this._vx,this._vy,e._vx,e._vy)},statics:{intersect:function(e,t,r,a,u,h,f,d,g,m){g||(r-=e,a-=t,f-=u,d-=h);var b=r*d-a*f;if(!Q.isMachineZero(b)){var S=e-u,x=t-h,y=(f*x-d*S)/b,L=(r*x-a*S)/b,P=1e-12,T=-P,w=1+P;if(m||T<y&&y<w&&T<L&&L<w)return m||(y=y<=0?0:y>=1?1:y),new U(e+y*r,t+y*a)}},getSide:function(e,t,r,a,u,h,f,d){f||(r-=e,a-=t);var g=u-e,m=h-t,b=g*a-m*r;return!d&&Q.isMachineZero(b)&&(b=(g*r+g*r)/(r*r+a*a),b>=0&&b<=1&&(b=0)),b<0?-1:b>0?1:0},getSignedDistance:function(e,t,r,a,u,h,f){return f||(r-=e,a-=t),r===0?a>0?u-e:e-u:a===0?r<0?h-t:t-h:((u-e)*a-(h-t)*r)/(a>r?a*Math.sqrt(1+r*r/(a*a)):r*Math.sqrt(1+a*a/(r*r)))},getDistance:function(e,t,r,a,u,h,f){return Math.abs(Fe.getSignedDistance(e,t,r,a,u,h,f))}}}),pe=D.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){D.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new Di(null,null,this),this._view=xt.create(this,t||ce.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(e,t){return p.serialize(this._children,e,!0,t)},_changed:function(e,t){if(e&1){var r=this._view;r&&(r._needsUpdate=!0,!r._requested&&r._autoUpdate&&r.requestUpdate())}var a=this._changes;if(a&&t){var u=this._changesById,h=t._id,f=u[h];f?f.flags|=e:a.push(u[h]={item:t,flags:e})}},clear:function(){for(var e=this._children,t=e.length-1;t>=0;t--)e[t].remove()},isEmpty:function(){return!this._children.length},remove:function e(){return e.base.call(this)?(this._view&&this._view.remove(),!0):!1},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.set(e)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new $e({project:this,insert:!0})},getSymbolDefinitions:function(){var e=[],t={};return this.getItems({class:yt,match:function(r){var a=r._definition,u=a._id;return t[u]||(t[u]=!0,e.push(a)),!1}}),e},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var e=this._selectionItems,t=[];for(var r in e){var a=e[r],u=a._selection;u&1&&a.isInserted()?t.push(a):u||this._updateSelection(a)}return t},_updateSelection:function(e){var t=e._id,r=this._selectionItems;e._selection?r[t]!==e&&(this._selectionCount++,r[t]=e):r[t]===e&&(this._selectionCount--,delete r[t])},selectAll:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)e[t].setFullySelected(!0)},deselectAll:function(){var e=this._selectionItems;for(var t in e)e[t].setFullySelected(!1)},addLayer:function(e){return this.insertLayer(o,e)},insertLayer:function(e,t){if(t instanceof $e){t._remove(!1,!0),p.splice(this._children,[t],e,0),t._setProject(this,!0);var r=t._name;r&&t.setName(r),this._changes&&t._changed(5),this._activeLayer||(this._activeLayer=t)}else t=null;return t},_insertItem:function(e,t,r){return t=this.insertLayer(e,t)||(this._activeLayer||this._insertItem(o,new $e(M.NO_INSERT),!0)).insertChild(e,t),r&&t.activate&&t.activate(),t},getItems:function(e){return M._getItems(this,e)},getItem:function(e){return M._getItems(this,e,null,null,!0)[0]||null},importJSON:function(e){this.activate();var t=this._activeLayer;return p.importJSON(e,t&&t.isEmpty()&&t)},removeOn:function(e){var t=this._removeSets;if(t){e==="mouseup"&&(t.mousedrag=null);var r=t[e];if(r){for(var a in r){var u=r[a];for(var h in t){var f=t[h];f&&f!=r&&delete f[u._id]}u.remove()}t[e]=null}}},draw:function(e,t,r){this._updateVersion++,e.save(),t.applyToContext(e);for(var a=this._children,u=new p({offset:new U(0,0),pixelRatio:r,viewMatrix:t.isIdentity()?null:t,matrices:[new Ve],updateMatrix:!0}),h=0,f=a.length;h<f;h++)a[h].draw(e,u);if(e.restore(),this._selectionCount>0){e.save(),e.strokeWidth=1;var d=this._selectionItems,g=this._scope.settings.handleSize,m=this._updateVersion;for(var b in d)d[b]._drawSelection(e,t,g,d,m);e.restore()}}}),M=p.extend(A,{statics:{extend:function e(t){return t._serializeFields&&(t._serializeFields=p.set({},this.prototype._serializeFields,t._serializeFields)),e.base.apply(this,arguments)},INSERT:{insert:!0},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new Ve,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var e=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return p.each(e,function(t){this._events[t]={install:function(r){this.getView()._countItemEvent(r,1)},uninstall:function(r){this.getView()._countItemEvent(r,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:e}})},{initialize:function(){},_initialize:function(e,t){var r=e&&p.isPlainObject(e),a=r&&e.internal===!0,u=this._matrix=new Ve,h=r&&e.project||Ae.project,f=Ae.settings;return this._id=a?null:oe.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&f.applyMatrix,t&&u.translate(t),u._owner=this,this._style=new Di(h._currentStyle,this,h),a||r&&e.insert==!1||!f.insertItems&&!(r&&e.insert==!0)?this._setProject(h):(r&&e.parent||h)._insertItem(o,this,!0),r&&e!==M.NO_INSERT&&e!==M.INSERT&&this.set(e,{internal:!0,insert:!0,project:!0,parent:!0}),r},_serialize:function(e,t){var r={},a=this;function u(h){for(var f in h){var d=a[f];p.equals(d,f==="leading"?h.fontSize*1.2:h[f])||(r[f]=p.serialize(d,e,f!=="data",t))}}return u(this._serializeFields),this instanceof Ge||u(this._style._defaults),[this._class,r]},_changed:function(e){var t=this._symbol,r=this._parent||t,a=this._project;e&8&&(this._bounds=this._position=this._decomposed=o),e&16&&(this._globalMatrix=o),r&&e&72&&M._clearBoundsCache(r),e&2&&M._clearBoundsCache(this),a&&a._changed(e,this),t&&t._changed(e)},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){if(this._name&&this._removeNamed(),e===+e+"")throw new Error("Names consisting only of numbers are not supported.");var t=this._getOwner();if(e&&t){var r=t._children,a=t._namedChildren;(a[e]=a[e]||[]).push(this),e in r||(r[e]=this)}this._name=e||o,this._changed(256)},getStyle:function(){return this._style},setStyle:function(e){this.getStyle().set(e)}},p.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=p.capitalize(e),r="_"+e,a={locked:256,visible:265};this["get"+t]=function(){return this[r]},this["set"+t]=function(u){u!=this[r]&&(this[r]=u,this._changed(a[e]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(e){if(e!==this._selection){this._selection=e;var t=this._project;t&&(t._updateSelection(this),this._changed(257))}},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){if(this._selectChildren){for(var e=this._children,t=0,r=e.length;t<r;t++)if(e[t].isSelected())return!0}return!!(this._selection&1)},setSelected:function(e){if(this._selectChildren)for(var t=this._children,r=0,a=t.length;r<a;r++)t[r].setSelected(e);this._changeSelection(1,e)},isFullySelected:function(){var e=this._children,t=!!(this._selection&1);if(e&&t){for(var r=0,a=e.length;r<a;r++)if(!e[r].isFullySelected())return!1;return!0}return t},setFullySelected:function(e){var t=this._children;if(t)for(var r=0,a=t.length;r<a;r++)t[r].setFullySelected(e);this._changeSelection(1,e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(e){this._data=e},getPosition:function(e){var t=e?U:ze,r=this._position||(this._position=this._getPositionFromBounds());return new t(r.x,r.y,this,"setPosition")},setPosition:function(){this.translate(U.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(e){return this._pivot?this._matrix._transformPoint(this._pivot):(e||this.getBounds()).getCenter(!0)},getPivot:function(){var e=this._pivot;return e?new ze(e.x,e.y,this,"setPivot"):null},setPivot:function(){this._pivot=U.read(arguments,0,{clone:!0,readNull:!0}),this._position=o}},p.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(e,t){this[t]=function(r){return this.getBounds(r,e)}},{beans:!0,getBounds:function(e,t){var r=t||e instanceof Ve,a=p.set({},r?t:e,this._boundsOptions);(!a.stroke||this.getStrokeScaling())&&(a.cacheItem=this);var u=this._getCachedBounds(r&&e,a).rect;return arguments.length?u:new Ye(u.x,u.y,u.width,u.height,this,"setBounds")},setBounds:function(){var e=Ce.read(arguments),t=this.getBounds(),r=this._matrix,a=new Ve,u=e.getCenter();a.translate(u),(e.width!=t.width||e.height!=t.height)&&(r.isInvertible()||(r.set(r._backup||new Ve().translate(r.getTranslation())),t=this.getBounds()),a.scale(t.width!==0?e.width/t.width:0,t.height!==0?e.height/t.height:0)),u=t.getCenter(),a.translate(-u.x,-u.y),this.transform(a)},_getBounds:function(e,t){var r=this._children;return!r||!r.length?new Ce:(M._updateBoundsCache(this,t.cacheItem),M._getBounds(r,e,t))},_getBoundsCacheKey:function(e,t){return[e.stroke?1:0,e.handle?1:0,t?1:0].join("")},_getCachedBounds:function(e,t,r){e=e&&e._orNullIfIdentity();var a=t.internal&&!r,u=t.cacheItem,h=a?null:this._matrix._orNullIfIdentity(),f=u&&(!e||e.equals(h))&&this._getBoundsCacheKey(t,a),d=this._bounds;if(M._updateBoundsCache(this._parent||this._symbol,u),f&&d&&f in d){var g=d[f];return{rect:g.rect.clone(),nonscaling:g.nonscaling}}var m=this._getBounds(e||h,t),b=m.rect||m,S=this._style,x=m.nonscaling||S.hasStroke()&&!S.getStrokeScaling();if(f){d||(this._bounds=d={});var g=d[f]={rect:b.clone(),nonscaling:x,internal:a}}return{rect:b,nonscaling:x}},_getStrokeMatrix:function(e,t){var r=this.getStrokeScaling()?null:t&&t.internal?this:this._parent||this._symbol&&this._symbol._item,a=r?r.getViewMatrix().invert():e;return a&&a._shiftless()},statics:{_updateBoundsCache:function(e,t){if(e&&t){var r=t._id,a=e._boundsCache=e._boundsCache||{ids:{},list:[]};a.ids[r]||(a.list.push(t),a.ids[r]=t)}},_clearBoundsCache:function(e){var t=e._boundsCache;if(t){e._bounds=e._position=e._boundsCache=o;for(var r=0,a=t.list,u=a.length;r<u;r++){var h=a[r];h!==e&&(h._bounds=h._position=o,h._boundsCache&&M._clearBoundsCache(h))}}},_getBounds:function(e,t,r){var a=1/0,u=-a,h=a,f=u,d=!1;r=r||{};for(var g=0,m=e.length;g<m;g++){var b=e[g];if(b._visible&&!b.isEmpty(!0)){var S=b._getCachedBounds(t&&t.appended(b._matrix),r,!0),x=S.rect;a=Math.min(x.x,a),h=Math.min(x.y,h),u=Math.max(x.x+x.width,u),f=Math.max(x.y+x.height,f),S.nonscaling&&(d=!0)}}return{rect:isFinite(a)?new Ce(a,h,u-a,f-h):new Ce,nonscaling:d}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var e=this._decompose();return e?e.rotation:0},setRotation:function(e){var t=this.getRotation();if(t!=null&&e!=null){var r=this._decomposed;this.rotate(e-t),r&&(r.rotation=e,this._decomposed=r)}},getScaling:function(){var e=this._decompose(),t=e&&e.scaling;return new ze(t?t.x:1,t?t.y:1,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=U.read(arguments,0,{clone:!0,readNull:!0});if(e&&t&&!e.equals(t)){var r=this.getRotation(),a=this._decomposed,u=new Ve,h=Q.isZero;if(h(e.x)||h(e.y))u.translate(a.translation),r&&u.rotate(r),u.scale(t.x,t.y),this._matrix.set(u);else{var f=this.getPosition(!0);u.translate(f),r&&u.rotate(r),u.scale(t.x/e.x,t.y/e.y),r&&u.rotate(-r),u.translate(f.negate()),this.transform(u)}a&&(a.scaling=t,this._decomposed=a)}},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},getGlobalMatrix:function(e){var t=this._globalMatrix;if(t)for(var r=this._parent,a=[];r;){if(!r._globalMatrix){t=null;for(var u=0,h=a.length;u<h;u++)a[u]._globalMatrix=null;break}a.push(r),r=r._parent}if(!t){t=this._globalMatrix=this._matrix.clone();var r=this._parent;r&&t.prepend(r.getGlobalMatrix(!0))}return e?t:t.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(e){(this._applyMatrix=this._canApplyMatrix&&!!e)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(e,t){if(this._project!==e){this._project&&this._installEvents(!1),this._project=e;for(var r=this._children,a=0,u=r&&r.length;a<u;a++)r[a]._setProject(e);t=!0}t&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function e(t){e.base.call(this,t);for(var r=this._children,a=0,u=r&&r.length;a<u;a++)r[a]._installEvents(t)},getLayer:function(){for(var e=this;e=e._parent;)if(e instanceof $e)return e;return null},getParent:function(){return this._parent},setParent:function(e){return e.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var e=this._getOwner();return e&&e._children[this._index+1]||null},getPreviousSibling:function(){var e=this._getOwner();return e&&e._children[this._index-1]||null},getIndex:function(){return this._index},setIndex:function(e){var t=this._parent,r=t&&t._children;r&&t.insertChildren(e in r?e:o,[this])},equals:function(e){return e===this||e&&this._class===e._class&&this._style.equals(e._style)&&this._matrix.equals(e._matrix)&&this._locked===e._locked&&this._visible===e._visible&&this._blendMode===e._blendMode&&this._opacity===e._opacity&&this._clipMask===e._clipMask&&this._guide===e._guide&&this._equals(e)||!1},_equals:function(e){return p.equals(this._children,e._children)},clone:function(e){var t=new this.constructor(M.NO_INSERT),r=this._children,a=p.pick(e?e.insert:o,e===o||e===!0),u=p.pick(e?e.deep:o,!0);r&&t.copyAttributes(this),(!r||u)&&t.copyContent(this),r||t.copyAttributes(this),a&&t.insertAbove(this);var h=this._name,f=this._parent;if(h&&f){for(var r=f._children,d=h,g=1;r[h];)h=d+" "+g++;h!==d&&t.setName(h)}return t},copyContent:function(e){for(var t=e._children,r=0,a=t&&t.length;r<a;r++)this.addChild(t[r].clone(!1),!0)},copyAttributes:function(e,t){this.setStyle(e._style);for(var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],a=0,u=r.length;a<u;a++){var h=r[a];e.hasOwnProperty(h)&&(this[h]=e[h])}t||this._matrix.set(e._matrix,!0),this.setApplyMatrix(e._applyMatrix),this.setPivot(e._pivot),this.setSelection(e._selection);var f=e._data,d=e._name;this._data=f?p.clone(f):null,d&&this.setName(d)},rasterize:function(e,t){var r,a,u;p.isPlainObject(e)?(r=e.resolution,a=e.insert,u=e.raster):(r=e,a=t),u||(u=new lt(M.NO_INSERT));var h=this.getStrokeBounds(),f=(r||this.getView().getResolution())/72,d=h.getTopLeft().floor(),g=h.getBottomRight().ceil(),m=new de(g.subtract(d)),b=m.multiply(f);if(u.setSize(b,!0),!b.isZero()){var S=u.getContext(!0),x=new Ve().scale(f).translate(d.negate());S.save(),x.applyToContext(S),this.draw(S,new p({matrices:[x]})),S.restore()}return u._matrix.set(new Ve().translate(d.add(m.divide(2))).scale(1/f)),(a===o||a)&&u.insertAbove(this),u},contains:function(){var e=this._matrix;return e.isInvertible()&&!!this._contains(e._inverseTransform(U.read(arguments)))},_contains:function(e){var t=this._children;if(t){for(var r=t.length-1;r>=0;r--)if(t[r].contains(e))return!0;return!1}return e.isInside(this.getInternalBounds())},isInside:function(){return Ce.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new Ee.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(e,t){return e instanceof M?this._asPathItem().getIntersections(e._asPathItem(),null,t,!0).length>0:!1}},new function(){function e(){var a=arguments;return this._hitTest(U.read(a),Ct.getOptions(a))}function t(){var a=arguments,u=U.read(a),h=Ct.getOptions(a),f=[];return this._hitTest(u,new p({all:f},h)),f}function r(a,u,h,f){var d=this._children;if(d)for(var g=d.length-1;g>=0;g--){var m=d[g],b=m!==f&&m._hitTest(a,u,h);if(b&&!u.all)return b}return null}return pe.inject({hitTest:e,hitTestAll:t,_hitTest:r}),{hitTest:e,hitTestAll:t,_hitTestChildren:r}},{_hitTest:function(e,t,r){if(this._locked||!this._visible||this._guide&&!t.guides||this.isEmpty())return null;var a=this._matrix,u=r?r.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),h=Math.max(t.tolerance,1e-12),f=t._tolerancePadding=new de(Ee._getStrokePadding(h,a._shiftless().invert()));if(e=a._inverseTransform(e),!e||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(f.multiply(2))._containsPoint(e))return null;var d=!(t.guides&&!this._guide||t.selected&&!this.isSelected()||t.type&&t.type!==p.hyphenate(this._class)||t.class&&!(this instanceof t.class)),g=t.match,m=this,b,S;function x(v){return v&&g&&!g(v)&&(v=null),v&&t.all&&t.all.push(v),v}function y(v,I){var R=I?b["get"+I]():m.getPosition();if(e.subtract(R).divide(f).length<=1)return new Ct(v,m,{name:I?p.hyphenate(I):v,point:R})}var L=t.position,P=t.center,T=t.bounds;if(d&&this._parent&&(L||P||T)){if((P||T)&&(b=this.getInternalBounds()),S=L&&y("position")||P&&y("center","Center"),!S&&T)for(var w=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],k=0;k<8&&!S;k++)S=y("bounds",w[k]);S=x(S)}return S||(S=this._hitTestChildren(e,t,u)||d&&x(this._hitTestSelf(e,t,u,this.getStrokeScaling()?null:u._shiftless().invert()))||null),S&&S.point&&(S.point=a.transform(S.point)),S},_hitTestSelf:function(e,t){if(t.fill&&this.hasFill()&&this._contains(e))return new Ct("fill",this)},matches:function(e,t){function r(f,d){for(var g in f)if(f.hasOwnProperty(g)){var m=f[g],b=d[g];if(p.isPlainObject(m)&&p.isPlainObject(b)){if(!r(m,b))return!1}else if(!p.equals(m,b))return!1}return!0}var a=typeof e;if(a==="object"){for(var u in e)if(e.hasOwnProperty(u)&&!this.matches(u,e[u]))return!1;return!0}else{if(a==="function")return e(this);if(e==="match")return t(this);var h=/^(empty|editable)$/.test(e)?this["is"+p.capitalize(e)]():e==="type"?p.hyphenate(this._class):this[e];if(e==="class"){if(typeof t=="function")return this instanceof t;h=this._class}if(typeof t=="function")return!!t(h);if(t){if(t.test)return t.test(h);if(p.isPlainObject(t))return r(t,h)}return p.equals(h,t)}},getItems:function(e){return M._getItems(this,e,this._matrix)},getItem:function(e){return M._getItems(this,e,this._matrix,null,!0)[0]||null},statics:{_getItems:function e(t,r,a,u,h){if(!u){var f=typeof r=="object"&&r,d=f&&f.overlapping,g=f&&f.inside,m=d||g,x=m&&Ce.read([m]);u={items:[],recursive:f&&f.recursive!==!1,inside:!!g,overlapping:!!d,rect:x,path:d&&new Ee.Rectangle({rectangle:x,insert:!1})},f&&(r=p.filter({},r,{recursive:!0,inside:!0,overlapping:!0}))}var b=t._children,S=u.items,x=u.rect;a=x&&(a||new Ve);for(var y=0,L=b&&b.length;y<L;y++){var P=b[y],T=a&&a.appended(P._matrix),w=!0;if(x){var m=P.getBounds(T);if(!x.intersects(m))continue;x.contains(m)||u.overlapping&&(m.contains(x)||u.path.intersects(P,T))||(w=!1)}if(w&&P.matches(r)&&(S.push(P),h)||(u.recursive!==!1&&e(P,r,T,u,h),h&&S.length>0))break}return S}}},{importJSON:function(e){var t=p.importJSON(e,this);return t!==this?this.addChild(t):t},addChild:function(e){return this.insertChild(o,e)},insertChild:function(e,t){var r=t?this.insertChildren(e,[t]):null;return r&&r[0]},addChildren:function(e){return this.insertChildren(this._children.length,e)},insertChildren:function(e,t){var r=this._children;if(r&&t&&t.length>0){t=p.slice(t);for(var a={},u=t.length-1;u>=0;u--){var h=t[u],f=h&&h._id;!h||a[f]?t.splice(u,1):(h._remove(!1,!0),a[f]=!0)}p.splice(r,t,e,0);for(var d=this._project,g=d._changes,u=0,m=t.length;u<m;u++){var h=t[u],b=h._name;h._parent=this,h._setProject(d,!0),b&&h.setName(b),g&&h._changed(5)}this._changed(11)}else t=null;return t},_insertItem:"#insertChild",_insertAt:function(e,t){var r=e&&e._getOwner(),a=e!==this&&r?this:null;return a&&(a._remove(!1,!0),r._insertItem(e._index+t,a)),a},insertAbove:function(e){return this._insertAt(e,1)},insertBelow:function(e){return this._insertAt(e,0)},sendToBack:function(){var e=this._getOwner();return e?e._insertItem(0,this):null},bringToFront:function(){var e=this._getOwner();return e?e._insertItem(o,this):null},appendTop:"#addChild",appendBottom:function(e){return this.insertChild(0,e)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(e){return e._insertItem(o,this)},copyTo:function(e){return this.clone(!1).addTo(e)},reduce:function(e){var t=this._children;if(t&&t.length===1){var r=t[0].reduce(e);return this._parent?(r.insertAbove(this),this.remove()):r.remove(),r}return this},_removeNamed:function(){var e=this._getOwner();if(e){var t=e._children,r=e._namedChildren,a=this._name,u=r[a],h=u?u.indexOf(this):-1;h!==-1&&(t[a]==this&&delete t[a],u.splice(h,1),u.length?t[a]=u[0]:delete r[a])}},_remove:function(e,t){var r=this._getOwner(),a=this._project,u=this._index;return this._style&&this._style._dispose(),r?(this._name&&this._removeNamed(),u!=null&&(a._activeLayer===this&&(a._activeLayer=this.getNextSibling()||this.getPreviousSibling()),p.splice(r._children,null,u,1)),this._installEvents(!1),e&&a._changes&&this._changed(5),t&&r._changed(11,this),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0)},replaceWith:function(e){var t=e&&e.insertBelow(this);return t&&this.remove(),t},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=p.pick(t,this._children.length);for(var r=p.splice(this._children,null,e,t-e),a=r.length-1;a>=0;a--)r[a]._remove(!0,!1);return r.length>0&&this._changed(11),r},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(11)}},isEmpty:function(e){var t=this._children,r=t?t.length:0;if(e){for(var a=0;a<r;a++)if(!t[a].isEmpty(e))return!1;return!0}return!r},isEditable:function(){for(var e=this;e;){if(!e._visible||e._locked)return!1;e=e._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(e){function t(f){var d=[];do d.unshift(f);while(f=f._parent);return d}for(var r=t(this),a=t(e),u=0,h=Math.min(r.length,a.length);u<h;u++)if(r[u]!=a[u])return r[u]._index<a[u]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return this._parent?this._parent.isInserted():!1},isAbove:function(e){return this._getOrder(e)===-1},isBelow:function(e){return this._getOrder(e)===1},isParent:function(e){return this._parent===e},isChild:function(e){return e&&e._parent===this},isDescendant:function(e){for(var t=this;t=t._parent;)if(t===e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isSibling:function(e){return this._parent===e._parent},isGroupedWith:function(e){for(var t=this._parent;t;){if(t._parent&&/^(Group|Layer|CompoundPath)$/.test(t._class)&&e.isDescendant(t))return!0;t=t._parent}return!1}},p.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,a=(t?p:U).read(r),u=U.read(r,0,{readNull:!0});return this.transform(new Ve()[e](a,u||this.getPosition(!0)))}},{translate:function(){var e=new Ve;return this.transform(e.translate.apply(e,arguments))},transform:function(e,t,r){var a=this._matrix,u=e&&!e.isIdentity(),h=r&&this._canApplyMatrix||this._applyMatrix&&(u||!a.isIdentity()||t&&this._children);if(!u&&!h)return this;if(u){!e.isInvertible()&&a.isInvertible()&&(a._backup=a.getValues()),a.prepend(e,!0);var f=this._style,d=f.getFillColor(!0),g=f.getStrokeColor(!0);d&&d.transform(e),g&&g.transform(e)}if(h&&(h=this._transformContent(a,t,r))){var m=this._pivot;m&&a._transformPoint(m,m,!0),a.reset(!0),r&&this._canApplyMatrix&&(this._applyMatrix=!0)}var b=this._bounds,S=this._position;(u||h)&&this._changed(25);var x=u&&b&&e.decompose();if(x&&x.skewing.isZero()&&x.rotation%90===0){for(var y in b){var L=b[y];if(L.nonscaling)delete b[y];else if(h||!L.internal){var P=L.rect;e._transformBounds(P,P)}}this._bounds=b;var T=b[this._getBoundsCacheKey(this._boundsOptions||{})];T&&(this._position=this._getPositionFromBounds(T.rect))}else u&&S&&this._pivot&&(this._position=e._transformPoint(S,S));return this},_transformContent:function(e,t,r){var a=this._children;if(a){for(var u=0,h=a.length;u<h;u++)a[u].transform(e,t,r);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(U.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(U.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(U.read(arguments))},localToParent:function(){return this._matrix._transformPoint(U.read(arguments))},fitBounds:function(e,t){e=Ce.read(arguments);var r=this.getBounds(),a=r.height/r.width,u=e.height/e.width,h=(t?a>u:a<u)?e.width/r.width:e.height/r.height,f=new Ce(new U,new de(r.width*h,r.height*h));f.setCenter(e.getCenter()),this.setBounds(f)}}),{_setStyles:function(e,t,r){var a=this._style,u=this._matrix;if(a.hasFill()&&(e.fillStyle=a.getFillColor().toCanvasStyle(e,u)),a.hasStroke()){e.strokeStyle=a.getStrokeColor().toCanvasStyle(e,u),e.lineWidth=a.getStrokeWidth();var h=a.getStrokeJoin(),f=a.getStrokeCap(),d=a.getMiterLimit();if(h&&(e.lineJoin=h),f&&(e.lineCap=f),d&&(e.miterLimit=d),Ae.support.nativeDash){var g=a.getDashArray(),m=a.getDashOffset();g&&g.length&&("setLineDash"in e?(e.setLineDash(g),e.lineDashOffset=m):(e.mozDash=g,e.mozDashOffset=m))}}if(a.hasShadow()){var b=t.pixelRatio||1,S=r._shiftless().prepend(new Ve().scale(b,b)),x=S.transform(new U(a.getShadowBlur(),0)),y=S.transform(this.getShadowOffset());e.shadowColor=a.getShadowColor().toCanvasStyle(e),e.shadowBlur=x.getLength(),e.shadowOffsetX=y.x,e.shadowOffsetY=y.y}},draw:function(e,t,r){if(this._updateVersion=this._project._updateVersion,!(!this._visible||this._opacity===0)){var a=t.matrices,u=t.viewMatrix,h=this._matrix,f=a[a.length-1].appended(h);if(f.isInvertible()){u=u?u.appended(f):f,a.push(f),t.updateMatrix&&(this._globalMatrix=f);var d=this._blendMode,g=Q.clamp(this._opacity,0,1),m=d==="normal",b=We.nativeModes[d],S=m&&g===1||t.dontStart||t.clip||(b||m&&g<1)&&this._canComposite(),x=t.pixelRatio||1,y,L,P;if(!S){var T=this.getStrokeBounds(u);if(!T.width||!T.height){a.pop();return}P=t.offset,L=t.offset=T.getTopLeft().floor(),y=e,e=ce.getContext(T.getSize().ceil().add(1).multiply(x)),x!==1&&e.scale(x,x)}e.save();var w=r?r.appended(h):this._canScaleStroke&&!this.getStrokeScaling(!0)&&u,k=!S&&t.clipItem,v=!w||k;if(S?(e.globalAlpha=g,b&&(e.globalCompositeOperation=d)):v&&e.translate(-L.x,-L.y),v&&(S?h:u).applyToContext(e),k&&t.clipItem.draw(e,t.extend({clip:!0})),w){e.setTransform(x,0,0,x,0,0);var I=t.offset;I&&e.translate(-I.x,-I.y)}this._draw(e,t,u,w),e.restore(),a.pop(),t.clip&&!t.dontFinish&&e.clip(this.getFillRule()),S||(We.process(d,e,y,g,L.subtract(P).multiply(x)),ce.release(e),t.offset=P)}}},_isUpdated:function(e){var t=this._parent;if(t instanceof ot)return t._isUpdated(e);var r=this._updateVersion===e;return!r&&t&&t._visible&&t._isUpdated(e)&&(this._updateVersion=e,r=!0),r},_drawSelection:function(e,t,r,a,u){var h=this._selection,f=h&1,d=h&2||f&&this._selectBounds,g=h&4;if(this._drawSelected||(f=!1),(f||d||g)&&this._isUpdated(u)){var m,b=this.getSelectedColor(!0)||(m=this.getLayer())&&m.getSelectedColor(!0),S=t.appended(this.getGlobalMatrix(!0)),x=r/2;if(e.strokeStyle=e.fillStyle=b?b.toCanvasStyle(e):"#009dec",f&&this._drawSelected(e,S,a),g){var y=this.getPosition(!0),L=this._parent,P=L?L.localToGlobal(y):y,T=P.x,w=P.y;e.beginPath(),e.arc(T,w,x,0,Math.PI*2,!0),e.stroke();for(var k=[[0,-1],[1,0],[0,1],[-1,0]],v=x,I=r+1,R=0;R<4;R++){var N=k[R],E=N[0],V=N[1];e.moveTo(T+E*v,w+V*v),e.lineTo(T+E*I,w+V*I),e.stroke()}}if(d){var H=S._transformCorners(this.getInternalBounds());e.beginPath();for(var R=0;R<8;R++)e[R?"lineTo":"moveTo"](H[R],H[++R]);e.closePath(),e.stroke();for(var R=0;R<8;R++)e.fillRect(H[R]-x,H[++R]-x,r,r)}}},_canComposite:function(){return!1}},p.each(["down","drag","up","move"],function(e){this["removeOn"+p.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(e){for(var t in e)if(e[t]){var r="mouse"+t,a=this._project,u=a._removeSets=a._removeSets||{};u[r]=u[r]||{},u[r][this._id]=this}return this}}),{tween:function(e,t,r){r||(r=t,t=e,e=null,r||(r=t,t=null));var a=r&&r.easing,u=r&&r.start,h=r!=null&&(typeof r=="number"?r:r.duration),f=new Oe(this,e,t,h,a,u);function d(g){f._handleFrame(g.time*1e3),f.running||this.off("frame",d)}return h&&this.on("frame",d),f},tweenTo:function(e,t){return this.tween(null,e,t)},tweenFrom:function(e,t){return this.tween(e,null,t)}}),Ge=M.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function e(t){e.base.call(this,t),t&2050&&(this._clipItem=o)},_getClipItem:function(){var e=this._clipItem;if(e===o){e=null;for(var t=this._children,r=0,a=t.length;r<a;r++)if(t[r]._clipMask){e=t[r];break}this._clipItem=e}return e},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();t&&t.setClipMask(e)},_getBounds:function e(t,r){var a=this._getClipItem();return a?a._getCachedBounds(a._matrix.prepended(t),p.set({},r,{stroke:!1})):e.base.call(this,t,r)},_hitTestChildren:function e(t,r,a){var u=this._getClipItem();return(!u||u.contains(t))&&e.base.call(this,t,r,a,u)},_draw:function(e,t){var r=t.clip,a=!r&&this._getClipItem();t=t.extend({clipItem:a,clip:!1}),r?(e.beginPath(),t.dontStart=t.dontFinish=!0):a&&a.draw(e,t.extend({clip:!0}));for(var u=this._children,h=0,f=u.length;h<f;h++){var d=u[h];d!==a&&d.draw(e,t)}}}),$e=Ge.extend({_class:"Layer",initialize:function(){Ge.apply(this,arguments)},_getOwner:function(){return this._parent||this._index!=null&&this._project},isInserted:function e(){return this._parent?e.base.call(this):this._index!=null},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),He=M.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,r){this._initialize(t,r)},_equals:function(e){return this._type===e._type&&this._size.equals(e._size)&&p.equals(this._radius,e._radius)},copyContent:function(e){this.setType(e._type),this.setSize(e._size),this.setRadius(e._radius)},getType:function(){return this._type},setType:function(e){this._type=e},getShape:"#getType",setShape:"#setType",getSize:function(){var e=this._size;return new be(e.width,e.height,this,"setSize")},setSize:function(){var e=de.read(arguments);if(!this._size)this._size=e.clone();else if(!this._size.equals(e)){var t=this._type,r=e.width,a=e.height;t==="rectangle"?this._radius.set(de.min(this._radius,e.divide(2).abs())):t==="circle"?(r=a=(r+a)/2,this._radius=r/2):t==="ellipse"&&this._radius._set(r/2,a/2),this._size._set(r,a),this._changed(9)}},getRadius:function(){var e=this._radius;return this._type==="circle"?e:new be(e.width,e.height,this,"setRadius")},setRadius:function(e){var t=this._type;if(t==="circle"){if(e===this._radius)return;var r=e*2;this._radius=e,this._size._set(r,r)}else if(e=de.read(arguments),!this._radius)this._radius=e.clone();else{if(this._radius.equals(e))return;if(this._radius.set(e),t==="rectangle"){var r=de.max(this._size,e.multiply(2));this._size.set(r)}else t==="ellipse"&&this._size._set(e.width*2,e.height*2)}this._changed(9)},isEmpty:function(){return!1},toPath:function(e){var t=new Ee[p.capitalize(this._type)]({center:new U,size:this._size,radius:this._radius,insert:!1});return t.copyAttributes(this),Ae.settings.applyMatrix&&t.setApplyMatrix(!0),(e===o||e)&&t.insertAbove(this),t},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(e,t,r,a){var u=this._style,h=u.hasFill(),f=u.hasStroke(),d=t.dontFinish||t.clip,g=!a;if(h||f||d){var m=this._type,b=this._radius,S=m==="circle";if(t.dontStart||e.beginPath(),g&&S)e.arc(0,0,b,0,Math.PI*2,!0);else{var x=S?b:b.width,y=S?b:b.height,L=this._size,P=L.width,T=L.height;if(g&&m==="rectangle"&&x===0&&y===0)e.rect(-P/2,-T/2,P,T);else{var w=P/2,k=T/2,v=1-.5522847498307936,I=x*v,R=y*v,N=[-w,-k+y,-w,-k+R,-w+I,-k,-w+x,-k,w-x,-k,w-I,-k,w,-k+R,w,-k+y,w,k-y,w,k-R,w-I,k,w-x,k,-w+x,k,-w+I,k,-w,k-R,-w,k-y];a&&a.transform(N,N,32),e.moveTo(N[0],N[1]),e.bezierCurveTo(N[2],N[3],N[4],N[5],N[6],N[7]),w!==x&&e.lineTo(N[8],N[9]),e.bezierCurveTo(N[10],N[11],N[12],N[13],N[14],N[15]),k!==y&&e.lineTo(N[16],N[17]),e.bezierCurveTo(N[18],N[19],N[20],N[21],N[22],N[23]),w!==x&&e.lineTo(N[24],N[25]),e.bezierCurveTo(N[26],N[27],N[28],N[29],N[30],N[31])}}e.closePath()}!d&&(h||f)&&(this._setStyles(e,t,r),h&&(e.fill(u.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),f&&e.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(e,t){var r=new Ce(this._size).setCenter(0,0),a=this._style,u=t.stroke&&a.hasStroke()&&a.getStrokeWidth();return e&&(r=e._transformBounds(r)),u?r.expand(Ee._getStrokePadding(u,this._getStrokeMatrix(e,t))):r}},new function(){function e(r,a,u){var h=r._radius;if(!h.isZero())for(var f=r._size.divide(2),d=1;d<=4;d++){var g=new U(d>1&&d<4?-1:1,d>2?-1:1),m=g.multiply(f),b=m.subtract(g.multiply(h)),S=new Ce(u?m.add(g.multiply(u)):m,b);if(S.contains(a))return{point:b,quadrant:d}}}function t(r,a,u,h){var f=r.divide(a);return(!h||f.isInQuadrant(h))&&f.subtract(f.normalize()).multiply(a).divide(u).length<=1}return{_contains:function r(a){if(this._type==="rectangle"){var u=e(this,a);return u?a.subtract(u.point).divide(this._radius).getLength()<=1:r.base.call(this,a)}else return a.divide(this.size).getLength()<=.5},_hitTestSelf:function r(a,u,h,f){var d=!1,g=this._style,m=u.stroke&&g.hasStroke(),b=u.fill&&g.hasFill();if(m||b){var S=this._type,x=this._radius,y=m?g.getStrokeWidth()/2:0,L=u._tolerancePadding.add(Ee._getStrokePadding(y,!g.getStrokeScaling()&&f));if(S==="rectangle"){var P=L.multiply(2),T=e(this,a,P);if(T)d=t(a.subtract(T.point),x,L,T.quadrant);else{var w=new Ce(this._size).setCenter(0,0),k=w.expand(P),v=w.expand(P.negate());d=k._containsPoint(a)&&!v._containsPoint(a)}}else d=t(a,x,L)}return d?new Ct(m?"stroke":"fill",this):r.base.apply(this,arguments)}}},{statics:new function(){function e(t,r,a,u,h){var f=p.create(He.prototype);return f._type=t,f._size=a,f._radius=u,f._initialize(p.getNamed(h),r),f}return{Circle:function(){var t=arguments,r=U.readNamed(t,"center"),a=p.readNamed(t,"radius");return e("circle",r,new de(a*2),a,t)},Rectangle:function(){var t=arguments,r=Ce.readNamed(t,"rectangle"),a=de.min(de.readNamed(t,"radius"),r.getSize(!0).divide(2));return e("rectangle",r.getCenter(!0),r.getSize(!0),a,t)},Ellipse:function(){var t=arguments,r=He._readEllipse(t),a=r.radius;return e("ellipse",r.center,a.multiply(2),a,t)},_readEllipse:function(t){var r,a;if(p.hasNamed(t,"radius"))r=U.readNamed(t,"center"),a=de.readNamed(t,"radius");else{var u=Ce.readNamed(t,"rectangle");r=u.getCenter(!0),a=u.getSize(!0).divide(2)}return{center:r,radius:a}}}}}),lt=M.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:"low",beans:!0,initialize:function(t,r){if(!this._initialize(t,r!==o&&U.read(arguments))){var a,u=typeof t,h=u==="string"?_.getElementById(t):u==="object"?t:null;if(h&&h!==M.NO_INSERT){if(h.getContext||h.naturalHeight!=null)a=h;else if(h){var f=de.read(arguments);f.isZero()||(a=ce.getCanvas(f))}}a?this.setImage(a):this.setSource(t)}this._size||(this._size=new de,this._loaded=!1)},_equals:function(e){return this.getSource()===e.getSource()},copyContent:function(e){var t=e._image,r=e._canvas;if(t)this._setImage(t);else if(r){var a=ce.getCanvas(e._size);a.getContext("2d").drawImage(r,0,0),this._setImage(a)}this._crossOrigin=e._crossOrigin},getSize:function(){var e=this._size;return new be(e?e.width:0,e?e.height:0,this,"setSize")},setSize:function(e,t){var r=de.read(arguments);if(r.equals(this._size))t&&this.clear();else if(r.width>0&&r.height>0){var a=!t&&this.getElement();this._setImage(ce.getCanvas(r)),a&&this.getContext(!0).drawImage(a,0,0,r.width,r.height)}else this._canvas&&ce.release(this._canvas),this._size=r.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(e){this.setSize(e,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(e){this.setSize(this.getWidth(),e)},getLoaded:function(){return this._loaded},isEmpty:function(){var e=this._size;return!e||e.width===0&&e.height===0},getResolution:function(){var e=this._matrix,t=new U(0,0).transform(e),r=new U(1,0).transform(e).subtract(t),a=new U(0,1).transform(e).subtract(t);return new de(72/r.getLength(),72/a.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(e){var t=this;function r(a){var u=t.getView(),h=a&&a.type||"load";u&&t.responds(h)&&(Ae=u._scope,t.emit(h,new Y(a)))}this._setImage(e),this._loaded?setTimeout(r,0):e&&pt.add(e,{load:function(a){t._setImage(e),r(a)},error:r})},_setImage:function(e){this._canvas&&ce.release(this._canvas),e&&e.getContext?(this._image=null,this._canvas=e,this._loaded=!0):(this._image=e,this._canvas=null,this._loaded=!!(e&&e.src&&e.complete)),this._size=new de(e?e.naturalWidth||e.width:0,e?e.naturalHeight||e.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var e=ce.getContext(this._size);try{this._image&&e.drawImage(this._image,0,0),this._canvas=e.canvas}catch{ce.release(e)}}return this._canvas},setCanvas:"#setImage",getContext:function(e){return this._context||(this._context=this.getCanvas().getContext("2d")),e&&(this._image=null,this._changed(1025)),this._context},setContext:function(e){this._context=e},getSource:function(){var e=this._image;return e&&e.src||this.toDataURL()},setSource:function(e){var t=new s.Image,r=this._crossOrigin;r&&(t.crossOrigin=r),e&&(t.src=e),this.setImage(t)},getCrossOrigin:function(){var e=this._image;return e&&e.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(e){this._crossOrigin=e;var t=this._image;t&&(t.crossOrigin=e)},getSmoothing:function(){return this._smoothing},setSmoothing:function(e){this._smoothing=typeof e=="string"?e:e?"low":"off",this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var e=Ce.read(arguments),t=ce.getContext(e.getSize());return t.drawImage(this.getCanvas(),e.x,e.y,e.width,e.height,0,0,e.width,e.height),t.canvas},getSubRaster:function(){var e=Ce.read(arguments),t=new lt(M.NO_INSERT);return t._setImage(this.getSubCanvas(e)),t.translate(e.getCenter().subtract(this.getSize().divide(2))),t._matrix.prepend(this._matrix),t.insertAbove(this),t},toDataURL:function(){var e=this._image,t=e&&e.src;if(/^data:/.test(t))return t;var r=this.getCanvas();return r?r.toDataURL.apply(r,arguments):null},drawImage:function(e){var t=U.read(arguments,1);this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){var t,r;if(e?e instanceof me?(r=e,t=e.getBounds()):typeof e=="object"&&("width"in e?t=new Ce(e):"x"in e&&(t=new Ce(e.x-.5,e.y-.5,1,1))):t=this.getBounds(),!t)return null;var a=32,u=Math.min(t.width,a),h=Math.min(t.height,a),f=lt._sampleContext;f?f.clearRect(0,0,a+1,a+1):f=lt._sampleContext=ce.getContext(new de(a)),f.save();var d=new Ve().scale(u/t.width,h/t.height).translate(-t.x,-t.y);d.applyToContext(f),r&&r.draw(f,new p({clip:!0,matrices:[d]})),this._matrix.applyToContext(f);var g=this.getElement(),m=this._size;g&&f.drawImage(g,-m.width/2,-m.height/2),f.restore();for(var b=f.getImageData(.5,.5,Math.ceil(u),Math.ceil(h)).data,S=[0,0,0],x=0,y=0,L=b.length;y<L;y+=4){var P=b[y+3];x+=P,P/=255,S[0]+=b[y]*P,S[1]+=b[y+1]*P,S[2]+=b[y+2]*P}for(var y=0;y<3;y++)S[y]/=x;return x?Pt.read(S):null},getPixel:function(){var e=U.read(arguments),t=this.getContext().getImageData(e.x,e.y,1,1).data;return new Pt("rgb",[t[0]/255,t[1]/255,t[2]/255],t[3]/255)},setPixel:function(){var e=arguments,t=U.read(e),r=Pt.read(e),a=r._convert("rgb"),u=r._alpha,h=this.getContext(!0),f=h.createImageData(1,1),d=f.data;d[0]=a[0]*255,d[1]=a[1]*255,d[2]=a[2]*255,d[3]=u!=null?u*255:255,h.putImageData(f,t.x,t.y)},clear:function(){var e=this._size;this.getContext(!0).clearRect(0,0,e.width+1,e.height+1)},createImageData:function(){var e=de.read(arguments);return this.getContext().createImageData(e.width,e.height)},getImageData:function(){var e=Ce.read(arguments);return e.isEmpty()&&(e=new Ce(this._size)),this.getContext().getImageData(e.x,e.y,e.width,e.height)},putImageData:function(e){var t=U.read(arguments,1);this.getContext(!0).putImageData(e,t.x,t.y)},setImageData:function(e){this.setSize(e),this.getContext(!0).putImageData(e,0,0)},_getBounds:function(e,t){var r=new Ce(this._size).setCenter(0,0);return e?e._transformBounds(r):r},_hitTestSelf:function(e){if(this._contains(e)){var t=this;return new Ct("pixel",t,{offset:e.add(t._size.divide(2)).round(),color:{get:function(){return t.getPixel(this.offset)}}})}},_draw:function(e,t,r){var a=this.getElement();if(a&&a.width>0&&a.height>0){e.globalAlpha=Q.clamp(this._opacity,0,1),this._setStyles(e,t,r);var u=this._smoothing,h=u==="off";mt.setPrefixed(e,h?"imageSmoothingEnabled":"imageSmoothingQuality",h?!1:u),e.drawImage(a,-this._size.width/2,-this._size.height/2)}},_canComposite:function(){return!0}}),yt=M.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,r){this._initialize(t,r!==o&&U.read(arguments,1))||this.setDefinition(t instanceof ut?t:new ut(t))},_equals:function(e){return this._definition===e._definition},copyContent:function(e){this.setDefinition(e._definition)},getDefinition:function(){return this._definition},setDefinition:function(e){this._definition=e,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(e,t){var r=this._definition._item;return r._getCachedBounds(r._matrix.prepended(e),t)},_hitTestSelf:function(e,t,r){var a=t.extend({all:!1}),u=this._definition._item._hitTest(e,a,r);return u&&(u.item=this),u},_draw:function(e,t){this._definition._item.draw(e,t)}}),ut=p.extend({_class:"SymbolDefinition",initialize:function(t,r){this._id=oe.get(),this.project=Ae.project,t&&this.setItem(t,r)},_serialize:function(e,t){return t.add(this,function(){return p.serialize([this._class,this._item],e,!1,t)})},_changed:function(e){e&8&&M._clearBoundsCache(this),e&1&&this.project._changed(e)},getItem:function(){return this._item},setItem:function(e,t){e._symbol&&(e=e.clone()),this._item&&(this._item._symbol=null),this._item=e,e.remove(),e.setSelected(!1),t||e.setPosition(new U),e._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(e){return new yt(this,e)},clone:function(){return new ut(this._item.clone(!1))},equals:function(e){return e===this||e&&this._item.equals(e._item)||!1}}),Ct=p.extend({_class:"HitResult",initialize:function(t,r,a){this.type=t,this.item=r,a&&this.inject(a)},statics:{getOptions:function(e){var t=e&&p.read(e);return new p({type:null,tolerance:Ae.settings.hitTolerance,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},t)}}}),qe=p.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,r,a,u,h,f){var d=arguments.length,g,m,b,S;d>0&&(t==null||typeof t=="object"?d===1&&t&&"point"in t?(g=t.point,m=t.handleIn,b=t.handleOut,S=t.selection):(g=t,m=r,b=a,S=u):(g=[t,r],m=a!==o?[a,u]:null,b=h!==o?[h,f]:null)),new _i(g,this,"_point"),new _i(m,this,"_handleIn"),new _i(b,this,"_handleOut"),S&&this.setSelection(S)},_serialize:function(e,t){var r=this._point,a=this._selection,u=a||this.hasHandles()?[r,this._handleIn,this._handleOut]:r;return a&&u.push(a),p.serialize(u,e,!0,t)},_changed:function(e){var t=this._path;if(t){var r=t._curves,a=this._index,u;r&&((!e||e===this._point||e===this._handleIn)&&(u=a>0?r[a-1]:t._closed?r[r.length-1]:null)&&u._changed(),(!e||e===this._point||e===this._handleOut)&&(u=r[a])&&u._changed()),t._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(U.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(U.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(U.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var e=this._handleIn,t=this._handleOut;return!e.isZero()&&!t.isZero()&&e.isCollinear(t)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(e){var t=this._selection,r=this._path;this._selection=e=e||0,r&&e!==t&&(r._updateSelection(this,t,e),r._changed(257))},_changeSelection:function(e,t){var r=this._selection;this.setSelection(t?r|e:r&~e)},isSelected:function(){return!!(this._selection&7)},setSelected:function(e){this._changeSelection(7,e)},getIndex:function(){return this._index!==o?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var e=this._path,t=this._index;return e?(t>0&&!e._closed&&t===e._segments.length-1&&t--,e.getCurves()[t]||null):null},getLocation:function(){var e=this.getCurve();return e?new Re(e,this===e._segment1?0:1):null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},smooth:function(e,t,r){var a=e||{},u=a.type,h=a.factor,f=this.getPrevious(),d=this.getNext(),g=(f||this)._point,m=this._point,b=(d||this)._point,S=g.getDistance(m),x=m.getDistance(b);if(!u||u==="catmull-rom"){var y=h===o?.5:h,L=Math.pow(S,y),P=L*L,T=Math.pow(x,y),w=T*T;if(!t&&f){var k=2*w+3*T*L+P,v=3*T*(T+L);this.setHandleIn(v!==0?new U((w*g._x+k*m._x-P*b._x)/v-m._x,(w*g._y+k*m._y-P*b._y)/v-m._y):new U)}if(!r&&d){var k=2*P+3*L*T+w,v=3*L*(L+T);this.setHandleOut(v!==0?new U((P*b._x+k*m._x-w*g._x)/v-m._x,(P*b._y+k*m._y-w*g._y)/v-m._y):new U)}}else if(u==="geometric"){if(f&&d){var I=g.subtract(b),R=h===o?.4:h,N=R*S/(S+x);t||this.setHandleIn(I.multiply(N)),r||this.setHandleOut(I.multiply(N-R))}}else throw new Error("Smoothing method '"+u+"' not supported.")},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var e=this._path;return e&&this._index===e._segments.length-1||!1},reverse:function(){var e=this._handleIn,t=this._handleOut,r=e.clone();e.set(t),t.set(r)},reversed:function(){return new qe(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},clone:function(){return new qe(this._point,this._handleIn,this._handleOut)},equals:function(e){return e===this||e&&this._class===e._class&&this._point.equals(e._point)&&this._handleIn.equals(e._handleIn)&&this._handleOut.equals(e._handleOut)||!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},transform:function(e){this._transformCoordinates(e,new Array(6),!0),this._changed()},interpolate:function(e,t,r){var a=1-r,u=r,h=e._point,f=t._point,d=e._handleIn,g=t._handleIn,m=t._handleOut,b=e._handleOut;this._point._set(a*h._x+u*f._x,a*h._y+u*f._y,!0),this._handleIn._set(a*d._x+u*g._x,a*d._y+u*g._y,!0),this._handleOut._set(a*b._x+u*m._x,a*b._y+u*m._y,!0),this._changed()},_transformCoordinates:function(e,t,r){var a=this._point,u=!r||!this._handleIn.isZero()?this._handleIn:null,h=!r||!this._handleOut.isZero()?this._handleOut:null,f=a._x,d=a._y,g=2;return t[0]=f,t[1]=d,u&&(t[g++]=u._x+f,t[g++]=u._y+d),h&&(t[g++]=h._x+f,t[g++]=h._y+d),e&&(e._transformCoordinates(t,t,g/2),f=t[0],d=t[1],r?(a._x=f,a._y=d,g=2,u&&(u._x=t[g++]-f,u._y=t[g++]-d),h&&(h._x=t[g++]-f,h._y=t[g++]-d)):(u||(t[g++]=f,t[g++]=d),h||(t[g++]=f,t[g++]=d))),t}}),_i=U.extend({initialize:function(t,r,a){var u,h,f;if(!t)u=h=0;else if((u=t[0])!==o)h=t[1];else{var d=t;(u=d.x)===o&&(d=U.read(arguments),u=d.x),h=d.y,f=d.selected}this._x=u,this._y=h,this._owner=r,r[a]=this,f&&this.setSelected(!0)},_set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){var e=Q.isZero;return e(this._x)&&e(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(e){this._owner._changeSelection(this._getSelection(),e)},_getSelection:function(){var e=this._owner;return this===e._point?1:this===e._handleIn?2:this===e._handleOut?4:0}}),ge=p.extend({_class:"Curve",beans:!0,initialize:function(t,r,a,u,h,f,d,g){var m=arguments.length,b,S,x,y,L,P;m===3?(this._path=t,b=r,S=a):m?m===1?"segment1"in t?(b=new qe(t.segment1),S=new qe(t.segment2)):"point1"in t?(x=t.point1,L=t.handle1,P=t.handle2,y=t.point2):Array.isArray(t)&&(x=[t[0],t[1]],y=[t[6],t[7]],L=[t[2]-t[0],t[3]-t[1]],P=[t[4]-t[6],t[5]-t[7]]):m===2?(b=new qe(t),S=new qe(r)):m===4?(x=t,L=r,P=a,y=u):m===8&&(x=[t,r],y=[d,g],L=[a-t,u-r],P=[h-d,f-g]):(b=new qe,S=new qe),this._segment1=b||new qe(x,null,L),this._segment2=S||new qe(y,P,null)},_serialize:function(e,t){return p.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],e,!0,t)},_changed:function(){this._length=this._bounds=o},clone:function(){return new ge(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},classify:function(){return ge.classify(this.getValues())},remove:function(){var e=!1;if(this._path){var t=this._segment2,r=t._handleOut;e=t.remove(),e&&this._segment1._handleOut.set(r)}return e},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(U.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(U.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(U.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(U.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var e=this._path;return e&&this._segment1._index===e._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(e){this.getPoint1().setSelected(e),this.getHandle1().setSelected(e),this.getHandle2().setSelected(e),this.getPoint2().setSelected(e)},getValues:function(e){return ge.getValues(this._segment1,this._segment2,e)},getPoints:function(){for(var e=this.getValues(),t=[],r=0;r<8;r+=2)t.push(new U(e[r],e[r+1]));return t}},{getLength:function(){return this._length==null&&(this._length=ge.getLength(this.getValues(),0,1)),this._length},getArea:function(){return ge.getArea(this.getValues())},getLine:function(){return new Fe(this._segment1._point,this._segment2._point)},getPart:function(e,t){return new ge(ge.getPart(this.getValues(),e,t))},getPartLength:function(e,t){return ge.getLength(this.getValues(),e,t)},divideAt:function(e){return this.divideAtTime(e&&e.curve===this?e.time:this.getTimeAt(e))},divideAtTime:function(e,t){var r=1e-8,a=1-r,u=null;if(e>=r&&e<=a){var h=ge.subdivide(this.getValues(),e),f=h[0],d=h[1],g=t||this.hasHandles(),m=this._segment1,b=this._segment2,S=this._path;g&&(m._handleOut._set(f[2]-f[0],f[3]-f[1]),b._handleIn._set(d[4]-d[6],d[5]-d[7]));var x=f[6],y=f[7],L=new qe(new U(x,y),g&&new U(f[4]-x,f[5]-y),g&&new U(d[2]-x,d[3]-y));S?(S.insert(m._index+1,L),u=this.getNext()):(this._segment2=L,this._changed(),u=new ge(L,b))}return u},splitAt:function(e){var t=this._path;return t?t.splitAt(e):null},splitAtTime:function(e){return this.splitAt(this.getLocationAtTime(e))},divide:function(e,t){return this.divideAtTime(e===o?.5:t?e:this.getTimeAt(e))},split:function(e,t){return this.splitAtTime(e===o?.5:t?e:this.getTimeAt(e))},reversed:function(){return new ge(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(e,t,r,a){var u=e._point,h=e._handleOut,f=t._handleIn,d=t._point,g=u.x,m=u.y,b=d.x,S=d.y,x=a?[g,m,g,m,b,S,b,S]:[g,m,g+h._x,m+h._y,b+f._x,S+f._y,b,S];return r&&r._transformCoordinates(x,x,4),x},subdivide:function(e,t){var r=e[0],a=e[1],u=e[2],h=e[3],f=e[4],d=e[5],g=e[6],m=e[7];t===o&&(t=.5);var b=1-t,S=b*r+t*u,x=b*a+t*h,y=b*u+t*f,L=b*h+t*d,P=b*f+t*g,T=b*d+t*m,w=b*S+t*y,k=b*x+t*L,v=b*y+t*P,I=b*L+t*T,R=b*w+t*v,N=b*k+t*I;return[[r,a,S,x,w,k,R,N],[R,N,v,I,P,T,g,m]]},getMonoCurves:function(e,t){var r=[],a=t?0:1,u=e[a+0],h=e[a+2],f=e[a+4],d=e[a+6];if(u>=h==h>=f&&h>=f==f>=d||ge.isStraight(e))r.push(e);else{var g=3*(h-f)-u+d,m=2*(u+f)-4*h,b=h-u,S=1e-8,x=1-S,y=[],L=Q.solveQuadratic(g,m,b,y,S,x);if(!L)r.push(e);else{y.sort();var P=y[0],T=ge.subdivide(e,P);r.push(T[0]),L>1&&(P=(y[1]-P)/(1-P),T=ge.subdivide(T[1],P),r.push(T[0])),r.push(T[1])}}return r},solveCubic:function(e,t,r,a,u,h){var f=e[t],d=e[t+2],g=e[t+4],m=e[t+6],b=0;if(!(f<r&&m<r&&d<r&&g<r||f>r&&m>r&&d>r&&g>r)){var S=3*(d-f),x=3*(g-d)-S,y=m-f-S-x;b=Q.solveCubic(y,x,S,f-r,a,u,h)}return b},getTimeOf:function(e,t){var r=new U(e[0],e[1]),a=new U(e[6],e[7]),u=1e-12,h=1e-7,f=t.isClose(r,u)?0:t.isClose(a,u)?1:null;if(f===null)for(var d=[t.x,t.y],g=[],m=0;m<2;m++)for(var b=ge.solveCubic(e,m,d[m],g,0,1),S=0;S<b;S++){var x=g[S];if(t.isClose(ge.getPoint(e,x),h))return x}return t.isClose(r,h)?0:t.isClose(a,h)?1:null},getNearestTime:function(e,t){if(ge.isStraight(e)){var r=e[0],a=e[1],u=e[6],h=e[7],f=u-r,d=h-a,g=f*f+d*d;if(g===0)return 0;var m=((t.x-r)*f+(t.y-a)*d)/g;return m<1e-12?0:m>.999999999999?1:ge.getTimeOf(e,new U(r+m*f,a+m*d))}var b=100,S=1/0,x=0;function y(T){if(T>=0&&T<=1){var w=t.getDistance(ge.getPoint(e,T),!0);if(w<S)return S=w,x=T,!0}}for(var L=0;L<=b;L++)y(L/b);for(var P=1/(b*2);P>1e-8;)!y(x-P)&&!y(x+P)&&(P/=2);return x},getPart:function(e,t,r){var a=t>r;if(a){var u=t;t=r,r=u}return t>0&&(e=ge.subdivide(e,t)[1]),r<1&&(e=ge.subdivide(e,(r-t)/(1-t))[0]),a?[e[6],e[7],e[4],e[5],e[2],e[3],e[0],e[1]]:e},isFlatEnough:function(e,t){var r=e[0],a=e[1],u=e[2],h=e[3],f=e[4],d=e[5],g=e[6],m=e[7],b=3*u-2*r-g,S=3*h-2*a-m,x=3*f-2*g-r,y=3*d-2*m-a;return Math.max(b*b,x*x)+Math.max(S*S,y*y)<=16*t*t},getArea:function(e){var t=e[0],r=e[1],a=e[2],u=e[3],h=e[4],f=e[5],d=e[6],g=e[7];return 3*((g-r)*(a+h)-(d-t)*(u+f)+u*(t-h)-a*(r-f)+g*(h+t/3)-d*(f+r/3))/20},getBounds:function(e){for(var t=e.slice(0,2),r=t.slice(),a=[0,0],u=0;u<2;u++)ge._addBounds(e[u],e[u+2],e[u+4],e[u+6],u,0,t,r,a);return new Ce(t[0],t[1],r[0]-t[0],r[1]-t[1])},_addBounds:function(e,t,r,a,u,h,f,d,g){function m(R,N){var E=R-N,V=R+N;E<f[u]&&(f[u]=E),V>d[u]&&(d[u]=V)}h/=2;var b=f[u]+h,S=d[u]-h;if(e<b||t<b||r<b||a<b||e>S||t>S||r>S||a>S)if(t<e!=t<a&&r<e!=r<a)m(e,0),m(a,0);else{var x=3*(t-r)-e+a,y=2*(e+r)-4*t,L=t-e,P=Q.solveQuadratic(x,y,L,g),T=1e-8,w=1-T;m(a,0);for(var k=0;k<P;k++){var v=g[k],I=1-v;T<=v&&v<=w&&m(I*I*I*e+3*I*I*v*t+3*I*v*v*r+v*v*v*a,h)}}}}},p.each(["getBounds","getStrokeBounds","getHandleBounds"],function(e){this[e]=function(){this._bounds||(this._bounds={});var t=this._bounds[e];return t||(t=this._bounds[e]=Ee[e]([this._segment1,this._segment2],!1,this._path)),t.clone()}},{}),p.each({isStraight:function(e,t,r,a){if(t.isZero()&&r.isZero())return!0;var u=a.subtract(e);if(u.isZero())return!1;if(u.isCollinear(t)&&u.isCollinear(r)){var h=new Fe(e,a),f=1e-7;if(h.getDistance(e.add(t))<f&&h.getDistance(a.add(r))<f){var d=u.dot(u),g=u.dot(t)/d,m=u.dot(r)/d;return g>=0&&g<=1&&m<=0&&m>=-1}}return!1},isLinear:function(e,t,r,a){var u=a.subtract(e).divide(3);return t.equals(u)&&r.negate().equals(u)}},function(e,t){this[t]=function(r){var a=this._segment1,u=this._segment2;return e(a._point,a._handleOut,u._handleIn,u._point,r)},this.statics[t]=function(r,a){var u=r[0],h=r[1],f=r[6],d=r[7];return e(new U(u,h),new U(r[2]-u,r[3]-h),new U(r[4]-f,r[5]-d),new U(f,d),a)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(e){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(e||0)},isCollinear:function(e){return e&&this.isStraight()&&e.isStraight()&&this.getLine().isCollinear(e.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(e,t){return this.getLocationAtTime(t?e:this.getTimeAt(e))},getLocationAtTime:function(e){return e!=null&&e>=0&&e<=1?new Re(this,e):null},getTimeAt:function(e,t){return ge.getTimeAt(this.getValues(),e,t)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var e=U.read(arguments);return e.isZero()?[]:ge.getTimesWithTangent(this.getValues(),e)},getOffsetAtTime:function(e){return this.getPartLength(0,e)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(U.read(arguments)))},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getTimeOf:function(){return ge.getTimeOf(this.getValues(),U.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var e=U.read(arguments),t=this.getValues(),r=ge.getNearestTime(t,e),a=ge.getPoint(t,r);return new Re(this,r,a,null,e.getDistance(a))},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()}},new function(){var e=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return p.each(e,function(t){this[t+"At"]=function(r,a){var u=this.getValues();return ge[t](u,a?r:ge.getTimeAt(u,r))},this[t+"AtTime"]=function(r){return ge[t](this.getValues(),r)}},{statics:{_evaluateMethods:e}})},new function(){function e(a){var u=a[0],h=a[1],f=a[2],d=a[3],g=a[4],m=a[5],b=a[6],S=a[7],x=9*(f-g)+3*(b-u),y=6*(u+g)-12*f,L=3*(f-u),P=9*(d-m)+3*(S-h),T=6*(h+m)-12*d,w=3*(d-h);return function(k){var v=(x*k+y)*k+L,I=(P*k+T)*k+w;return Math.sqrt(v*v+I*I)}}function t(a,u){return Math.max(2,Math.min(16,Math.ceil(Math.abs(u-a)*32)))}function r(a,u,h,f){if(u==null||u<0||u>1)return null;var d=a[0],g=a[1],m=a[2],b=a[3],S=a[4],x=a[5],y=a[6],L=a[7],P=Q.isZero;P(m-d)&&P(b-g)&&(m=d,b=g),P(S-y)&&P(x-L)&&(S=y,x=L);var T=3*(m-d),w=3*(S-m)-T,k=y-d-T-w,v=3*(b-g),I=3*(x-b)-v,R=L-g-v-I,N,E;if(h===0)N=u===0?d:u===1?y:((k*u+w)*u+T)*u+d,E=u===0?g:u===1?L:((R*u+I)*u+v)*u+g;else{var V=1e-8,H=1-V;if(u<V?(N=T,E=v):u>H?(N=3*(y-S),E=3*(L-x)):(N=(3*k*u+2*w)*u+T,E=(3*R*u+2*I)*u+v),f){N===0&&E===0&&(u<V||u>H)&&(N=S-m,E=x-b);var q=Math.sqrt(N*N+E*E);q&&(N/=q,E/=q)}if(h===3){var S=6*k*u+2*w,x=6*R*u+2*I,K=Math.pow(N*N+E*E,3/2);N=K!==0?(N*x-E*S)/K:0,E=0}}return h===2?new U(E,-N):new U(N,E)}return{statics:{classify:function(a){var u=a[0],h=a[1],f=a[2],d=a[3],g=a[4],m=a[5],b=a[6],S=a[7],x=u*(S-m)+h*(g-b)+b*m-S*g,y=f*(h-S)+d*(b-u)+u*S-h*b,L=g*(d-h)+m*(u-f)+f*h-d*u,P=3*L,T=P-y,w=T-y+x,k=Math.sqrt(w*w+T*T+P*P),v=k!==0?1/k:0,I=Q.isZero,R="serpentine";w*=v,T*=v,P*=v;function N(q,K,B){var W=K!==o,$=W&&K>0&&K<1,X=W&&B>0&&B<1;return W&&(!($||X)||q==="loop"&&!($&&X))&&(q="arch",$=X=!1),{type:q,roots:$||X?$&&X?K<B?[K,B]:[B,K]:[$?K:B]:null}}if(I(w))return I(T)?N(I(P)?"line":"quadratic"):N(R,P/(3*T));var E=3*T*T-4*w*P;if(I(E))return N("cusp",T/(2*w));var V=E>0?Math.sqrt(E/3):Math.sqrt(-E),H=2*w;return N(E>0?R:"loop",(T+V)/H,(T-V)/H)},getLength:function(a,u,h,f){if(u===o&&(u=0),h===o&&(h=1),ge.isStraight(a)){var d=a;h<1&&(d=ge.subdivide(d,h)[0],u/=h),u>0&&(d=ge.subdivide(d,u)[1]);var g=d[6]-d[0],m=d[7]-d[1];return Math.sqrt(g*g+m*m)}return Q.integrate(f||e(a),u,h,t(u,h))},getTimeAt:function(a,u,h){if(h===o&&(h=u<0?1:0),u===0)return h;var f=Math.abs,d=1e-12,g=u>0,m=g?h:0,b=g?1:h,S=e(a),x=ge.getLength(a,m,b,S),y=f(u)-x;if(f(y)<d)return g?b:m;if(y>d)return null;var L=u/x,P=0;function T(w){return P+=Q.integrate(S,h,w,t(h,w)),h=w,P-u}return Q.findRoot(T,S,h+L,m,b,32,1e-12)},getPoint:function(a,u){return r(a,u,0,!1)},getTangent:function(a,u){return r(a,u,1,!0)},getWeightedTangent:function(a,u){return r(a,u,1,!1)},getNormal:function(a,u){return r(a,u,2,!0)},getWeightedNormal:function(a,u){return r(a,u,2,!1)},getCurvature:function(a,u){return r(a,u,3,!1).x},getPeaks:function(a){var u=a[0],h=a[1],f=a[2],d=a[3],g=a[4],m=a[5],b=a[6],S=a[7],x=-u+3*f-3*g+b,y=3*u-6*f+3*g,L=-3*u+3*f,P=-h+3*d-3*m+S,T=3*h-6*d+3*m,w=-3*h+3*d,k=1e-8,v=1-k,I=[];return Q.solveCubic(9*(x*x+P*P),9*(x*y+T*P),2*(y*y+T*T)+3*(L*x+w*P),L*y+T*w,I,k,v),I.sort()}}}},new function(){function e(y,L,P,T,w,k,v){var I=!v&&P.getPrevious()===w,R=!v&&P!==w&&P.getNext()===w,N=1e-8,E=1-N;if(T!==null&&T>=(I?N:0)&&T<=(R?E:1)&&k!==null&&k>=(R?N:0)&&k<=(I?E:1)){var V=new Re(P,T,null,v),H=new Re(w,k,null,v);V._intersection=H,H._intersection=V,(!L||L(V))&&Re.insert(y,V,!0)}}function t(y,L,P,T,w,k,v,I,R,N,E,V,H){if(++R>=4096||++I>=40)return R;var q=1e-9,K=L[0],B=L[1],W=L[6],$=L[7],X=Fe.getSignedDistance,ee=X(K,B,W,$,L[2],L[3]),ne=X(K,B,W,$,L[4],L[5]),_e=ee*ne>0?3/4:4/9,Pe=_e*Math.min(0,ee,ne),Te=_e*Math.max(0,ee,ne),De=X(K,B,W,$,y[0],y[1]),ue=X(K,B,W,$,y[2],y[3]),he=X(K,B,W,$,y[4],y[5]),Me=X(K,B,W,$,y[6],y[7]),Ue=r(De,ue,he,Me),Be=Ue[0],Ze=Ue[1],Ke,tt;if(ee===0&&ne===0&&De===0&&ue===0&&he===0&&Me===0||(Ke=a(Be,Ze,Pe,Te))==null||(tt=a(Be.reverse(),Ze.reverse(),Pe,Te))==null)return R;var at=N+(E-N)*Ke,Xe=N+(E-N)*tt;if(Math.max(H-V,Xe-at)<q){var Lt=(at+Xe)/2,Et=(V+H)/2;e(w,k,v?T:P,v?Et:Lt,v?P:T,v?Lt:Et)}else{y=ge.getPart(y,Ke,tt);var Vt=H-V;if(tt-Ke>.8)if(Xe-at>Vt){var Tt=ge.subdivide(y,.5),Lt=(at+Xe)/2;R=t(L,Tt[0],T,P,w,k,!v,I,R,V,H,at,Lt),R=t(L,Tt[1],T,P,w,k,!v,I,R,V,H,Lt,Xe)}else{var Tt=ge.subdivide(L,.5),Et=(V+H)/2;R=t(Tt[0],y,T,P,w,k,!v,I,R,V,Et,at,Xe),R=t(Tt[1],y,T,P,w,k,!v,I,R,Et,H,at,Xe)}else Vt===0||Vt>=q?R=t(L,y,T,P,w,k,!v,I,R,V,H,at,Xe):R=t(y,L,P,T,w,k,v,I,R,at,Xe,V,H)}return R}function r(y,L,P,T){var w=[0,y],k=[1/3,L],v=[2/3,P],I=[1,T],R=L-(2*y+T)/3,N=P-(y+2*T)/3,E;if(R*N<0)E=[[w,k,I],[w,v,I]];else{var V=R/N;E=[V>=2?[w,k,I]:V<=.5?[w,v,I]:[w,k,v,I],[w,I]]}return(R||N)<0?E.reverse():E}function a(y,L,P,T){return y[0][1]<P?u(y,!0,P):L[0][1]>T?u(L,!1,T):y[0][0]}function u(y,L,P){for(var T=y[0][0],w=y[0][1],k=1,v=y.length;k<v;k++){var I=y[k][0],R=y[k][1];if(L?R>=P:R<=P)return R===P?I:T+(P-w)*(I-T)/(R-w);T=I,w=R}return null}function h(y,L,P,T,w){var k=Q.isZero;if(k(T)&&k(w)){var v=ge.getTimeOf(y,new U(L,P));return v===null?[]:[v]}for(var I=Math.atan2(-w,T),R=Math.sin(I),N=Math.cos(I),E=[],V=[],H=0;H<8;H+=2){var q=y[H]-L,K=y[H+1]-P;E.push(q*N-K*R,q*R+K*N)}return ge.solveCubic(E,1,0,V,0,1),V}function f(y,L,P,T,w,k,v){for(var I=L[0],R=L[1],N=L[6],E=L[7],V=h(y,I,R,N-I,E-R),H=0,q=V.length;H<q;H++){var K=V[H],B=ge.getPoint(y,K),W=ge.getTimeOf(L,B);W!==null&&e(w,k,v?T:P,v?W:K,v?P:T,v?K:W)}}function d(y,L,P,T,w,k){var v=Fe.intersect(y[0],y[1],y[6],y[7],L[0],L[1],L[6],L[7]);v&&e(w,k,P,ge.getTimeOf(y,v),T,ge.getTimeOf(L,v))}function g(y,L,P,T,w,k){var v=1e-12,I=Math.min,R=Math.max;if(R(y[0],y[2],y[4],y[6])+v>I(L[0],L[2],L[4],L[6])&&I(y[0],y[2],y[4],y[6])-v<R(L[0],L[2],L[4],L[6])&&R(y[1],y[3],y[5],y[7])+v>I(L[1],L[3],L[5],L[7])&&I(y[1],y[3],y[5],y[7])-v<R(L[1],L[3],L[5],L[7])){var N=S(y,L);if(N)for(var E=0;E<2;E++){var V=N[E];e(w,k,P,V[0],T,V[1],!0)}else{var H=ge.isStraight(y),q=ge.isStraight(L),K=H&&q,B=H&&!q,W=w.length;if((K?d:H||q?f:t)(B?L:y,B?y:L,B?T:P,B?P:T,w,k,B,0,0,0,1,0,1),!K||w.length===W)for(var E=0;E<4;E++){var $=E>>1,X=E&1,ee=$*6,ne=X*6,_e=new U(y[ee],y[ee+1]),Pe=new U(L[ne],L[ne+1]);_e.isClose(Pe,v)&&e(w,k,P,$,T,X)}}}return w}function m(y,L,P,T){var w=ge.classify(y);if(w.type==="loop"){var k=w.roots;e(P,T,L,k[0],L,k[1])}return P}function b(y,L,P,T,w,k){var v=1e-7,I=!L;I&&(L=y);for(var R=y.length,N=L.length,E=new Array(R),V=I?E:new Array(N),H=[],q=0;q<R;q++)E[q]=y[q].getValues(T);if(!I)for(var q=0;q<N;q++)V[q]=L[q].getValues(w);for(var K=te.findCurveBoundsCollisions(E,V,v),B=0;B<R;B++){var W=y[B],$=E[B];I&&m($,W,H,P);var X=K[B];if(X)for(var ee=0;ee<X.length;ee++){if(k&&H.length)return H;var ne=X[ee];if(!I||ne>B){var _e=L[ne],Pe=V[ne];g($,Pe,W,_e,H,P)}}}return H}function S(y,L){function P(Me){var Ue=Me[6]-Me[0],Be=Me[7]-Me[1];return Ue*Ue+Be*Be}var T=Math.abs,w=Fe.getDistance,k=1e-8,v=1e-7,I=ge.isStraight(y),R=ge.isStraight(L),N=I&&R,E=P(y)<P(L),V=E?L:y,H=E?y:L,q=V[0],K=V[1],B=V[6]-q,W=V[7]-K;if(w(q,K,B,W,H[0],H[1],!0)<v&&w(q,K,B,W,H[6],H[7],!0)<v)!N&&w(q,K,B,W,V[2],V[3],!0)<v&&w(q,K,B,W,V[4],V[5],!0)<v&&w(q,K,B,W,H[2],H[3],!0)<v&&w(q,K,B,W,H[4],H[5],!0)<v&&(I=R=N=!0);else if(N)return null;if(I^R)return null;for(var $=[y,L],X=[],ee=0;ee<4&&X.length<2;ee++){var ne=ee&1,_e=ne^1,Pe=ee>>1,Te=ge.getTimeOf($[ne],new U($[_e][Pe?6:0],$[_e][Pe?7:1]));if(Te!=null){var De=ne?[Pe,Te]:[Te,Pe];(!X.length||T(De[0]-X[0][0])>k&&T(De[1]-X[0][1])>k)&&X.push(De)}if(ee>2&&!X.length)break}if(X.length!==2)X=null;else if(!N){var ue=ge.getPart(y,X[0][0],X[1][0]),he=ge.getPart(L,X[0][1],X[1][1]);(T(he[2]-ue[2])>v||T(he[3]-ue[3])>v||T(he[4]-ue[4])>v||T(he[5]-ue[5])>v)&&(X=null)}return X}function x(y,L){var P=y[0],T=y[1],w=y[2],k=y[3],v=y[4],I=y[5],R=y[6],N=y[7],E=L.normalize(),V=E.x,H=E.y,q=3*R-9*v+9*w-3*P,K=3*N-9*I+9*k-3*T,B=6*v-12*w+6*P,W=6*I-12*k+6*T,$=3*w-3*P,X=3*k-3*T,ee=2*q*H-2*K*V,ne=[];if(Math.abs(ee)<Q.CURVETIME_EPSILON){var _e=q*X-K*$,ee=q*W-K*B;if(ee!=0){var Pe=-_e/ee;Pe>=0&&Pe<=1&&ne.push(Pe)}}else{var Te=(B*B-4*q*$)*H*H+(-2*B*W+4*K*$+4*q*X)*V*H+(W*W-4*K*X)*V*V,De=B*H-W*V;if(Te>=0&&ee!=0){var ue=Math.sqrt(Te),he=-(De+ue)/ee,Me=(-De+ue)/ee;he>=0&&he<=1&&ne.push(he),Me>=0&&Me<=1&&ne.push(Me)}}return ne}return{getIntersections:function(y){var L=this.getValues(),P=y&&y!==this&&y.getValues();return P?g(L,P,this,y,[]):m(L,this,[])},statics:{getOverlaps:S,getIntersections:b,getCurveLineIntersections:h,getTimesWithTangent:x}}}),Re=p.extend({_class:"CurveLocation",initialize:function(t,r,a,u,h){if(r>=.99999999){var f=t.getNext();f&&(r=0,t=f)}this._setCurve(t),this._time=r,this._point=a||t.getPointAtTime(r),this._overlap=u,this._distance=h,this._intersection=this._next=this._previous=null},_setPath:function(e){this._path=e,this._version=e?e._version:0},_setCurve:function(e){this._setPath(e._path),this._curve=e,this._segment=null,this._segment1=e._segment1,this._segment2=e._segment2},_setSegment:function(e){var t=e.getCurve();t?this._setCurve(t):(this._setPath(e._path),this._segment1=e,this._segment2=null),this._segment=e,this._time=e===this._segment1?0:1,this._point=e._point.clone()},getSegment:function(){var e=this._segment;if(!e){var t=this.getCurve(),r=this.getTime();r===0?e=t._segment1:r===1?e=t._segment2:r!=null&&(e=t.getPartLength(0,r)<t.getPartLength(r,1)?t._segment1:t._segment2),this._segment=e}return e},getCurve:function(){var e=this._path,t=this;e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null);function r(a){var u=a&&a.getCurve();if(u&&(t._time=u.getTimeOf(t._point))!=null)return t._setCurve(u),u}return this._curve||r(this._segment)||r(this._segment1)||r(this._segment2.getPrevious())},getPath:function(){var e=this.getCurve();return e&&e._path},getIndex:function(){var e=this.getCurve();return e&&e.getIndex()},getTime:function(){var e=this.getCurve(),t=this._time;return e&&t==null?this._time=e.getTimeOf(this._point):t},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var e=this._offset;if(e==null){e=0;var t=this.getPath(),r=this.getIndex();if(t&&r!=null)for(var a=t.getCurves(),u=0;u<r;u++)e+=a[u].getLength();this._offset=e+=this.getCurveOffset()}return e},getCurveOffset:function(){var e=this._curveOffset;if(e==null){var t=this.getCurve(),r=this.getTime();this._curveOffset=e=r!=null&&t&&t.getPartLength(0,r)}return e},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var e=this.getCurve(),t=e&&e.divideAtTime(this.getTime());return t&&this._setSegment(t._segment1),t},split:function(){var e=this.getCurve(),t=e._path,r=e&&e.splitAtTime(this.getTime());return r&&this._setSegment(t.getLastSegment()),r},equals:function(e,t){var r=this===e;if(!r&&e instanceof Re){var a=this.getCurve(),u=e.getCurve(),h=a._path,f=u._path;if(h===f){var d=Math.abs,g=1e-7,m=d(this.getOffset()-e.getOffset()),b=!t&&this._intersection,S=!t&&e._intersection;r=(m<g||h&&d(h.getLength()-m)<g)&&(!b&&!S||b&&S&&b.equals(S,!0))}}return r},toString:function(){var e=[],t=this.getPoint(),r=J.instance;t&&e.push("point: "+t);var a=this.getIndex();a!=null&&e.push("index: "+a);var u=this.getTime();return u!=null&&e.push("time: "+r.number(u)),this._distance!=null&&e.push("distance: "+r.number(this._distance)),"{ "+e.join(", ")+" }"},isTouching:function(){var e=this._intersection;if(e&&this.getTangent().isCollinear(e.getTangent())){var t=this.getCurve(),r=e.getCurve();return!(t.isStraight()&&r.isStraight()&&t.getLine().intersect(r.getLine()))}return!1},isCrossing:function(){var e=this._intersection;if(!e)return!1;var t=this.getTime(),r=e.getTime(),a=1e-8,u=1-a,h=t>=a&&t<=u,f=r>=a&&r<=u;if(h&&f)return!this.isTouching();var d=this.getCurve(),g=d&&t<a?d.getPrevious():d,m=e.getCurve(),b=m&&r<a?m.getPrevious():m;if(t>u&&(d=d.getNext()),r>u&&(m=m.getNext()),!g||!d||!b||!m)return!1;var S=[];function x(V,H){var q=V.getValues(),K=ge.classify(q).roots||ge.getPeaks(q),B=K.length,W=ge.getLength(q,H&&B?K[B-1]:0,!H&&B?K[0]:1);S.push(B?W:W/32)}function y(V,H,q){return H<q?V>H&&V<q:V>H||V<q}h||(x(g,!0),x(d,!1)),f||(x(b,!0),x(m,!1));var L=this.getPoint(),P=Math.min.apply(Math,S),T=h?d.getTangentAtTime(t):d.getPointAt(P).subtract(L),w=h?T.negate():g.getPointAt(-P).subtract(L),k=f?m.getTangentAtTime(r):m.getPointAt(P).subtract(L),v=f?k.negate():b.getPointAt(-P).subtract(L),I=w.getAngle(),R=T.getAngle(),N=v.getAngle(),E=k.getAngle();return!!(h?y(I,N,E)^y(R,N,E)&&y(I,E,N)^y(R,E,N):y(N,I,R)^y(E,I,R)&&y(N,R,I)^y(E,R,I))},hasOverlap:function(){return!!this._overlap}},p.each(ge._evaluateMethods,function(e){var t=e+"At";this[e]=function(){var r=this.getCurve(),a=this.getTime();return a!=null&&r&&r[t](a,!0)}},{preserve:!0}),new function(){function e(t,r,a){var u=t.length,h=0,f=u-1;function d(L,P){for(var T=L+P;T>=-1&&T<=u;T+=P){var w=t[(T%u+u)%u];if(!r.getPoint().isClose(w.getPoint(),1e-7))break;if(r.equals(w))return w}return null}for(;h<=f;){var g=h+f>>>1,m=t[g],b;if(a&&(b=r.equals(m)?m:d(g,-1)||d(g,1)))return r._overlap&&(b._overlap=b._intersection._overlap=!0),b;var S=r.getPath(),x=m.getPath(),y=S!==x?S._id-x._id:r.getIndex()+r.getTime()-(m.getIndex()+m.getTime());y<0?f=g-1:h=g+1}return t.splice(h,0,r),r}return{statics:{insert:e,expand:function(t){for(var r=t.slice(),a=t.length-1;a>=0;a--)e(r,t[a]._intersection,!1);return r}}}}),me=M.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(e){var t,r,a;if(p.isPlainObject(e)?(r=e.segments,t=e.pathData):Array.isArray(e)?r=e:typeof e=="string"&&(t=e),r){var u=r[0];a=u&&Array.isArray(u[0])}else t&&(a=(t.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(t));var h=a?ot:Ee;return new h(e)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&this.reverse()},setPathData:function(e){var t=e&&e.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/ig),r,a=!1,u,h,f=new U,d=new U;function g(v,I){var R=+r[v];return a&&(R+=f[I]),R}function m(v){return new U(g(v,"x"),g(v+1,"y"))}this.clear();for(var b=0,S=t&&t.length;b<S;b++){var x=t[b],y=x[0],L=y.toLowerCase();r=x.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g);var P=r&&r.length;switch(a=y===L,u==="z"&&!/[mz]/.test(L)&&this.moveTo(f),L){case"m":case"l":for(var T=L==="m",w=0;w<P;w+=2)this[T?"moveTo":"lineTo"](f=m(w)),T&&(d=f,T=!1);h=f;break;case"h":case"v":var k=L==="h"?"x":"y";f=f.clone();for(var w=0;w<P;w++)f[k]=g(w,k),this.lineTo(f);h=f;break;case"c":for(var w=0;w<P;w+=6)this.cubicCurveTo(m(w),h=m(w+2),f=m(w+4));break;case"s":for(var w=0;w<P;w+=4)this.cubicCurveTo(/[cs]/.test(u)?f.multiply(2).subtract(h):f,h=m(w),f=m(w+2)),u=L;break;case"q":for(var w=0;w<P;w+=4)this.quadraticCurveTo(h=m(w),f=m(w+2));break;case"t":for(var w=0;w<P;w+=2)this.quadraticCurveTo(h=/[qt]/.test(u)?f.multiply(2).subtract(h):f,f=m(w)),u=L;break;case"a":for(var w=0;w<P;w+=7)this.arcTo(f=m(w+5),new de(+r[w],+r[w+1]),+r[w+2],+r[w+4],+r[w+3]);break;case"z":this.closePath(1e-12),f=d;break}u=L}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(e){var t=e.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(e):{};return t.onPath||!!(this.getFillRule()==="evenodd"?t.windingL&1||t.windingR&1:t.winding)},getIntersections:function(e,t,r,a){var u=this===e||!e,h=this._matrix._orNullIfIdentity(),f=u?h:(r||e._matrix)._orNullIfIdentity();return u||this.getBounds(h).intersects(e.getBounds(f),1e-12)?ge.getIntersections(this.getCurves(),!u&&e.getCurves(),t,h,f,a):[]},getCrossings:function(e){return this.getIntersections(e,function(t){return t.isCrossing()})},getNearestLocation:function(){for(var e=U.read(arguments),t=this.getCurves(),r=1/0,a=null,u=0,h=t.length;u<h;u++){var f=t[u].getNearestLocation(e);f._distance<r&&(r=f._distance,a=f)}return a},getNearestPoint:function(){var e=this.getNearestLocation.apply(this,arguments);return e&&e.getPoint()},interpolate:function(e,t,r){var a=!this._children,u=a?"_segments":"_children",h=e[u],f=t[u],d=this[u];if(!h||!f||h.length!==f.length)throw new Error("Invalid operands in interpolate() call: "+e+", "+t);var g=d.length,m=f.length;if(g<m)for(var b=a?qe:Ee,S=g;S<m;S++)this.add(new b);else g>m&&this[a?"removeSegments":"removeChildren"](m,g);for(var S=0;S<m;S++)d[S].interpolate(h[S],f[S],r);a&&(this.setClosed(e._closed),this._changed(9))},compare:function(e){var t=!1;if(e){var r=this._children||[this],a=e._children?e._children.slice():[e],u=r.length,h=a.length,f=[],d=0;t=!0;for(var g=te.findItemBoundsCollisions(r,a,Q.GEOMETRIC_EPSILON),m=u-1;m>=0&&t;m--){var b=r[m];t=!1;var S=g[m];if(S)for(var x=S.length-1;x>=0&&!t;x--)b.compare(a[S[x]])&&(f[S[x]]||(f[S[x]]=!0,d++),t=!0)}t=t&&d===h}return t}}),Ee=me.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var r=arguments,a=Array.isArray(t)?typeof t[0]=="object"?t:r:t&&t.size===o&&(t.x!==o||t.point!==o)?r:null;a&&a.length>0?this.setSegments(a):(this._curves=o,this._segmentSelection=0,!a&&typeof t=="string"&&(this.setPathData(t),t=null)),this._initialize(!a&&t)},_equals:function(e){return this._closed===e._closed&&p.equals(this._segments,e._segments)},copyContent:function(e){this.setSegments(e._segments),this._closed=e._closed},_changed:function e(t){if(e.base.call(this,t),t&8){if(this._length=this._area=o,t&32)this._version++;else if(this._curves)for(var r=0,a=this._curves.length;r<a;r++)this._curves[r]._changed()}else t&64&&(this._bounds=o)},getStyle:function(){var e=this._parent;return(e instanceof ot?e:this)._style},getSegments:function(){return this._segments},setSegments:function(e){var t=this.isFullySelected(),r=e&&e.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=o,r){var a=e[r-1];typeof a=="boolean"&&(this.setClosed(a),r--),this._add(qe.readList(e,0,{},r))}t&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var e=this._curves,t=this._segments;if(!e){var r=this._countCurves();e=this._curves=new Array(r);for(var a=0;a<r;a++)e[a]=new ge(this,t[a],t[a+1]||t[0])}return e},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},isClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){if(this._closed=e,this._curves){var t=this._curves.length=this._countCurves();e&&(this._curves[t-1]=new ge(this,this._segments[t-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(e,t){var r=this._segments,a=r.length,u=new J(t),h=new Array(6),f=!0,d,g,m,b,S,x,y,L,P=[];function T(k,v){if(k._transformCoordinates(e,h),d=h[0],g=h[1],f)P.push("M"+u.pair(d,g)),f=!1;else if(S=h[2],x=h[3],S===d&&x===g&&y===m&&L===b){if(!v){var I=d-m,R=g-b;P.push(I===0?"v"+u.number(R):R===0?"h"+u.number(I):"l"+u.pair(I,R))}}else P.push("c"+u.pair(y-m,L-b)+" "+u.pair(S-m,x-b)+" "+u.pair(d-m,g-b));m=d,b=g,y=h[4],L=h[5]}if(!a)return"";for(var w=0;w<a;w++)T(r[w]);return this._closed&&a>0&&(T(r[0],!0),P.push("z")),P.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(e){for(var t=this._segments,r=new Array(6),a=0,u=t.length;a<u;a++)t[a]._transformCoordinates(e,r,!0);return!0},_add:function(e,f){for(var r=this._segments,a=this._curves,u=e.length,h=f==null,f=h?r.length:f,d=0;d<u;d++){var g=e[d];g._path&&(g=e[d]=g.clone()),g._path=this,g._index=f+d,g._selection&&this._updateSelection(g,0,g._selection)}if(h)p.push(r,e);else{r.splice.apply(r,[f,0].concat(e));for(var d=f+u,m=r.length;d<m;d++)r[d]._index=d}if(a){var b=this._countCurves(),S=f>0&&f+u-1===b?f-1:f,x=S,y=Math.min(S+u,b);e._curves&&(a.splice.apply(a,[S,0].concat(e._curves)),x+=e._curves.length);for(var d=x;d<y;d++)a.splice(d,0,new ge(this,null,null));this._adjustCurves(S,y)}return this._changed(41),e},_adjustCurves:function(e,t){for(var r=this._segments,a=this._curves,u,h=e;h<t;h++)u=a[h],u._path=this,u._segment1=r[h],u._segment2=r[h+1]||r[0],u._changed();(u=a[this._closed&&!e?r.length-1:e-1])&&(u._segment2=r[e]||r[0],u._changed()),(u=a[t])&&(u._segment1=r[t],u._changed())},_countCurves:function(){var e=this._segments.length;return!this._closed&&e>0?e-1:e},add:function(e){var t=arguments;return t.length>1&&typeof e!="number"?this._add(qe.readList(t)):this._add([qe.read(t)])[0]},insert:function(e,t){var r=arguments;return r.length>2&&typeof t!="number"?this._add(qe.readList(r,1),e):this._add([qe.read(r,1)],e)[0]},addSegment:function(){return this._add([qe.read(arguments)])[0]},insertSegment:function(e){return this._add([qe.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(qe.readList(e))},insertSegments:function(e,t){return this._add(qe.readList(t),e)},removeSegment:function(e){return this.removeSegments(e,e+1)[0]||null},removeSegments:function(e,t,r){e=e||0,t=p.pick(t,this._segments.length);var a=this._segments,u=this._curves,h=a.length,f=a.splice(e,t-e),d=f.length;if(!d)return f;for(var g=0;g<d;g++){var m=f[g];m._selection&&this._updateSelection(m,m._selection,0),m._index=m._path=null}for(var g=e,b=a.length;g<b;g++)a[g]._index=g;if(u){for(var S=e>0&&t===h+(this._closed?1:0)?e-1:e,u=u.splice(S,d),g=u.length-1;g>=0;g--)u[g]._path=null;r&&(f._curves=u.slice(1)),this._adjustCurves(S,S)}return this._changed(41),f},clear:"#removeSegments",hasHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)if(e[t].hasHandles())return!0;return!1},clearHandles:function(){for(var e=this._segments,t=0,r=e.length;t<r;t++)e[t].clearHandles()},getLength:function(){if(this._length==null){for(var e=this.getCurves(),t=0,r=0,a=e.length;r<a;r++)t+=e[r].getLength();this._length=t}return this._length},getArea:function(){var e=this._area;if(e==null){var t=this._segments,r=this._closed;e=0;for(var a=0,u=t.length;a<u;a++){var h=a+1===u;e+=ge.getArea(ge.getValues(t[a],t[h?0:a+1],null,h&&!r))}this._area=e}return e},isFullySelected:function(){var e=this._segments.length;return this.isSelected()&&e>0&&this._segmentSelection===e*7},setFullySelected:function(e){e&&this._selectSegments(!0),this.setSelected(e)},setSelection:function e(t){t&1||this._selectSegments(!1),e.base.call(this,t)},_selectSegments:function(e){var t=this._segments,r=t.length,a=e?7:0;this._segmentSelection=a*r;for(var u=0;u<r;u++)t[u]._selection=a},_updateSelection:function(e,t,r){e._selection=r;var a=this._segmentSelection+=r-t;a>0&&this.setSelected(!0)},divideAt:function(e){var t=this.getLocationAt(e),r;return t&&(r=t.getCurve().divideAt(t.getCurveOffset()))?r._segment1:null},splitAt:function(e){var t=this.getLocationAt(e),r=t&&t.index,a=t&&t.time,u=1e-8,h=1-u;a>h&&(r++,a=0);var f=this.getCurves();if(r>=0&&r<f.length){a>=u&&f[r++].divideAtTime(a);var d=this.removeSegments(r,this._segments.length,!0),g;return this._closed?(this.setClosed(!1),g=this):(g=new Ee(M.NO_INSERT),g.insertAbove(this),g.copyAttributes(this)),g._add(d,0),this.addSegment(d[0]),g}return null},split:function(e,t){var r,a=t===o?e:(r=this.getCurves()[e])&&r.getLocationAtTime(t);return a!=null?this.splitAt(a):null},join:function(e,t){var r=t||0;if(e&&e!==this){var a=e._segments,u=this.getLastSegment(),h=e.getLastSegment();if(!h)return this;u&&u._point.isClose(h._point,r)&&e.reverse();var f=e.getFirstSegment();if(u&&u._point.isClose(f._point,r))u.setHandleOut(f._handleOut),this._add(a.slice(1));else{var d=this.getFirstSegment();d&&d._point.isClose(f._point,r)&&e.reverse(),h=e.getLastSegment(),d&&d._point.isClose(h._point,r)?(d.setHandleIn(h._handleIn),this._add(a.slice(0,a.length-1),0)):this._add(a.slice())}e._closed&&this._add([a[0]]),e.remove()}var g=this.getFirstSegment(),m=this.getLastSegment();return g!==m&&g._point.isClose(m._point,r)&&(g.setHandleIn(m._handleIn),m.remove(),this.setClosed(!0)),this},reduce:function(e){for(var t=this.getCurves(),r=e&&e.simplify,a=r?1e-7:0,u=t.length-1;u>=0;u--){var h=t[u];!h.hasHandles()&&(!h.hasLength(a)||r&&h.isCollinear(h.getNext()))&&h.remove()}return this},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var r=this._segments[e],a=r._handleIn;r._handleIn=r._handleOut,r._handleOut=a,r._index=e}this._curves=null,this._changed(9)},flatten:function(e){for(var t=new St(this,e||.25,256,!0),r=t.parts,a=r.length,u=[],h=0;h<a;h++)u.push(new qe(r[h].curve.slice(0,2)));!this._closed&&a>0&&u.push(new qe(r[a-1].curve.slice(6))),this.setSegments(u)},simplify:function(e){var t=new zt(this).fit(e||2.5);return t&&this.setSegments(t),!!t},smooth:function(e){var t=this,r=e||{},a=r.type||"asymmetric",u=this._segments,h=u.length,f=this._closed;function d(Be,Ze){var Ke=Be&&Be.index;if(Ke!=null){var tt=Be.path;if(tt&&tt!==t)throw new Error(Be._class+" "+Ke+" of "+tt+" is not part of "+t);Ze&&Be instanceof ge&&Ke++}else Ke=typeof Be=="number"?Be:Ze;return Math.min(Ke<0&&f?Ke%h:Ke<0?Ke+h:Ke,h-1)}var g=f&&r.from===o&&r.to===o,m=d(r.from,0),b=d(r.to,h-1);if(m>b)if(f)m-=h;else{var S=m;m=b,b=S}if(/^(?:asymmetric|continuous)$/.test(a)){var x=a==="asymmetric",y=Math.min,L=b-m+1,P=L-1,T=g?y(L,4):1,w=T,k=T,v=[];if(f||(w=y(1,m),k=y(1,h-b-1)),P+=w+k,P<=1)return;for(var I=0,R=m-w;I<=P;I++,R++)v[I]=u[(R<0?R+h:R)%h]._point;for(var N=v[0]._x+2*v[1]._x,E=v[0]._y+2*v[1]._y,V=2,H=P-1,q=[N],K=[E],B=[V],W=[],$=[],I=1;I<P;I++){var X=I<H,ee=X||x?1:2,ne=X?4:x?2:7,_e=X?4:x?3:8,Pe=X?2:x?0:1,Te=ee/V;V=B[I]=ne-Te,N=q[I]=_e*v[I]._x+Pe*v[I+1]._x-Te*N,E=K[I]=_e*v[I]._y+Pe*v[I+1]._y-Te*E}W[H]=q[H]/B[H],$[H]=K[H]/B[H];for(var I=P-2;I>=0;I--)W[I]=(q[I]-W[I+1])/B[I],$[I]=(K[I]-$[I+1])/B[I];W[P]=(3*v[P]._x-W[H])/2,$[P]=(3*v[P]._y-$[H])/2;for(var I=w,De=P-k,R=m;I<=De;I++,R++){var ue=u[R<0?R+h:R],he=ue._point,Me=W[I]-he._x,Ue=$[I]-he._y;(g||I<De)&&ue.setHandleOut(Me,Ue),(g||I>w)&&ue.setHandleIn(-Me,-Ue)}}else for(var I=m;I<=b;I++)u[I<0?I+h:I].smooth(r,!g&&I===m,!g&&I===b)},toShape:function(e){if(!this._closed)return null;var t=this._segments,r,a,u,h;function f(x,y){var L=t[x],P=L.getNext(),T=t[y],w=T.getNext();return L._handleOut.isZero()&&P._handleIn.isZero()&&T._handleOut.isZero()&&w._handleIn.isZero()&&P._point.subtract(L._point).isCollinear(w._point.subtract(T._point))}function d(x){var y=t[x],L=y.getPrevious(),P=y.getNext();return L._handleOut.isZero()&&y._handleIn.isZero()&&y._handleOut.isZero()&&P._handleIn.isZero()&&y._point.subtract(L._point).isOrthogonal(P._point.subtract(y._point))}function g(x){var y=t[x],L=y.getNext(),P=y._handleOut,T=L._handleIn,w=.5522847498307936;if(P.isOrthogonal(T)){var k=y._point,v=L._point,I=new Fe(k,P,!0).intersect(new Fe(v,T,!0),!0);return I&&Q.isZero(P.getLength()/I.subtract(k).getLength()-w)&&Q.isZero(T.getLength()/I.subtract(v).getLength()-w)}return!1}function m(x,y){return t[x]._point.getDistance(t[y]._point)}if(!this.hasHandles()&&t.length===4&&f(0,2)&&f(1,3)&&d(1)?(r=He.Rectangle,a=new de(m(0,3),m(0,1)),h=t[1]._point.add(t[2]._point).divide(2)):t.length===8&&g(0)&&g(2)&&g(4)&&g(6)&&f(1,5)&&f(3,7)?(r=He.Rectangle,a=new de(m(1,6),m(0,3)),u=a.subtract(new de(m(0,7),m(1,2))).divide(2),h=t[3]._point.add(t[4]._point).divide(2)):t.length===4&&g(0)&&g(1)&&g(2)&&g(3)&&(Q.isZero(m(0,2)-m(1,3))?(r=He.Circle,u=m(0,2)/2):(r=He.Ellipse,u=new de(m(2,0)/2,m(3,1)/2)),h=t[1]._point),r){var b=this.getPosition(!0),S=new r({center:b,size:a,radius:u,insert:!1});return S.copyAttributes(this,!0),S._matrix.prepend(this._matrix),S.rotate(h.subtract(b).getAngle()+90),(e===o||e)&&S.insertAbove(this),S}return null},toPath:"#clone",compare:function e(t){if(!t||t instanceof ot)return e.base.call(this,t);var r=this.getCurves(),a=t.getCurves(),u=r.length,h=a.length;if(!u||!h)return u==h;for(var f=r[0].getValues(),d=[],g=0,m,b=0,S,x=0;x<h;x++){var T=a[x].getValues();d.push(T);var y=ge.getOverlaps(f,T);if(y){m=!x&&y[0][0]>0?h-1:x,S=y[0][1];break}}for(var L=Math.abs,P=1e-8,T=d[m],w;f&&T;){var y=ge.getOverlaps(f,T);if(y){var k=y[0][0];if(L(k-b)<P){b=y[1][0],b===1&&(f=++g<u?r[g].getValues():null,b=0);var v=y[0][1];if(L(v-S)<P){if(w||(w=[m,v]),S=y[1][1],S===1&&(++m>=h&&(m=0),T=d[m]||a[m].getValues(),S=0),!f)return w[0]===m&&w[1]===S;continue}}}break}return!1},_hitTestSelf:function(e,t,r,a){var u=this,h=this.getStyle(),f=this._segments,d=f.length,g=this._closed,m=t._tolerancePadding,b=m,S,x,y,L,P,T,w=t.stroke&&h.hasStroke(),k=t.fill&&h.hasFill(),v=t.curves,I=w?h.getStrokeWidth()/2:k&&t.tolerance>0||v?0:null;I!==null&&(I>0?(S=h.getStrokeJoin(),x=h.getStrokeCap(),y=h.getMiterLimit(),b=b.add(Ee._getStrokePadding(I,a))):S=x="round");function R(W,$){return e.subtract(W).divide($).length<=1}function N(W,$,X){if(!t.selected||$.isSelected()){var ee=W._point;if($!==ee&&($=$.add(ee)),R($,b))return new Ct(X,u,{segment:W,point:$})}}function E(W,$){return($||t.segments)&&N(W,W._point,"segment")||!$&&t.handles&&(N(W,W._handleIn,"handle-in")||N(W,W._handleOut,"handle-out"))}function V(W){L.add(W)}function H(W){var $=g||W._index>0&&W._index<d-1;if(($?S:x)==="round")return R(W._point,b);if(L=new Ee({internal:!0,closed:!0}),$?W.isSmooth()||Ee._addBevelJoin(W,S,I,y,null,a,V,!0):x==="square"&&Ee._addSquareCap(W,x,I,null,a,V,!0),!L.isEmpty()){var X;return L.contains(e)||(X=L.getNearestLocation(e))&&R(X.getPoint(),m)}}if(t.ends&&!t.segments&&!g){if(T=E(f[0],!0)||E(f[d-1],!0))return T}else if(t.segments||t.handles){for(var q=0;q<d;q++)if(T=E(f[q]))return T}if(I!==null){if(P=this.getNearestLocation(e),P){var K=P.getTime();K===0||K===1&&d>1?H(P.getSegment())||(P=null):R(P.getPoint(),b)||(P=null)}if(!P&&S==="miter"&&d>1)for(var q=0;q<d;q++){var B=f[q];if(e.getDistance(B._point)<=y*I&&H(B)){P=B.getLocation();break}}}return!P&&k&&this._contains(e)||P&&!w&&!v?new Ct("fill",this):P?new Ct(w?"stroke":"curve",this,{location:P,point:P.getPoint()}):null}},p.each(ge._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this.getLocationAt(t);return r&&r[e]()}},{beans:!1,getLocationOf:function(){for(var e=U.read(arguments),t=this.getCurves(),r=0,a=t.length;r<a;r++){var u=t[r].getLocationOf(e);if(u)return u}return null},getOffsetOf:function(){var e=this.getLocationOf.apply(this,arguments);return e?e.getOffset():null},getLocationAt:function(e){if(typeof e=="number"){for(var t=this.getCurves(),r=0,a=0,u=t.length;a<u;a++){var h=r,f=t[a];if(r+=f.getLength(),r>e)return f.getLocationAt(e-h)}if(t.length>0&&e<=this.getLength())return new Re(t[t.length-1],1)}else if(e&&e.getPath&&e.getPath()===this)return e;return null},getOffsetsWithTangent:function(){var e=U.read(arguments);if(e.isZero())return[];for(var t=[],r=0,a=this.getCurves(),u=0,h=a.length;u<h;u++){for(var f=a[u],d=f.getTimesWithTangent(e),g=0,m=d.length;g<m;g++){var b=r+f.getOffsetAtTime(d[g]);t.indexOf(b)<0&&t.push(b)}r+=f.length}return t}}),new function(){function e(r,a,u,h){if(h<=0)return;var f=h/2,d=h-2,g=f-1,m=new Array(6),b,S;function x(k){var v=m[k],I=m[k+1];(b!=v||S!=I)&&(r.beginPath(),r.moveTo(b,S),r.lineTo(v,I),r.stroke(),r.beginPath(),r.arc(v,I,f,0,Math.PI*2,!0),r.fill())}for(var y=0,L=a.length;y<L;y++){var P=a[y],T=P._selection;if(P._transformCoordinates(u,m),b=m[0],S=m[1],T&2&&x(2),T&4&&x(4),r.fillRect(b-f,S-f,h,h),d>0&&!(T&1)){var w=r.fillStyle;r.fillStyle="#ffffff",r.fillRect(b-g,S-g,d,d),r.fillStyle=w}}}function t(r,a,u){var h=a._segments,f=h.length,d=new Array(6),g=!0,m,b,S,x,y,L,P,T;function w(v){if(u)v._transformCoordinates(u,d),m=d[0],b=d[1];else{var I=v._point;m=I._x,b=I._y}if(g)r.moveTo(m,b),g=!1;else{if(u)y=d[2],L=d[3];else{var R=v._handleIn;y=m+R._x,L=b+R._y}y===m&&L===b&&P===S&&T===x?r.lineTo(m,b):r.bezierCurveTo(P,T,y,L,m,b)}if(S=m,x=b,u)P=d[4],T=d[5];else{var R=v._handleOut;P=S+R._x,T=x+R._y}}for(var k=0;k<f;k++)w(h[k]);a._closed&&f>0&&w(h[0])}return{_draw:function(r,a,u,h){var f=a.dontStart,d=a.dontFinish||a.clip,g=this.getStyle(),m=g.hasFill(),b=g.hasStroke(),S=g.getDashArray(),x=!Ae.support.nativeDash&&b&&S&&S.length;f||r.beginPath(),(m||b&&!x||d)&&(t(r,this,h),this._closed&&r.closePath());function y(v){return S[(v%x+x)%x]}if(!d&&(m||b)&&(this._setStyles(r,a,u),m&&(r.fill(g.getFillRule()),r.shadowColor="rgba(0,0,0,0)"),b)){if(x){f||r.beginPath();for(var L=new St(this,.25,32,!1,h),P=L.length,T=-g.getDashOffset(),w,k=0;T>0;)T-=y(k--)+y(k--);for(;T<P;)w=T+y(k++),(T>0||w>0)&&L.drawPart(r,Math.max(T,0),Math.max(w,0)),T=w+y(k++)}r.stroke()}},_drawSelected:function(r,a){r.beginPath(),t(r,this,a),r.stroke(),e(r,this._segments,a,Ae.settings.handleSize)}}},new function(){function e(t){var r=t._segments;if(!r.length)throw new Error("Use a moveTo() command first");return r[r.length-1]}return{moveTo:function(){var t=this._segments;t.length===1&&this.removeSegment(0),t.length||this._add([new qe(U.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new qe(U.read(arguments))])},cubicCurveTo:function(){var t=arguments,r=U.read(t),a=U.read(t),u=U.read(t),h=e(this);h.setHandleOut(r.subtract(h._point)),this._add([new qe(u,a.subtract(u))])},quadraticCurveTo:function(){var t=arguments,r=U.read(t),a=U.read(t),u=e(this)._point;this.cubicCurveTo(r.add(u.subtract(r).multiply(1/3)),r.add(a.subtract(r).multiply(1/3)),a)},curveTo:function(){var t=arguments,r=U.read(t),a=U.read(t),u=p.pick(p.read(t),.5),h=1-u,f=e(this)._point,d=r.subtract(f.multiply(h*h)).subtract(a.multiply(u*u)).divide(2*u*h);if(d.isNaN())throw new Error("Cannot put a curve through points with parameter = "+u);this.quadraticCurveTo(d,a)},arcTo:function(){var t=arguments,r=Math.abs,a=Math.sqrt,u=e(this),h=u._point,f=U.read(t),d,g=p.peek(t),m=p.pick(g,!0),b,S,x,y;if(typeof m=="boolean")var L=h.add(f).divide(2),d=L.add(L.subtract(h).rotate(m?-90:90));else if(p.remain(t)<=2)d=f,f=U.read(t);else if(!h.equals(f)){var P=de.read(t),T=Q.isZero;if(T(P.width)||T(P.height))return this.lineTo(f);var w=p.read(t),m=!!p.read(t),k=!!p.read(t),L=h.add(f).divide(2),v=h.subtract(L).rotate(-w),I=v.x,R=v.y,N=r(P.width),E=r(P.height),V=N*N,H=E*E,q=I*I,K=R*R,B=a(q/V+K/H);if(B>1&&(N*=B,E*=B,V=N*N,H=E*E),B=(V*H-V*K-H*q)/(V*K+H*q),r(B)<1e-12&&(B=0),B<0)throw new Error("Cannot create an arc with the given arguments");b=new U(N*R/E,-E*I/N).multiply((k===m?-1:1)*a(B)).rotate(w).add(L),y=new Ve().translate(b).rotate(w).scale(N,E),x=y._inverseTransform(h),S=x.getDirectedAngle(y._inverseTransform(f)),!m&&S>0?S-=360:m&&S<0&&(S+=360)}if(d){var W=new Fe(h.add(d).divide(2),d.subtract(h).rotate(90),!0),$=new Fe(d.add(f).divide(2),f.subtract(d).rotate(90),!0),X=new Fe(h,f),ee=X.getSide(d);if(b=W.intersect($,!0),!b){if(!ee)return this.lineTo(f);throw new Error("Cannot create an arc with the given arguments")}x=h.subtract(b),S=x.getDirectedAngle(f.subtract(b));var ne=X.getSide(b,!0);ne===0?S=ee*r(S):ee===ne&&(S+=S<0?360:-360)}if(S){for(var _e=1e-5,Pe=r(S),Te=Pe>=360?4:Math.ceil((Pe-_e)/90),De=S/Te,ue=De*Math.PI/360,he=4/3*Math.sin(ue)/(1+Math.cos(ue)),Me=[],Ue=0;Ue<=Te;Ue++){var v=f,Be=null;if(Ue<Te&&(Be=x.rotate(90).multiply(he),y?(v=y._transformPoint(x),Be=y._transformPoint(x.add(Be)).subtract(v)):v=b.add(x)),!Ue)u.setHandleOut(Be);else{var Ze=x.rotate(-90).multiply(he);y&&(Ze=y._transformPoint(x.add(Ze)).subtract(v)),Me.push(new qe(v,Ze,Be))}x=x.rotate(De)}this._add(Me)}},lineBy:function(){var t=U.read(arguments),r=e(this)._point;this.lineTo(r.add(t))},curveBy:function(){var t=arguments,r=U.read(t),a=U.read(t),u=p.read(t),h=e(this)._point;this.curveTo(h.add(r),h.add(a),u)},cubicCurveBy:function(){var t=arguments,r=U.read(t),a=U.read(t),u=U.read(t),h=e(this)._point;this.cubicCurveTo(h.add(r),h.add(a),h.add(u))},quadraticCurveBy:function(){var t=arguments,r=U.read(t),a=U.read(t),u=e(this)._point;this.quadraticCurveTo(u.add(r),u.add(a))},arcBy:function(){var t=arguments,r=e(this)._point,a=r.add(U.read(t)),u=p.pick(p.peek(t),!0);typeof u=="boolean"?this.arcTo(a,u):this.arcTo(a,r.add(U.read(t)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(e,t){var r=t.handle?"getHandleBounds":t.stroke?"getStrokeBounds":"getBounds";return Ee[r](this._segments,this._closed,this,e,t)},statics:{getBounds:function(e,t,r,a,u,h){var f=e[0];if(!f)return new Ce;var d=new Array(6),g=f._transformCoordinates(a,new Array(6)),m=g.slice(0,2),b=m.slice(),S=new Array(2);function x(P){P._transformCoordinates(a,d);for(var T=0;T<2;T++)ge._addBounds(g[T],g[T+4],d[T+2],d[T],T,h?h[T]:0,m,b,S);var w=g;g=d,d=w}for(var y=1,L=e.length;y<L;y++)x(e[y]);return t&&x(f),new Ce(m[0],m[1],b[0]-m[0],b[1]-m[1])},getStrokeBounds:function(e,t,r,a,u){var h=r.getStyle(),f=h.hasStroke(),d=h.getStrokeWidth(),g=f&&r._getStrokeMatrix(a,u),m=f&&Ee._getStrokePadding(d,g),b=Ee.getBounds(e,t,r,a,u,m);if(!f)return b;var S=d/2,x=h.getStrokeJoin(),y=h.getStrokeCap(),L=h.getMiterLimit(),P=new Ce(new de(m));function T(N){b=b.include(N)}function w(N){b=b.unite(P.setCenter(N._point.transform(a)))}function k(N,E){E==="round"||N.isSmooth()?w(N):Ee._addBevelJoin(N,E,S,L,a,g,T)}function v(N,E){E==="round"?w(N):Ee._addSquareCap(N,E,S,a,g,T)}var I=e.length-(t?0:1);if(I>0){for(var R=1;R<I;R++)k(e[R],x);t?k(e[0],x):(v(e[0],y),v(e[e.length-1],y))}return b},_getStrokePadding:function(e,t){if(!t)return[e,e];var r=new U(e,0).transform(t),a=new U(0,e).transform(t),u=r.getAngleInRadians(),h=r.getLength(),f=a.getLength(),d=Math.sin(u),g=Math.cos(u),m=Math.tan(u),b=Math.atan2(f*m,h),S=Math.atan2(f,m*h);return[Math.abs(h*Math.cos(b)*g+f*Math.sin(b)*d),Math.abs(f*Math.sin(S)*g+h*Math.cos(S)*d)]},_addBevelJoin:function(e,t,r,a,u,h,f,d){var g=e.getCurve(),m=g.getPrevious(),b=g.getPoint1().transform(u),S=m.getNormalAtTime(1).multiply(r).transform(h),x=g.getNormalAtTime(0).multiply(r).transform(h),y=S.getDirectedAngle(x);if((y<0||y>=180)&&(S=S.negate(),x=x.negate()),d&&f(b),f(b.add(S)),t==="miter"){var L=new Fe(b.add(S),new U(-S.y,S.x),!0).intersect(new Fe(b.add(x),new U(-x.y,x.x),!0),!0);L&&b.getDistance(L)<=a*r&&f(L)}f(b.add(x))},_addSquareCap:function(e,t,r,a,u,h,f){var d=e._point.transform(a),g=e.getLocation(),m=g.getNormal().multiply(g.getTime()===0?r:-r).transform(u);t==="square"&&(f&&(h(d.subtract(m)),h(d.add(m))),d=d.add(m.rotate(-90))),h(d.add(m)),h(d.subtract(m))},getHandleBounds:function(e,t,r,a,u){var h=r.getStyle(),f=u.stroke&&h.hasStroke(),d,g;if(f){var m=r._getStrokeMatrix(a,u),b=h.getStrokeWidth()/2,S=b;h.getStrokeJoin()==="miter"&&(S=b*h.getMiterLimit()),h.getStrokeCap()==="square"&&(S=Math.max(S,b*Math.SQRT2)),d=Ee._getStrokePadding(b,m),g=Ee._getStrokePadding(S,m)}for(var x=new Array(6),y=1/0,L=-y,P=y,T=L,w=0,k=e.length;w<k;w++){var v=e[w];v._transformCoordinates(a,x);for(var I=0;I<6;I+=2){var R=I?d:g,N=R?R[0]:0,E=R?R[1]:0,V=x[I],H=x[I+1],q=V-N,K=V+N,B=H-E,W=H+E;q<y&&(y=q),K>L&&(L=K),B<P&&(P=B),W>T&&(T=W)}}return new Ce(y,P,L-y,T-P)}}});Ee.inject({statics:new function(){var e=.5522847498307936,t=[new qe([-1,0],[0,e],[0,-e]),new qe([0,-1],[-e,0],[e,0]),new qe([1,0],[0,-e],[0,e]),new qe([0,1],[e,0],[-e,0])];function r(u,h,f){var d=p.getNamed(f),g=new Ee(d&&(d.insert==!0?M.INSERT:d.insert==!1?M.NO_INSERT:null));return g._add(u),g._closed=h,g.set(d,M.INSERT)}function a(u,h,f){for(var d=new Array(4),g=0;g<4;g++){var m=t[g];d[g]=new qe(m._point.multiply(h).add(u),m._handleIn.multiply(h),m._handleOut.multiply(h))}return r(d,!0,f)}return{Line:function(){var u=arguments;return r([new qe(U.readNamed(u,"from")),new qe(U.readNamed(u,"to"))],!1,u)},Circle:function(){var u=arguments,h=U.readNamed(u,"center"),f=p.readNamed(u,"radius");return a(h,new de(f),u)},Rectangle:function(){var u=arguments,h=Ce.readNamed(u,"rectangle"),f=de.readNamed(u,"radius",0,{readNull:!0}),d=h.getBottomLeft(!0),g=h.getTopLeft(!0),m=h.getTopRight(!0),b=h.getBottomRight(!0),S;if(!f||f.isZero())S=[new qe(d),new qe(g),new qe(m),new qe(b)];else{f=de.min(f,h.getSize(!0).divide(2));var x=f.width,y=f.height,L=x*e,P=y*e;S=[new qe(d.add(x,0),null,[-L,0]),new qe(d.subtract(0,y),[0,P]),new qe(g.add(0,y),null,[0,-P]),new qe(g.add(x,0),[-L,0],null),new qe(m.subtract(x,0),null,[L,0]),new qe(m.add(0,y),[0,-P],null),new qe(b.subtract(0,y),null,[0,P]),new qe(b.subtract(x,0),[L,0])]}return r(S,!0,u)},RoundRectangle:"#Rectangle",Ellipse:function(){var u=arguments,h=He._readEllipse(u);return a(h.center,h.radius,u)},Oval:"#Ellipse",Arc:function(){var u=arguments,h=U.readNamed(u,"from"),f=U.readNamed(u,"through"),d=U.readNamed(u,"to"),g=p.getNamed(u),m=new Ee(g&&g.insert==!1&&M.NO_INSERT);return m.moveTo(h),m.arcTo(f,d),m.set(g)},RegularPolygon:function(){for(var u=arguments,h=U.readNamed(u,"center"),f=p.readNamed(u,"sides"),d=p.readNamed(u,"radius"),g=360/f,m=f%3===0,b=new U(0,m?-d:d),S=m?-1:.5,x=new Array(f),y=0;y<f;y++)x[y]=new qe(h.add(b.rotate((y+S)*g)));return r(x,!0,u)},Star:function(){for(var u=arguments,h=U.readNamed(u,"center"),f=p.readNamed(u,"points")*2,d=p.readNamed(u,"radius1"),g=p.readNamed(u,"radius2"),m=360/f,b=new U(0,-1),S=new Array(f),x=0;x<f;x++)S[x]=new qe(h.add(b.rotate(m*x).multiply(x%2?g:d)));return r(S,!0,u)}}}});var ot=me.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||(typeof t=="string"?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function e(t,r){var a=r,u=a[0];u&&typeof u[0]=="number"&&(a=[a]);for(var h=r.length-1;h>=0;h--){var f=a[h];a===r&&!(f instanceof Ee)&&(a=p.slice(a)),Array.isArray(f)?a[h]=new Ee({segments:f,insert:!1}):f instanceof ot&&(a.splice.apply(a,[h,1].concat(f.removeChildren())),f.remove())}return e.base.call(this,t,a)},reduce:function e(t){for(var r=this._children,a=r.length-1;a>=0;a--){var u=r[a].reduce(t);u.isEmpty()&&u.remove()}if(!r.length){var u=new Ee(M.NO_INSERT);return u.copyAttributes(this),u.insertAbove(this),this.remove(),u}return e.base.call(this)},isClosed:function(){for(var e=this._children,t=0,r=e.length;t<r;t++)if(!e[t]._closed)return!1;return!0},setClosed:function(e){for(var t=this._children,r=0,a=t.length;r<a;r++)t[r].setClosed(e)},getFirstSegment:function(){var e=this.getFirstChild();return e&&e.getFirstSegment()},getLastSegment:function(){var e=this.getLastChild();return e&&e.getLastSegment()},getCurves:function(){for(var e=this._children,t=[],r=0,a=e.length;r<a;r++)p.push(t,e[r].getCurves());return t},getFirstCurve:function(){var e=this.getFirstChild();return e&&e.getFirstCurve()},getLastCurve:function(){var e=this.getLastChild();return e&&e.getLastCurve()},getArea:function(){for(var e=this._children,t=0,r=0,a=e.length;r<a;r++)t+=e[r].getArea();return t},getLength:function(){for(var e=this._children,t=0,r=0,a=e.length;r<a;r++)t+=e[r].getLength();return t},getPathData:function(e,t){for(var r=this._children,a=[],u=0,h=r.length;u<h;u++){var f=r[u],d=f._matrix;a.push(f.getPathData(e&&!d.isIdentity()?e.appended(d):e,t))}return a.join("")},_hitTestChildren:function e(t,r,a){return e.base.call(this,t,r.class===Ee||r.type==="path"?r:p.set({},r,{fill:!1}),a)},_draw:function(e,t,r,a){var u=this._children;if(u.length){t=t.extend({dontStart:!0,dontFinish:!0}),e.beginPath();for(var h=0,f=u.length;h<f;h++)u[h].draw(e,t,a);if(!t.clip){this._setStyles(e,t,r);var d=this._style;d.hasFill()&&(e.fill(d.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),d.hasStroke()&&e.stroke()}}},_drawSelected:function(e,t,r){for(var a=this._children,u=0,h=a.length;u<h;u++){var f=a[u],d=f._matrix;r[f._id]||f._drawSelected(e,d.isIdentity()?t:t.appended(d))}}},new function(){function e(t,r){var a=t._children;if(r&&!a.length)throw new Error("Use a moveTo() command first");return a[a.length-1]}return p.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(t){this[t]=function(){var r=e(this,!0);r[t].apply(r,arguments)}},{moveTo:function(){var t=e(this),r=t&&t.isEmpty()?t:new Ee(M.NO_INSERT);r!==t&&this.addChild(r),r.moveTo.apply(r,arguments)},moveBy:function(){var t=e(this,!0),r=t&&t.getLastSegment(),a=U.read(arguments);this.moveTo(r?a.add(r._point):a)},closePath:function(t){e(this,!0).closePath(t)}})},p.each(["reverse","flatten","simplify","smooth"],function(e){this[e]=function(t){for(var r=this._children,a,u=0,h=r.length;u<h;u++)a=r[u][e](t)||a;return a}},{}));me.inject(new function(){var e=Math.min,t=Math.max,r=Math.abs,a={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};function u(w){return w._children||[w]}function h(w,k){var v=w.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);if(k){for(var I=u(v),R=0,N=I.length;R<N;R++){var w=I[R];!w._closed&&!w.isEmpty()&&(w.closePath(1e-12),w.getFirstSegment().setHandleIn(0,0),w.getLastSegment().setHandleOut(0,0))}v=v.resolveCrossings().reorient(v.getFillRule()==="nonzero",!0)}return v}function f(w,k,v,I,R){var N=new ot(M.NO_INSERT);return N.addChildren(w,!0),N=N.reduce({simplify:k}),R&&R.insert==!1||N.insertAbove(I&&v.isSibling(I)&&v.getIndex()<I.getIndex()?I:v),N.copyAttributes(v,!0),N}function d(w){return w.hasOverlap()||w.isCrossing()}function g(w,k,v,I){if(I&&(I.trace==!1||I.stroke)&&/^(subtract|intersect)$/.test(v))return m(w,k,v);var R=h(w,!0),N=k&&w!==k&&h(k,!0),E=a[v];E[v]=!0,N&&(E.subtract||E.exclude)^(N.isClockwise()^R.isClockwise())&&N.reverse();var V=y(Re.expand(R.getIntersections(N,d))),H=u(R),q=N&&u(N),K=[],B=[],W;function $(Be){for(var Ze=0,Ke=Be.length;Ze<Ke;Ze++){var tt=Be[Ze];p.push(K,tt._segments),p.push(B,tt.getCurves()),tt._overlapsOnly=!0}}function X(Be){for(var Ze=[],Ke=0,tt=Be&&Be.length;Ke<tt;Ke++)Ze.push(B[Be[Ke]]);return Ze}if(V.length){$(H),q&&$(q);for(var ee=new Array(B.length),ne=0,_e=B.length;ne<_e;ne++)ee[ne]=B[ne].getValues();for(var Pe=te.findCurveBoundsCollisions(ee,ee,0,!0),Te={},ne=0;ne<B.length;ne++){var De=B[ne],ue=De._path._id,he=Te[ue]=Te[ue]||{};he[De.getIndex()]={hor:X(Pe[ne].hor),ver:X(Pe[ne].ver)}}for(var ne=0,_e=V.length;ne<_e;ne++)P(V[ne]._segment,R,N,Te,E);for(var ne=0,_e=K.length;ne<_e;ne++){var Me=K[ne],Ue=Me._intersection;Me._winding||P(Me,R,N,Te,E),Ue&&Ue._overlap||(Me._path._overlapsOnly=!1)}W=T(K,E)}else W=x(q?H.concat(q):H.slice(),function(Be){return!!E[Be]});return f(W,!0,w,k,I)}function m(w,k,v){var I=h(w),R=h(k),N=I.getIntersections(R,d),E=v==="subtract",V=v==="divide",H={},q=[];function K($){if(!H[$._id]&&(V||R.contains($.getPointAt($.getLength()/2))^E))return q.unshift($),H[$._id]=!0}for(var B=N.length-1;B>=0;B--){var W=N[B].split();W&&(K(W)&&W.getFirstSegment().setHandleIn(0,0),I.getLastSegment().setHandleOut(0,0))}return K(I),f(q,!1,w,k)}function b(w,k){for(var v=w;v;){if(v===k)return;v=v._previous}for(;w._next&&w._next!==k;)w=w._next;if(!w._next){for(;k._previous;)k=k._previous;w._next=k,k._previous=w}}function S(w){for(var k=w.length-1;k>=0;k--)w[k].clearHandles()}function x(w,k,v){var I=w&&w.length;if(I){var R=p.each(w,function(Pe,Te){this[Pe._id]={container:null,winding:Pe.isClockwise()?1:-1,index:Te}},{}),N=w.slice().sort(function(Pe,Te){return r(Te.getArea())-r(Pe.getArea())}),E=N[0],V=te.findItemBoundsCollisions(N,null,Q.GEOMETRIC_EPSILON);v==null&&(v=E.isClockwise());for(var H=0;H<I;H++){var q=N[H],K=R[q._id],B=0,W=V[H];if(W){for(var $=null,X=W.length-1;X>=0;X--)if(W[X]<H){$=$||q.getInteriorPoint();var ee=N[W[X]];if(ee.contains($)){var ne=R[ee._id];B=ne.winding,K.winding+=B,K.container=ne.exclude?ne.container:ee;break}}}if(k(K.winding)===k(B))K.exclude=!0,w[K.index]=null;else{var _e=K.container;q.setClockwise(_e?!_e.isClockwise():v)}}}return w}function y(w,k,v){var I=k&&[],R=1e-8,N=1-R,E=!1,V=v||[],H=v&&{},q,K,B;function W(Ze){return Ze._path._id+"."+Ze._segment1._index}for(var $=(v&&v.length)-1;$>=0;$--){var X=v[$];X._path&&(H[W(X)]=!0)}for(var $=w.length-1;$>=0;$--){var ee=w[$],ne=ee._time,_e=ne,Pe=k&&!k(ee),X=ee._curve,Te;if(X&&(X!==K?(E=!X.hasHandles()||H&&H[W(X)],q=[],B=null,K=X):B>=R&&(ne/=B)),Pe){q&&q.push(ee);continue}else k&&I.unshift(ee);if(B=_e,ne<R)Te=X._segment1;else if(ne>N)Te=X._segment2;else{var De=X.divideAtTime(ne,!0);E&&V.push(X,De),Te=De._segment1;for(var ue=q.length-1;ue>=0;ue--){var he=q[ue];he._time=(he._time-ne)/(1-ne)}}ee._setSegment(Te);var Me=Te._intersection,Ue=ee._intersection;if(Me){b(Me,Ue);for(var Be=Me;Be;)b(Be._intersection,Me),Be=Be._next}else Te._intersection=Ue}return v||S(V),I||w}function L(w,k,v,I,R){var N=Array.isArray(k)?k:k[v?"hor":"ver"],E=v?1:0,V=E^1,H=[w.x,w.y],q=H[E],K=H[V],B=1e-9,W=1e-6,$=q-B,X=q+B,ee=0,ne=0,_e=0,Pe=0,Te=!1,De=!1,ue=1,he=[],Me,Ue;function Be(Ie){var It=Ie[V+0],At=Ie[V+6];if(!(K<e(It,At)||K>t(It,At))){var Rt=Ie[E+0],si=Ie[E+2],Si=Ie[E+4],li=Ie[E+6];if(It===At){(Rt<X&&li>$||li<X&&Rt>$)&&(Te=!0);return}var hi=K===It?0:K===At||$>t(Rt,si,Si,li)||X<e(Rt,si,Si,li)?1:ge.solveCubic(Ie,V,K,he,0,1)>0?he[0]:1,Wt=hi===0?Rt:hi===1?li:ge.getPoint(Ie,hi)[v?"y":"x"],ti=It>At?1:-1,Pi=Me[V]>Me[V+6]?1:-1,Nt=Me[E+6];return K!==It?(Wt<$?_e+=ti:Wt>X?Pe+=ti:Te=!0,Wt>q-W&&Wt<q+W&&(ue/=2)):(ti!==Pi?Rt<$?_e+=ti:Rt>X&&(Pe+=ti):Rt!=Nt&&(Nt<X&&Wt>X?(Pe+=ti,Te=!0):Nt>$&&Wt<$&&(_e+=ti,Te=!0)),ue/=4),Me=Ie,!R&&Wt>$&&Wt<X&&ge.getTangent(Ie,hi)[v?"x":"y"]===0&&L(w,k,!v,I,!0)}}function Ze(Ie){var It=Ie[V+0],At=Ie[V+2],Rt=Ie[V+4],si=Ie[V+6];if(K<=t(It,At,Rt,si)&&K>=e(It,At,Rt,si)){for(var Si=Ie[E+0],li=Ie[E+2],hi=Ie[E+4],Wt=Ie[E+6],ti=$>t(Si,li,hi,Wt)||X<e(Si,li,hi,Wt)?[Ie]:ge.getMonoCurves(Ie,v),Pi,Nt=0,jt=ti.length;Nt<jt;Nt++)if(Pi=Be(ti[Nt]))return Pi}}for(var Ke=0,tt=N.length;Ke<tt;Ke++){var at=N[Ke],Xe=at._path,Lt=at.getValues(),Et;if((!Ke||N[Ke-1]._path!==Xe)&&(Me=null,Xe._closed||(Ue=ge.getValues(Xe.getLastCurve().getSegment2(),at.getSegment1(),null,!I),Ue[V]!==Ue[V+6]&&(Me=Ue)),!Me)){Me=Lt;for(var Vt=Xe.getLastCurve();Vt&&Vt!==at;){var Tt=Vt.getValues();if(Tt[V]!==Tt[V+6]){Me=Tt;break}Vt=Vt.getPrevious()}}if(Et=Ze(Lt))return Et;if(Ke+1===tt||N[Ke+1]._path!==Xe){if(Ue&&(Et=Ze(Ue)))return Et;Te&&!_e&&!Pe&&(_e=Pe=Xe.isClockwise(I)^v?1:-1),ee+=_e,ne+=Pe,_e=Pe=0,Te&&(De=!0,Te=!1),Ue=null}}return ee=r(ee),ne=r(ne),{winding:t(ee,ne),windingL:ee,windingR:ne,quality:ue,onPath:De}}function P(w,k,v,I,R){var N=[],E=w,V=0,B;do{var H=w.getCurve();if(H){var q=H.getLength();N.push({segment:w,curve:H,length:q}),V+=q}w=w.getNext()}while(w&&!w._intersection&&w!==E);for(var K=[.5,.25,.75],B={winding:0,quality:-1},W=.001,$=1-W,X=0;X<K.length&&B.quality<.5;X++)for(var q=V*K[X],ee=0,ne=N.length;ee<ne;ee++){var _e=N[ee],Pe=_e.length;if(q<=Pe){var H=_e.curve,Te=H._path,De=Te._parent,ue=De instanceof ot?De:Te,he=Q.clamp(H.getTimeAt(q),W,$),Me=H.getPointAtTime(he),Ue=r(H.getTangentAtTime(he).y)<Math.SQRT1_2,Be=null;if(R.subtract&&v){var Ze=ue===k?v:k,Ke=Ze._getWinding(Me,Ue,!0);if(ue===k&&Ke.winding||ue===v&&!Ke.winding){if(Ke.quality<1)continue;Be={winding:0,quality:1}}}Be=Be||L(Me,I[Te._id][H.getIndex()],Ue,!0),Be.quality>B.quality&&(B=Be);break}q-=Pe}for(var ee=N.length-1;ee>=0;ee--)N[ee].segment._winding=B}function T(w,k){var v=[],I;function R(tt){var at;return!!(tt&&!tt._visited&&(!k||k[(at=tt._winding||{}).winding]&&!(k.unite&&at.winding===2&&at.windingL&&at.windingR)))}function N(tt){if(tt){for(var at=0,Xe=I.length;at<Xe;at++)if(tt===I[at])return!0}return!1}function E(tt){for(var at=tt._segments,Xe=0,Lt=at.length;Xe<Lt;Xe++)at[Xe]._visited=!0}function V(tt,at){var Xe=tt._intersection,Lt=Xe,Et=[];at&&(I=[tt]);function Vt(Tt,Ie){for(;Tt&&Tt!==Ie;){var It=Tt._segment,At=It&&It._path;if(At){var Rt=It.getNext()||At.getFirstSegment(),si=Rt._intersection;It!==tt&&(N(It)||N(Rt)||Rt&&R(It)&&(R(Rt)||si&&R(si._segment)))&&Et.push(It),at&&I.push(It)}Tt=Tt._next}}if(Xe){for(Vt(Xe);Xe&&Xe._previous;)Xe=Xe._previous;Vt(Xe,Lt)}return Et}w.sort(function(tt,at){var Xe=tt._intersection,Lt=at._intersection,Et=!!(Xe&&Xe._overlap),Vt=!!(Lt&&Lt._overlap),Tt=tt._path,Ie=at._path;return Et^Vt?Et?1:-1:!Xe^!Lt?Xe?1:-1:Tt!==Ie?Tt._id-Ie._id:tt._index-at._index});for(var H=0,q=w.length;H<q;H++){var K=w[H],B=R(K),W=null,$=!1,X=!0,ee=[],ne,_e,Pe;if(B&&K._path._overlapsOnly){var Te=K._path,De=K._intersection._segment._path;Te.compare(De)&&(Te.getArea()&&v.push(Te.clone(!1)),E(Te),E(De),B=!1)}for(;B;){var ue=!W,he=V(K,ue),Me=he.shift(),$=!ue&&(N(K)||N(Me)),Ue=!$&&Me;if(ue&&(W=new Ee(M.NO_INSERT),ne=null),$){(K.isFirst()||K.isLast())&&(X=K._path._closed),K._visited=!0;break}if(Ue&&ne&&(ee.push(ne),ne=null),ne||(Ue&&he.push(K),ne={start:W._segments.length,crossings:he,visited:_e=[],handleIn:Pe}),Ue&&(K=Me),!R(K)){W.removeSegments(ne.start);for(var Be=0,Ze=_e.length;Be<Ze;Be++)_e[Be]._visited=!1;_e.length=0;do K=ne&&ne.crossings.shift(),(!K||!K._path)&&(K=null,ne=ee.pop(),ne&&(_e=ne.visited,Pe=ne.handleIn));while(ne&&!R(K));if(!K)break}var Ke=K.getNext();W.add(new qe(K._point,Pe,Ke&&K._handleOut)),K._visited=!0,_e.push(K),K=Ke||K._path.getFirstSegment(),Pe=Ke&&Ke._handleIn}$&&(X&&(W.getFirstSegment().setHandleIn(Pe),W.setClosed(X)),W.getArea()!==0&&v.push(W))}return v}return{_getWinding:function(w,k,v){return L(w,this.getCurves(),k,v)},unite:function(w,k){return g(this,w,"unite",k)},intersect:function(w,k){return g(this,w,"intersect",k)},subtract:function(w,k){return g(this,w,"subtract",k)},exclude:function(w,k){return g(this,w,"exclude",k)},divide:function(w,k){return k&&(k.trace==!1||k.stroke)?m(this,w,"divide"):f([this.subtract(w,k),this.intersect(w,k)],!0,this,w,k)},resolveCrossings:function(){var w=this._children,k=w||[this];function v(ne,_e){var Pe=ne&&ne._intersection;return Pe&&Pe._overlap&&Pe._path===_e}var I=!1,R=!1,N=this.getIntersections(null,function(ne){return ne.hasOverlap()&&(I=!0)||ne.isCrossing()&&(R=!0)}),E=I&&R&&[];if(N=Re.expand(N),I)for(var V=y(N,function(ne){return ne.hasOverlap()},E),H=V.length-1;H>=0;H--){var q=V[H],K=q._path,B=q._segment,W=B.getPrevious(),$=B.getNext();v(W,K)&&v($,K)&&(B.remove(),W._handleOut._set(0,0),$._handleIn._set(0,0),W!==B&&!W.getCurve().hasLength()&&($._handleIn.set(W._handleIn),W.remove()))}R&&(y(N,I&&function(ne){var _e=ne.getCurve(),Pe=ne.getSegment(),Te=ne._intersection,De=Te._curve,ue=Te._segment;if(_e&&De&&_e._path&&De._path)return!0;Pe&&(Pe._intersection=null),ue&&(ue._intersection=null)},E),E&&S(E),k=T(p.each(k,function(ne){p.push(this,ne._segments)},[])));var X=k.length,ee;return X>1&&w?(k!==w&&this.setChildren(k),ee=this):X===1&&!w&&(k[0]!==this&&this.setSegments(k[0].removeSegments()),ee=this),ee||(ee=new ot(M.NO_INSERT),ee.addChildren(k),ee=ee.reduce(),ee.copyAttributes(this),this.replaceWith(ee)),ee},reorient:function(w,k){var v=this._children;return v&&v.length?this.setChildren(x(this.removeChildren(),function(I){return!!(w?I:I&1)},k)):k!==o&&this.setClockwise(k),this},getInteriorPoint:function(){var w=this.getBounds(),k=w.getCenter(!0);if(!this.contains(k)){for(var v=this.getCurves(),I=k.y,R=[],N=[],E=0,V=v.length;E<V;E++){var H=v[E].getValues(),q=H[1],K=H[3],B=H[5],W=H[7];if(I>=e(q,K,B,W)&&I<=t(q,K,B,W))for(var $=ge.getMonoCurves(H),X=0,ee=$.length;X<ee;X++){var ne=$[X],_e=ne[1],Pe=ne[7];if(_e!==Pe&&(I>=_e&&I<=Pe||I>=Pe&&I<=_e)){var Te=I===_e?ne[0]:I===Pe?ne[6]:ge.solveCubic(ne,1,I,N,0,1)===1?ge.getPoint(ne,N[0]).x:(ne[0]+ne[6])/2;R.push(Te)}}}R.length>1&&(R.sort(function(De,ue){return De-ue}),k.x=(R[0]+R[1])/2)}return k}}});var St=p.extend({_class:"PathFlattener",initialize:function(e,t,r,a,u){var h=[],f=[],d=0,g=1/(r||32),m=e._segments,b=m[0],S;function x(T,w){var k=ge.getValues(T,w,u);h.push(k),y(k,T._index,0,1)}function y(T,w,k,v){if(v-k>g&&!(a&&ge.isStraight(T))&&!ge.isFlatEnough(T,t||.25)){var I=ge.subdivide(T,.5),R=(k+v)/2;y(I[0],w,k,R),y(I[1],w,R,v)}else{var N=T[6]-T[0],E=T[7]-T[1],V=Math.sqrt(N*N+E*E);V>0&&(d+=V,f.push({offset:d,curve:T,index:w,time:v}))}}for(var L=1,P=m.length;L<P;L++)S=m[L],x(b,S),b=S;e._closed&&x(S||b,m[0]),this.curves=h,this.parts=f,this.length=d,this.index=0},_get:function(e){for(var t=this.parts,r=t.length,a,u=this.index;a=u,!(!u||t[--u].offset<e););for(;a<r;a++){var h=t[a];if(h.offset>=e){this.index=a;var f=t[a-1],d=f&&f.index===h.index?f.time:0,g=f?f.offset:0;return{index:h.index,time:d+(h.time-d)*(e-g)/(h.offset-g)}}}return{index:t[r-1].index,time:1}},drawPart:function(e,t,r){for(var a=this._get(t),u=this._get(r),h=a.index,f=u.index;h<=f;h++){var d=ge.getPart(this.curves[h],h===a.index?a.time:0,h===u.index?u.time:1);h===a.index&&e.moveTo(d[0],d[1]),e.bezierCurveTo.apply(e,d.slice(2))}}},p.each(ge._evaluateMethods,function(e){this[e+"At"]=function(t){var r=this._get(t);return ge[e](this.curves[r.index],r.time)}},{})),zt=p.extend({initialize:function(e){for(var t=this.points=[],r=e._segments,a=e._closed,u=0,h,f=r.length;u<f;u++){var d=r[u].point;(!h||!h.equals(d))&&t.push(h=d.clone())}a&&(t.unshift(t[t.length-1]),t.push(t[1])),this.closed=a},fit:function(e){var t=this.points,r=t.length,a=null;return r>0&&(a=[new qe(t[0])],r>1&&(this.fitCubic(a,e,0,r-1,t[1].subtract(t[0]),t[r-2].subtract(t[r-1])),this.closed&&(a.shift(),a.pop()))),a},fitCubic:function(e,t,r,a,u,h){var f=this.points;if(a-r===1){var d=f[r],g=f[a],m=d.getDistance(g)/3;this.addCurve(e,[d,d.add(u.normalize(m)),g.add(h.normalize(m)),g]);return}for(var b=this.chordLengthParameterize(r,a),S=Math.max(t,t*t),x,y=!0,L=0;L<=4;L++){var P=this.generateBezier(r,a,b,u,h),T=this.findMaxError(r,a,P,b);if(T.error<t&&y){this.addCurve(e,P);return}if(x=T.index,T.error>=S)break;y=this.reparameterize(r,a,b,P),S=T.error}var w=f[x-1].subtract(f[x+1]);this.fitCubic(e,t,r,x,u,w),this.fitCubic(e,t,x,a,w.negate(),h)},addCurve:function(e,t){var r=e[e.length-1];r.setHandleOut(t[1].subtract(t[0])),e.push(new qe(t[3],t[2].subtract(t[3])))},generateBezier:function(e,t,r,a,u){for(var h=1e-12,f=Math.abs,d=this.points,g=d[e],m=d[t],b=[[0,0],[0,0]],S=[0,0],x=0,y=t-e+1;x<y;x++){var L=r[x],P=1-L,T=3*L*P,w=P*P*P,k=T*P,v=T*L,I=L*L*L,R=a.normalize(k),N=u.normalize(v),E=d[e+x].subtract(g.multiply(w+k)).subtract(m.multiply(v+I));b[0][0]+=R.dot(R),b[0][1]+=R.dot(N),b[1][0]=b[0][1],b[1][1]+=N.dot(N),S[0]+=R.dot(E),S[1]+=N.dot(E)}var V=b[0][0]*b[1][1]-b[1][0]*b[0][1],H,q;if(f(V)>h){var K=b[0][0]*S[1]-b[1][0]*S[0],B=S[0]*b[1][1]-S[1]*b[0][1];H=B/V,q=K/V}else{var W=b[0][0]+b[0][1],$=b[1][0]+b[1][1];H=q=f(W)>h?S[0]/W:f($)>h?S[1]/$:0}var X=m.getDistance(g),ee=h*X,ne,_e;if(H<ee||q<ee)H=q=X/3;else{var Pe=m.subtract(g);ne=a.normalize(H),_e=u.normalize(q),ne.dot(Pe)-_e.dot(Pe)>X*X&&(H=q=X/3,ne=_e=null)}return[g,g.add(ne||a.normalize(H)),m.add(_e||u.normalize(q)),m]},reparameterize:function(e,t,r,a){for(var u=e;u<=t;u++)r[u-e]=this.findRoot(a,this.points[u],r[u-e]);for(var u=1,h=r.length;u<h;u++)if(r[u]<=r[u-1])return!1;return!0},findRoot:function(e,t,r){for(var a=[],u=[],h=0;h<=2;h++)a[h]=e[h+1].subtract(e[h]).multiply(3);for(var h=0;h<=1;h++)u[h]=a[h+1].subtract(a[h]).multiply(2);var f=this.evaluate(3,e,r),d=this.evaluate(2,a,r),g=this.evaluate(1,u,r),m=f.subtract(t),b=d.dot(d)+m.dot(g);return Q.isMachineZero(b)?r:r-m.dot(d)/b},evaluate:function(e,t,r){for(var a=t.slice(),u=1;u<=e;u++)for(var h=0;h<=e-u;h++)a[h]=a[h].multiply(1-r).add(a[h+1].multiply(r));return a[0]},chordLengthParameterize:function(e,t){for(var r=[0],a=e+1;a<=t;a++)r[a-e]=r[a-e-1]+this.points[a].getDistance(this.points[a-1]);for(var a=1,u=t-e;a<=u;a++)r[a]/=r[u];return r},findMaxError:function(e,t,r,a){for(var u=Math.floor((t-e+1)/2),h=0,f=e+1;f<t;f++){var d=this.evaluate(3,r,a[f-e]),g=d.subtract(this.points[f]),m=g.x*g.x+g.y*g.y;m>=h&&(h=m,u=f)}return{error:h,index:u}}}),oi=M.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var r=t&&p.isPlainObject(t)&&t.x===o&&t.y===o;this._initialize(r&&t,!r&&U.read(arguments))},_equals:function(e){return this._content===e._content},copyContent:function(e){this.setContent(e._content)},getContent:function(){return this._content},setContent:function(e){this._content=""+e,this._lines=this._content.split(/\r\n|\n|\r/mg),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),gn=oi.extend({_class:"PointText",initialize:function(){oi.apply(this,arguments)},getPoint:function(){var e=this._matrix.getTranslation();return new ze(e.x,e.y,this,"setPoint")},setPoint:function(){var e=U.read(arguments);this.translate(e.subtract(this._matrix.getTranslation()))},_draw:function(e,t,r){if(this._content){this._setStyles(e,t,r);var a=this._lines,u=this._style,h=u.hasFill(),f=u.hasStroke(),d=u.getLeading(),g=e.shadowColor;e.font=u.getFontStyle(),e.textAlign=u.getJustification();for(var m=0,b=a.length;m<b;m++){e.shadowColor=g;var S=a[m];h&&(e.fillText(S,0,0),e.shadowColor="rgba(0,0,0,0)"),f&&e.strokeText(S,0,0),e.translate(0,d)}}},_getBounds:function(e,t){var r=this._style,a=this._lines,u=a.length,h=r.getJustification(),f=r.getLeading(),d=this.getView().getTextWidth(r.getFontStyle(),a),g=0;h!=="left"&&(g-=d/(h==="center"?2:1));var m=new Ce(g,u?-.75*f:0,d,u*f);return e?e._transformBounds(m,m):m}}),Pt=p.extend(new function(){var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},t={},r={transparent:[0,0,0,0]},a;function u(d){var g=d.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||d.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),m="rgb",b;if(g){var S=g[4]?4:3;b=new Array(S);for(var x=0;x<S;x++){var y=g[x+1];b[x]=parseInt(y.length==1?y+y:y,16)/255}}else if(g=d.match(/^(rgb|hsl)a?\((.*)\)$/)){m=g[1],b=g[2].trim().split(/[,\s]+/g);for(var L=m==="hsl",x=0,P=Math.min(b.length,4);x<P;x++){var T=b[x],y=parseFloat(T);if(L)if(x===0){var w=T.match(/([a-z]*)$/)[1];y*={turn:360,rad:180/Math.PI,grad:.9}[w]||1}else x<3&&(y/=100);else x<3&&(y/=/%$/.test(T)?100:255);b[x]=y}}else{var k=r[d];if(!k)if(c){a||(a=ce.getContext(1,1,{willReadFrequently:!0}),a.globalCompositeOperation="copy"),a.fillStyle="rgba(0,0,0,0)",a.fillStyle=d,a.fillRect(0,0,1,1);var v=a.getImageData(0,0,1,1).data;k=r[d]=[v[0]/255,v[1]/255,v[2]/255]}else k=[0,0,0];b=k.slice()}return[m,b]}var h=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],f={"rgb-hsb":function(d,g,m){var b=Math.max(d,g,m),S=Math.min(d,g,m),x=b-S,y=x===0?0:(b==d?(g-m)/x+(g<m?6:0):b==g?(m-d)/x+2:(d-g)/x+4)*60;return[y,b===0?0:x/b,b]},"hsb-rgb":function(d,g,m){d=(d/60%6+6)%6;var S=Math.floor(d),b=d-S,S=h[S],x=[m,m*(1-g),m*(1-g*b),m*(1-g*(1-b))];return[x[S[0]],x[S[1]],x[S[2]]]},"rgb-hsl":function(d,g,m){var b=Math.max(d,g,m),S=Math.min(d,g,m),x=b-S,y=x===0,L=y?0:(b==d?(g-m)/x+(g<m?6:0):b==g?(m-d)/x+2:(d-g)/x+4)*60,P=(b+S)/2,T=y?0:P<.5?x/(b+S):x/(2-b-S);return[L,T,P]},"hsl-rgb":function(d,g,m){if(d=(d/360%1+1)%1,g===0)return[m,m,m];for(var b=[d+1/3,d,d-1/3],S=m<.5?m*(1+g):m+g-m*g,x=2*m-S,y=[],L=0;L<3;L++){var P=b[L];P<0&&(P+=1),P>1&&(P-=1),y[L]=6*P<1?x+(S-x)*6*P:2*P<1?S:3*P<2?x+(S-x)*(2/3-P)*6:x}return y},"rgb-gray":function(d,g,m){return[d*.2989+g*.587+m*.114]},"gray-rgb":function(d){return[d,d,d]},"gray-hsb":function(d){return[0,0,d]},"gray-hsl":function(d){return[0,0,d]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return p.each(e,function(d,g){t[g]=[],p.each(d,function(m,b){var S=p.capitalize(m),x=/^(hue|saturation)$/.test(m),y=t[g][b]=g==="gradient"?m==="gradient"?function(L){var P=this._components[0];return L=ui.read(Array.isArray(L)?L:arguments,0,{readNull:!0}),P!==L&&(P&&P._removeOwner(this),L&&L._addOwner(this)),L}:function(){return U.read(arguments,0,{readNull:m==="highlight",clone:!0})}:function(L){return L==null||isNaN(L)?0:+L};this["get"+S]=function(){return this._type===g||x&&/^hs[bl]$/.test(this._type)?this._components[b]:this._convert(g)[b]},this["set"+S]=function(L){this._type!==g&&!(x&&/^hs[bl]$/.test(this._type))&&(this._components=this._convert(g),this._properties=e[g],this._type=g),this._components[b]=y.call(this,L),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function d(g){var m=arguments,b=this.__read,S=0,x,y,L,P;Array.isArray(g)&&(m=g,g=m[0]);var T=g!=null&&typeof g;if(T==="string"&&g in e&&(x=g,g=m[1],Array.isArray(g)?(y=g,L=m[2]):(b&&(S=1),m=p.slice(m,1),T=typeof g)),!y){if(P=T==="number"?m:T==="object"&&g.length!=null?g:null,P){x||(x=P.length>=3?"rgb":"gray");var w=e[x].length;L=P[w],b&&(S+=P===arguments?w+(L!=null?1:0):1),P.length>w&&(P=p.slice(P,0,w))}else if(T==="string"){var k=u(g);x=k[0],y=k[1],y.length===4&&(L=y[3],y.length--)}else if(T==="object")if(g.constructor===d){if(x=g._type,y=g._components.slice(),L=g._alpha,x==="gradient")for(var v=1,I=y.length;v<I;v++){var R=y[v];R&&(y[v]=R.clone())}}else if(g.constructor===ui)x="gradient",P=m;else{x="hue"in g?"lightness"in g?"hsl":"hsb":"gradient"in g||"stops"in g||"radial"in g?"gradient":"gray"in g?"gray":"rgb";var N=e[x],E=t[x];this._components=y=[];for(var v=0,I=N.length;v<I;v++){var V=g[N[v]];V==null&&!v&&x==="gradient"&&"stops"in g&&(V={stops:g.stops,radial:g.radial}),V=E[v].call(this,V),V!=null&&(y[v]=V)}L=g.alpha}b&&x&&(S=1)}if(this._type=x||"rgb",!y){this._components=y=[];for(var E=t[this._type],v=0,I=E.length;v<I;v++){var V=E[v].call(this,P&&P[v]);V!=null&&(y[v]=V)}}return this._components=y,this._properties=e[this._type],this._alpha=L,b&&(this.__read=S),this},set:"#initialize",_serialize:function(d,g){var m=this.getComponents();return p.serialize(/^(gray|rgb)$/.test(this._type)?m:[this._type].concat(m),d,!0,g)},_changed:function(){this._canvasStyle=null,this._owner&&(this._setter?this._owner[this._setter](this):this._owner._changed(129))},_convert:function(d){var g;return this._type===d?this._components.slice():(g=f[this._type+"-"+d])?g.apply(this,this._components):f["rgb-"+d].apply(this,f[this._type+"-rgb"].apply(this,this._components))},convert:function(d){return new Pt(d,this._convert(d),this._alpha)},getType:function(){return this._type},setType:function(d){this._components=this._convert(d),this._properties=e[d],this._type=d},getComponents:function(){var d=this._components.slice();return this._alpha!=null&&d.push(this._alpha),d},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(d){this._alpha=d==null?null:Math.min(Math.max(d,0),1),this._changed()},hasAlpha:function(){return this._alpha!=null},equals:function(d){var g=p.isPlainValue(d,!0)?Pt.read(arguments):d;return g===this||g&&this._class===g._class&&this._type===g._type&&this.getAlpha()===g.getAlpha()&&p.equals(this._components,g._components)||!1},toString:function(){for(var d=this._properties,g=[],m=this._type==="gradient",b=J.instance,S=0,x=d.length;S<x;S++){var y=this._components[S];y!=null&&g.push(d[S]+": "+(m?y:b.number(y)))}return this._alpha!=null&&g.push("alpha: "+b.number(this._alpha)),"{ "+g.join(", ")+" }"},toCSS:function(d){var g=this._convert("rgb"),m=d||this._alpha==null?1:this._alpha;function b(S){return Math.round((S<0?0:S>1?1:S)*255)}return g=[b(g[0]),b(g[1]),b(g[2])],m<1&&g.push(m<0?0:m),d?"#"+((1<<24)+(g[0]<<16)+(g[1]<<8)+g[2]).toString(16).slice(1):(g.length==4?"rgba(":"rgb(")+g.join(",")+")"},toCanvasStyle:function(d,g){if(this._canvasStyle)return this._canvasStyle;if(this._type!=="gradient")return this._canvasStyle=this.toCSS();var m=this._components,b=m[0],S=b._stops,x=m[1],y=m[2],L=m[3],P=g&&g.inverted(),T;if(P&&(x=P._transformPoint(x),y=P._transformPoint(y),L&&(L=P._transformPoint(L))),b._radial){var w=y.getDistance(x);if(L){var k=L.subtract(x);k.getLength()>w&&(L=x.add(k.normalize(w-.1)))}var v=L||x;T=d.createRadialGradient(v.x,v.y,0,x.x,x.y,w)}else T=d.createLinearGradient(x.x,x.y,y.x,y.y);for(var I=0,R=S.length;I<R;I++){var N=S[I],E=N._offset;T.addColorStop(E??I/(R-1),N._color.toCanvasStyle())}return this._canvasStyle=T},transform:function(d){if(this._type==="gradient"){for(var g=this._components,m=1,b=g.length;m<b;m++){var S=g[m];d._transformPoint(S,S,!0)}this._changed()}},statics:{_types:e,random:function(){var d=Math.random;return new Pt(d(),d(),d())},_setOwner:function(d,g,m){return d&&(d._owner&&g&&d._owner!==g&&(d=d.clone()),!d._owner^!g&&(d._owner=g||null,d._setter=m||null)),d}}})},new function(){var e={add:function(t,r){return t+r},subtract:function(t,r){return t-r},multiply:function(t,r){return t*r},divide:function(t,r){return t/r}};return p.each(e,function(t,r){this[r]=function(a){a=Pt.read(arguments);for(var u=this._type,h=this._components,f=a._convert(u),d=0,g=h.length;d<g;d++)f[d]=t(h[d],f[d]);return new Pt(u,f,this._alpha!=null?t(this._alpha,a.getAlpha()):null)}},{})}),ui=p.extend({_class:"Gradient",initialize:function(t,r){this._id=oe.get(),t&&p.isPlainObject(t)&&(this.set(t),t=r=null),this._stops==null&&this.setStops(t||["white","black"]),this._radial==null&&this.setRadial(typeof r=="string"&&r==="radial"||r||!1)},_serialize:function(e,t){return t.add(this,function(){return p.serialize([this._stops,this._radial],e,!0,t)})},_changed:function(){for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed()},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length||(this._owners=o))},clone:function(){for(var e=[],t=0,r=this._stops.length;t<r;t++)e[t]=this._stops[t].clone();return new ui(e,this._radial)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var t=this._stops;if(t)for(var r=0,a=t.length;r<a;r++)t[r]._owner=o;t=this._stops=Ti.readList(e,0,{clone:!0});for(var r=0,a=t.length;r<a;r++)t[r]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(e){this._radial=e,this._changed()},equals:function(e){if(e===this)return!0;if(e&&this._class===e._class){var t=this._stops,r=e._stops,a=t.length;if(a===r.length){for(var u=0;u<a;u++)if(!t[u].equals(r[u]))return!1;return!0}}return!1}}),Ti=p.extend({_class:"GradientStop",initialize:function(t,r){var a=t,u=r;typeof t=="object"&&r===o&&(Array.isArray(t)&&typeof t[0]!="number"?(a=t[0],u=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(a=t.color,u=t.offset||t.rampPoint||0)),this.setColor(a),this.setOffset(u)},clone:function(){return new Ti(this._color.clone(),this._offset)},_serialize:function(e,t){var r=this._color,a=this._offset;return p.serialize(a==null?[r]:[r,a],e,!0,t)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(e){this._offset=e,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){Pt._setOwner(this._color,null),this._color=Pt._setOwner(Pt.read(arguments,0),this,"setColor"),this._changed()},equals:function(e){return e===this||e&&this._class===e._class&&this._color.equals(e._color)&&this._offset==e._offset||!1}}),Di=p.extend(new function(){var e={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new U,selectedColor:null},t=p.set({},e,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),r=p.set({},t,{fillColor:new Pt}),a={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},u={beans:!0},h={_class:"Style",beans:!0,initialize:function(d,g,m){this._values={},this._owner=g,this._project=g&&g._project||m||Ae.project,this._defaults=!g||g instanceof Ge?t:g instanceof oi?r:e,d&&this.set(d)}};return p.each(t,function(f,d){var g=/Color$/.test(d),m=d==="shadowOffset",b=p.capitalize(d),S=a[d],x="set"+b,y="get"+b;h[x]=function(L){var P=this._owner,T=P&&P._children,w=T&&T.length>0&&!(P instanceof ot);if(w)for(var k=0,v=T.length;k<v;k++)T[k]._style[x](L);if((d==="selectedColor"||!w)&&d in this._defaults){var I=this._values[d];I!==L&&(g&&(I&&(Pt._setOwner(I,null),I._canvasStyle=null),L&&L.constructor===Pt&&(L=Pt._setOwner(L,P,w&&x))),this._values[d]=L,P&&P._changed(S||129))}},h[y]=function(L){var P=this._owner,T=P&&P._children,w=T&&T.length>0&&!(P instanceof ot),k;if(w&&!L)for(var v=0,I=T.length;v<I;v++){var R=T[v]._style[y]();if(!v)k=R;else if(!p.equals(k,R))return o}else if(d in this._defaults){var k=this._values[d];if(k===o)k=this._defaults[d],k&&k.clone&&(k=k.clone());else{var N=g?Pt:m?U:null;N&&!(k&&k.constructor===N)&&(this._values[d]=k=N.read([k],0,{readNull:!0,clone:!0}))}}return k&&g&&(k=Pt._setOwner(k,P,w&&x)),k},u[y]=function(L){return this._style[y](L)},u[x]=function(L){this._style[x](L)}}),p.each({Font:"FontFamily",WindingRule:"FillRule"},function(f,d){var g="get"+d,m="set"+d;h[g]=u[g]="#get"+f,h[m]=u[m]="#set"+f}),M.inject(u),h},{set:function(e){var t=e instanceof Di,r=t?e._values:e;if(r){for(var a in r)if(a in this._defaults){var u=r[a];this[a]=u&&t&&u.clone?u.clone():u}}},equals:function(e){function t(r,a,u){var h=r._values,f=a._values,d=a._defaults;for(var g in h){var m=h[g],b=f[g];if(!(u&&g in f)&&!p.equals(m,b===o?d[g]:b))return!1}return!0}return e===this||e&&this._class===e._class&&t(this,e)&&t(e,this,!0)||!1},_dispose:function(){var e;e=this.getFillColor(),e&&(e._canvasStyle=null),e=this.getStrokeColor(),e&&(e._canvasStyle=null),e=this.getShadowColor(),e&&(e._canvasStyle=null)},hasFill:function(){var e=this.getFillColor();return!!e&&e.alpha>0},hasStroke:function(){var e=this.getStrokeColor();return!!e&&e.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var e=this.getShadowColor();return!!e&&e.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var e=this.getFontSize();return this.getFontWeight()+" "+e+(/[a-z]/i.test(e+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function e(){var t=e.base.call(this),r=this.getFontSize();return/pt|em|%|px/.test(r)&&(r=this.getView().getPixelSize(r)),t??r*1.2}}),mt=new function(){function e(t,r,a,u){for(var h=["","webkit","moz","Moz","ms","o"],f=r[0].toUpperCase()+r.substring(1),d=0;d<6;d++){var g=h[d],m=g?g+f:r;if(m in t){if(a)t[m]=u;else return t[m];break}}}return{getStyles:function(t){var r=t&&t.nodeType!==9?t.ownerDocument:t,a=r&&r.defaultView;return a&&a.getComputedStyle(t,"")},getBounds:function(t,r){var a=t.ownerDocument,u=a.body,h=a.documentElement,f;try{f=t.getBoundingClientRect()}catch{f={left:0,top:0,width:0,height:0}}var d=f.left-(h.clientLeft||u.clientLeft||0),g=f.top-(h.clientTop||u.clientTop||0);if(!r){var m=a.defaultView;d+=m.pageXOffset||h.scrollLeft||u.scrollLeft,g+=m.pageYOffset||h.scrollTop||u.scrollTop}return new Ce(d,g,f.width,f.height)},getViewportBounds:function(t){var r=t.ownerDocument,a=r.defaultView,u=r.documentElement;return new Ce(0,0,a.innerWidth||u.clientWidth,a.innerHeight||u.clientHeight)},getOffset:function(t,r){return mt.getBounds(t,r).getPoint()},getSize:function(t){return mt.getBounds(t,!0).getSize()},isInvisible:function(t){return mt.getSize(t).equals(new de(0,0))},isInView:function(t){return!mt.isInvisible(t)&&mt.getViewportBounds(t).intersects(mt.getBounds(t,!0))},isInserted:function(t){return _.body.contains(t)},getPrefixed:function(t,r){return t&&e(t,r)},setPrefixed:function(t,r,a){if(typeof r=="object")for(var u in r)e(t,u,!0,r[u]);else e(t,r,!0,a)}}},pt={add:function(e,t){if(e)for(var r in t)for(var a=t[r],u=r.split(/[\s,]+/g),h=0,f=u.length;h<f;h++){var d=u[h],g=e===_&&(d==="touchstart"||d==="touchmove")?{passive:!1}:!1;e.addEventListener(d,a,g)}},remove:function(e,t){if(e)for(var r in t)for(var a=t[r],u=r.split(/[\s,]+/g),h=0,f=u.length;h<f;h++)e.removeEventListener(u[h],a,!1)},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return new U(t.pageX||t.clientX+_.documentElement.scrollLeft,t.pageY||t.clientY+_.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getRelatedTarget:function(e){return e.relatedTarget||e.toElement},getOffset:function(e,t){return pt.getPoint(e).subtract(mt.getOffset(t||pt.getTarget(e)))}};pt.requestAnimationFrame=new function(){var e=mt.getPrefixed(c,"requestAnimationFrame"),t=!1,r=[],a;function u(){var h=r;r=[];for(var f=0,d=h.length;f<d;f++)h[f]();t=e&&r.length,t&&e(u)}return function(h){r.push(h),e?t||(e(u),t=!0):a||(a=setInterval(u,1e3/60))}};var xt=p.extend(A,{_class:"View",initialize:function e(t,r){function a(S){return r[S]||parseInt(r.getAttribute(S),10)}function u(){var S=mt.getSize(r);return S.isNaN()||S.isZero()?new de(a("width"),a("height")):S}var h;if(c&&r){this._id=r.getAttribute("id"),this._id==null&&r.setAttribute("id",this._id="paper-view-"+e._id++),pt.add(r,this._viewEvents);var f="none";if(mt.setPrefixed(r.style,{userDrag:f,userSelect:f,touchCallout:f,contentZooming:f,tapHighlightColor:"rgba(0,0,0,0)"}),F.hasAttribute(r,"resize")){var d=this;pt.add(c,this._windowEvents={resize:function(){d.setViewSize(u())}})}if(h=u(),F.hasAttribute(r,"stats")&&typeof Stats<"u"){this._stats=new Stats;var g=this._stats.domElement,m=g.style,b=mt.getOffset(r);m.position="absolute",m.left=b.x+"px",m.top=b.y+"px",_.body.appendChild(g)}}else h=new de(r),r=null;this._project=t,this._scope=t._scope,this._element=r,this._pixelRatio||(this._pixelRatio=c&&c.devicePixelRatio||1),this._setElementSize(h.width,h.height),this._viewSize=h,e._views.push(this),e._viewsById[this._id]=this,(this._matrix=new Ve)._owner=this,e._focused||(e._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!Ae.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;xt._focused===this&&(xt._focused=null),xt._views.splice(xt._views.indexOf(this),1),delete xt._viewsById[this._id];var e=this._project;return e._view===this&&(e._view=null),pt.remove(this._element,this._viewEvents),pt.remove(c,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:p.each(M._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(e){this[e]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(e){this._autoUpdate=e,e&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var e=this;pt.requestAnimationFrame(function(){if(e._requested=!1,e._animate){e.requestUpdate();var t=e._element;(!mt.getPrefixed(_,"hidden")||F.getAttribute(t,"keepalive")==="true")&&mt.isInView(t)&&e._handleFrame()}e._autoUpdate&&e.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){Ae=this._scope;var e=Date.now()/1e3,t=this._last?e-this._last:0;this._last=e,this.emit("frame",new p({delta:t,time:this._time+=t,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(e,t){var r=this._frameItems;t?(r[e._id]={item:e,time:0,count:0},++this._frameItemCount===1&&this.on("frame",this._handleFrameItems)):(delete r[e._id],--this._frameItemCount===0&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(e){for(var t in this._frameItems){var r=this._frameItems[t];r.item.emit("frame",new p(e,{time:r.time+=e.delta,count:r.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=o},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return this._pixelRatio*72},getViewSize:function(){var e=this._viewSize;return new be(e.width,e.height,this,"setViewSize")},setViewSize:function(){var e=de.read(arguments),t=e.subtract(this._viewSize);t.isZero()||(this._setElementSize(e.width,e.height),this._viewSize.set(e),this._changed(),this.emit("resize",{size:e,delta:t}),this._autoUpdate&&this.update())},_setElementSize:function(e,t){var r=this._element;r&&(r.width!==e&&(r.width=e),r.height!==t&&(r.height=t))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new Ce(new U,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return mt.isInView(this._element)},isInserted:function(){return mt.isInserted(this._element)},getPixelSize:function(e){var t=this._element,r;if(t){var a=t.parentNode,u=_.createElement("div");u.style.fontSize=e,a.appendChild(u),r=parseFloat(mt.getStyles(u).fontSize),a.removeChild(u)}else r=parseFloat(r);return r},getTextWidth:function(e,t){return 0}},p.each(["rotate","scale","shear","skew"],function(e){var t=e==="rotate";this[e]=function(){var r=arguments,a=(t?p:U).read(r),u=U.read(r,0,{readNull:!0});return this.transform(new Ve()[e](a,u||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var e=new Ve;return this.transform(e.translate.apply(e,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var e=U.read(arguments);this.translate(this.getCenter().subtract(e))},getZoom:function(){var e=this._decompose().scaling;return(e.x+e.y)/2},setZoom:function(e){this.transform(new Ve().scale(e/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(e){var t=this.getRotation();t!=null&&e!=null&&this.rotate(e-t)},getScaling:function(){var e=this._decompose().scaling;return new ze(e.x,e.y,this,"setScaling")},setScaling:function(){var e=this.getScaling(),t=U.read(arguments,0,{clone:!0,readNull:!0});e&&t&&this.scale(t.x/e.x,t.y/e.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var e=this._matrix;e.set.apply(e,arguments)},transform:function(e){this._matrix.append(e)},scrollBy:function(){this.translate(U.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(U.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(U.read(arguments))},getEventPoint:function(e){return this.viewToProject(pt.getOffset(e,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(e,t){_&&typeof t=="string"&&(t=_.getElementById(t));var r=c?j:xt;return new r(e,t)}}},new function(){if(!c)return;var e,t,r=!1,a=!1;function u(B){var W=pt.getTarget(B);return W.getAttribute&&xt._viewsById[W.getAttribute("id")]}function h(){var B=xt._focused;if(!B||!B.isVisible()){for(var W=0,$=xt._views.length;W<$;W++)if((B=xt._views[W]).isVisible()){xt._focused=t=B;break}}}function f(B,W,$){B._handleMouseEvent("mousemove",W,$)}var d=c.navigator,g,m,b;d.pointerEnabled||d.msPointerEnabled?(g="pointerdown MSPointerDown",m="pointermove MSPointerMove",b="pointerup pointercancel MSPointerUp MSPointerCancel"):(g="touchstart",m="touchmove",b="touchend touchcancel","ontouchstart"in c&&d.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(g+=" mousedown",m+=" mousemove",b+=" mouseup"));var S={},x={mouseout:function(B){var W=xt._focused,$=pt.getRelatedTarget(B);if(W&&(!$||$.nodeName==="HTML")){var X=pt.getOffset(B,W._element),ee=X.x,ne=Math.abs,_e=ne(ee),Pe=1<<25,Te=_e-Pe;X.x=ne(Te)<_e?Te*(ee<0?-1:1):ee,f(W,B,W.viewToProject(X))}},scroll:h};S[g]=function(B){var W=xt._focused=u(B);r||(r=!0,W._handleMouseEvent("mousedown",B))},x[m]=function(B){var W=xt._focused;if(!a){var $=u(B);$?W!==$&&(W&&f(W,B),e||(e=W),W=xt._focused=t=$):t&&t===W&&(e&&!e.isInserted()&&(e=null),W=xt._focused=e,e=null,h())}W&&f(W,B)},x[g]=function(){a=!0},x[b]=function(B){var W=xt._focused;W&&r&&W._handleMouseEvent("mouseup",B),a=r=!1},pt.add(_,x),pt.add(c,{load:h});var y=!1,L=!1,P={doubleclick:"click",mousedrag:"mousemove"},T=!1,w,k,v,I,R,N,E,V;function H(B,W,$,X,ee,ne,_e){var Pe=!1,Te;function De(ue,he){if(ue.responds(he)){if(Te||(Te=new ye(he,X,ee,W||ue,ne?ee.subtract(ne):null)),ue.emit(he,Te)&&(y=!0,Te.prevented&&(L=!0),Te.stopped))return Pe=!0}else{var Me=P[he];if(Me)return De(ue,Me)}}for(;B&&B!==_e&&!De(B,$);)B=B._parent;return Pe}function q(B,W,$,X,ee,ne){return B._project.removeOn($),L=y=!1,R&&H(R,null,$,X,ee,ne)||W&&W!==R&&!W.isDescendant(R)&&H(W,null,$==="mousedrag"?"mousemove":$,X,ee,ne,R)||H(B,R||W||B,$,X,ee,ne)}var K={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:S,_handleMouseEvent:function(B,W,$){var X=this._itemEvents,ee=X.native[B],ne=B==="mousemove",_e=this._scope.tool,Pe=this;function Te(Ze){return X.virtual[Ze]||Pe.responds(Ze)||_e&&_e.responds(Ze)}ne&&r&&Te("mousedrag")&&(B="mousedrag"),$||($=this.getEventPoint(W));var De=this.getBounds().contains($),ue=ee&&De&&Pe._project.hitTest($,{tolerance:0,fill:!0,stroke:!0}),he=ue&&ue.item||null,Me=!1,Ue={};if(Ue[B.substr(5)]=!0,ee&&he!==I&&(I&&H(I,null,"mouseleave",W,$),he&&H(he,null,"mouseenter",W,$),I=he),T^De&&(H(this,null,De?"mouseenter":"mouseleave",W,$),Me=!0),(De||Ue.drag)&&!$.equals(k)&&(q(this,he,ne?B:"mousemove",W,$,k),Me=!0),T=De,Ue.down&&De||Ue.up&&w){if(q(this,he,B,W,$,w),Ue.down){if(V=he===N&&Date.now()-E<300,v=N=he,!L&&he){for(var Be=he;Be&&!Be.responds("mousedrag");)Be=Be._parent;Be&&(R=he)}w=$}else Ue.up&&(!L&&he===v&&(E=Date.now(),q(this,he,V?"doubleclick":"click",W,$,w),V=!1),v=R=null);T=!1,Me=!0}k=$,Me&&_e&&(y=_e._handleMouseEvent(B,W,$,Ue)||y),W.cancelable!==!1&&(y&&!Ue.move||Ue.down&&Te("mouseup"))&&W.preventDefault()},_handleKeyEvent:function(B,W,$,X){var ee=this._scope,ne=ee.tool,_e;function Pe(Te){Te.responds(B)&&(Ae=ee,Te.emit(B,_e=_e||new le(B,W,$,X)))}this.isVisible()&&(Pe(this),ne&&ne.responds(B)&&Pe(ne))},_countItemEvent:function(B,W){var $=this._itemEvents,X=$.native,ee=$.virtual;for(var ne in K)X[ne]=(X[ne]||0)+(K[ne][B]||0)*W;ee[B]=(ee[B]||0)+W},statics:{updateFocus:h,_resetState:function(){r=a=y=T=!1,e=t=w=k=v=I=R=N=E=V=null}}}}),j=xt.extend({_class:"CanvasView",initialize:function(t,r){if(!(r instanceof c.HTMLCanvasElement)){var a=de.read(arguments,1);if(a.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+p.slice(arguments,1));r=ce.getCanvas(a)}var u=this._context=r.getContext("2d");if(u.save(),this._pixelRatio=1,!/^off|false$/.test(F.getAttribute(r,"hidpi"))){var h=c.devicePixelRatio||1,f=mt.getPrefixed(u,"backingStorePixelRatio")||1;this._pixelRatio=h/f}xt.call(this,t,r),this._needsUpdate=!0},remove:function e(){return this._context.restore(),e.base.call(this)},_setElementSize:function e(t,r){var a=this._pixelRatio;if(e.base.call(this,t*a,r*a),a!==1){var u=this._element,h=this._context;if(!F.hasAttribute(u,"resize")){var f=u.style;f.width=t+"px",f.height=r+"px"}h.restore(),h.save(),h.scale(a,a)}},getContext:function(){return this._context},getPixelSize:function e(t){var r=Ae.agent,a;if(r&&r.firefox)a=e.base.call(this,t);else{var u=this._context,h=u.font;u.font=t+" serif",a=parseFloat(u.font),u.font=h}return a},getTextWidth:function(e,t){var r=this._context,a=r.font,u=0;r.font=e;for(var h=0,f=t.length;h<f;h++)u=Math.max(u,r.measureText(t[h]).width);return r.font=a,u},update:function(){if(!this._needsUpdate)return!1;var e=this._project,t=this._context,r=this._viewSize;return t.clearRect(0,0,r.width+1,r.height+1),e&&e.draw(t,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),Y=p.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return we.modifiers}}),le=Y.extend({_class:"KeyEvent",initialize:function(t,r,a,u){this.type=t,this.event=r,this.key=a,this.character=u},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),we=new function(){var e={"	":"tab"," ":"space","\b":"backspace","":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},t={tab:"	",space:" ",enter:"\r"},r={},a={},u,h,f=new p({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var m=Ae&&Ae.agent;return m&&m.mac?this.meta:this.control}}});function d(m){var b=m.key||m.keyIdentifier;return b=/^U\+/.test(b)?String.fromCharCode(parseInt(b.substr(2),16)):/^Arrow[A-Z]/.test(b)?b.substr(5):b==="Unidentified"||b===o?String.fromCharCode(m.keyCode):b,e[b]||(b.length>1?p.hyphenate(b):b.toLowerCase())}function g(m,b,S,x){var y=xt._focused,L;if(r[b]=m,m?a[b]=S:delete a[b],b.length>1&&(L=p.camelize(b))in f){f[L]=m;var P=Ae&&Ae.agent;if(L==="meta"&&P&&P.mac)if(m)u={};else{for(var T in u)T in a&&g(!1,T,u[T],x);u=null}}else m&&u&&(u[b]=S);y&&y._handleKeyEvent(m?"keydown":"keyup",x,b,S)}return pt.add(_,{keydown:function(m){var b=d(m),S=Ae&&Ae.agent;b.length>1||S&&S.chrome&&(m.altKey||S.mac&&m.metaKey||!S.mac&&m.ctrlKey)?g(!0,b,t[b]||(b.length>1?"":b),m):h=b},keypress:function(m){if(h){var b=d(m),S=m.charCode,x=S>=32?String.fromCharCode(S):b.length>1?"":b;b!==h&&(b=x.toLowerCase()),g(!0,b,x,m),h=null}},keyup:function(m){var b=d(m);b in a&&g(!1,b,a[b],m)}}),pt.add(c,{blur:function(m){for(var b in a)g(!1,b,a[b],m)}}),{modifiers:f,isDown:function(m){return!!r[m]}}},ye=Y.extend({_class:"MouseEvent",initialize:function(t,r,a,u,h){this.type=t,this.event=r,this.point=a,this.target=u,this.delta=h},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),ve=Y.extend({_class:"ToolEvent",_item:null,initialize:function(t,r,a){this.tool=t,this.type=r,this.event=a},_choosePoint:function(e,t){return e||(t?t.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint());if(e){for(var t=e.item,r=t._parent;/^(Group|CompoundPath)$/.test(r._class);)t=r,r=r._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Ne=D.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){D.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,e!=null&&this._maxDistance!=null&&e>this._maxDistance&&(this._maxDistance=e)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&e!=null&&e<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=this._maxDistance=e},_handleMouseEvent:function(e,t,r,a){Ae=this._scope,a.drag&&!this.responds(e)&&(e="mousemove");var u=a.move||a.drag,h=this.responds(e),f=!1,d=this;function g(b,S){var x=r,y=u?d._point:d._downPoint||x;if(u){if(d._moveCount>=0&&x.equals(y))return!1;if(y&&(b!=null||S!=null)){var L=x.subtract(y),P=L.getLength();if(P<(b||0))return!1;S&&(x=y.add(L.normalize(Math.min(P,S))))}d._moveCount++}return d._point=x,d._lastPoint=y||x,a.down&&(d._moveCount=-1,d._downPoint=x,d._downCount++),!0}function m(){h&&(f=d.emit(e,new ve(d,e,t))||f)}if(a.down)g(),m();else if(a.up)g(null,this._maxDistance),m();else if(h)for(;g(this._minDistance,this._maxDistance);)m();return f}}),Oe=p.extend(A,{_class:"Tween",statics:{easings:new p({linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return e*(2-e)},easeInOutQuad:function(e){return e<.5?2*e*e:-1+2*(2-e)*e},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return--e*e*e+1},easeInOutCubic:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return 1- --e*e*e*e},easeInOutQuart:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return 1+--e*e*e*e*e},easeInOutQuint:function(e){return e<.5?16*e*e*e*e*e:1+16*--e*e*e*e*e}})},initialize:function e(t,r,a,u,h,f){this.object=t;var d=typeof h,g=d==="function";this.type=g?d:d==="string"?h:"linear",this.easing=g?h:e.easings[this.type],this.duration=u,this.running=!1,this._then=null,this._startTime=null;var m=r||a;this._keys=m?Object.keys(m):[],this._parsedKeys=this._parseKeys(this._keys),this._from=m&&this._getState(r),this._to=m&&this._getState(a),f!==!1&&this.start()},then:function(e){return this._then=e,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(e){if(this.running){e>=1&&(e=1,this.running=!1);for(var t=this.easing(e),r=this._keys,a=function(b){return typeof b=="function"?b(t,e):b},u=0,h=r&&r.length;u<h;u++){var f=r[u],d=a(this._from[f]),g=a(this._to[f]),m=d&&g&&d.__add&&g.__add?g.__subtract(d).__multiply(t).__add(d):(g-d)*t+d;this._setProperty(this._parsedKeys[f],m)}this.responds("update")&&this.emit("update",new p({progress:e,factor:t})),!this.running&&this._then&&this._then(this.object)}return this},_events:{onUpdate:{}},_handleFrame:function(e){var t=this._startTime,r=t?(e-t)/this.duration:0;t||(this._startTime=e),this.update(r)},_getState:function(e){for(var t=this._keys,r={},a=0,u=t.length;a<u;a++){var h=t[a],f=this._parsedKeys[h],d=this._getProperty(f),g;if(e){var m=this._resolveValue(d,e[h]);this._setProperty(f,m),g=this._getProperty(f),g=g&&g.clone?g.clone():g,this._setProperty(f,d)}else g=d&&d.clone?d.clone():d;r[h]=g}return r},_resolveValue:function(e,t){if(t){if(Array.isArray(t)&&t.length===2){var r=t[0];return r&&r.match&&r.match(/^[+\-\*\/]=/)?this._calculate(e,r[0],t[1]):t}else if(typeof t=="string"){var a=t.match(/^[+\-*/]=(.*)/);if(a){var u=JSON.parse(a[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(e,t[0],u)}}}return t},_calculate:function(e,t,r){return Ae.PaperScript.calculateBinary(e,t,r)},_parseKeys:function(e){for(var t={},r=0,a=e.length;r<a;r++){var u=e[r],h=u.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");t[u]=h.split("/")}return t},_getProperty:function(e,t){for(var r=this.object,a=0,u=e.length-(t||0);a<u&&r;a++)r=r[e[a]];return r},_setProperty:function(e,t){var r=this._getProperty(e,1);r&&(r[e[e.length-1]]=t)}}),ke={request:function(e){var t=new s.XMLHttpRequest;return t.open((e.method||"get").toUpperCase(),e.url,p.pick(e.async,!0)),e.mimeType&&t.overrideMimeType(e.mimeType),t.onload=function(){var r=t.status;r===0||r===200?e.onLoad&&e.onLoad.call(t,t.responseText):t.onerror()},t.onerror=function(){var r=t.status,a='Could not load "'+e.url+'" (Status: '+r+")";if(e.onError)e.onError(a,r);else throw new Error(a)},t.send(null)}},ce=p.exports.CanvasProvider={canvases:[],getCanvas:function(e,t,r){if(!c)return null;var a,u=!0;typeof e=="object"&&(t=e.height,e=e.width),this.canvases.length?a=this.canvases.pop():(a=_.createElement("canvas"),u=!1);var h=a.getContext("2d",r||{});if(!h)throw new Error("Canvas "+a+" is unable to provide a 2D context.");return a.width===e&&a.height===t?u&&h.clearRect(0,0,e+1,t+1):(a.width=e,a.height=t),h.save(),a},getContext:function(e,t,r){var a=this.getCanvas(e,t,r);return a?a.getContext("2d",r||{}):null},release:function(e){var t=e&&e.canvas?e.canvas:e;t&&t.getContext&&(t.getContext("2d").restore(),this.canvases.push(t))}},We=new function(){var e=Math.min,t=Math.max,r=Math.abs,a,u,h,f,d,g,m,b,S,x,y;function L(R,N,E){return .2989*R+.587*N+.114*E}function P(R,N,E,q){var H=q-L(R,N,E);S=R+H,x=N+H,y=E+H;var q=L(S,x,y),K=e(S,x,y),B=t(S,x,y);if(K<0){var W=q-K;S=q+(S-q)*q/W,x=q+(x-q)*q/W,y=q+(y-q)*q/W}if(B>255){var $=255-q,X=B-q;S=q+(S-q)*$/X,x=q+(x-q)*$/X,y=q+(y-q)*$/X}}function T(R,N,E){return t(R,N,E)-e(R,N,E)}function w(R,N,E,V){var H=[R,N,E],q=t(R,N,E),K=e(R,N,E),B;K=K===R?0:K===N?1:2,q=q===R?0:q===N?1:2,B=e(K,q)===0?t(K,q)===1?2:1:0,H[q]>H[K]?(H[B]=(H[B]-H[K])*V/(H[q]-H[K]),H[q]=V):H[B]=H[q]=0,H[K]=0,S=H[0],x=H[1],y=H[2]}var k={multiply:function(){S=d*a/255,x=g*u/255,y=m*h/255},screen:function(){S=d+a-d*a/255,x=g+u-g*u/255,y=m+h-m*h/255},overlay:function(){S=d<128?2*d*a/255:255-2*(255-d)*(255-a)/255,x=g<128?2*g*u/255:255-2*(255-g)*(255-u)/255,y=m<128?2*m*h/255:255-2*(255-m)*(255-h)/255},"soft-light":function(){var R=a*d/255;S=R+d*(255-(255-d)*(255-a)/255-R)/255,R=u*g/255,x=R+g*(255-(255-g)*(255-u)/255-R)/255,R=h*m/255,y=R+m*(255-(255-m)*(255-h)/255-R)/255},"hard-light":function(){S=a<128?2*a*d/255:255-2*(255-a)*(255-d)/255,x=u<128?2*u*g/255:255-2*(255-u)*(255-g)/255,y=h<128?2*h*m/255:255-2*(255-h)*(255-m)/255},"color-dodge":function(){S=d===0?0:a===255?255:e(255,255*d/(255-a)),x=g===0?0:u===255?255:e(255,255*g/(255-u)),y=m===0?0:h===255?255:e(255,255*m/(255-h))},"color-burn":function(){S=d===255?255:a===0?0:t(0,255-(255-d)*255/a),x=g===255?255:u===0?0:t(0,255-(255-g)*255/u),y=m===255?255:h===0?0:t(0,255-(255-m)*255/h)},darken:function(){S=d<a?d:a,x=g<u?g:u,y=m<h?m:h},lighten:function(){S=d>a?d:a,x=g>u?g:u,y=m>h?m:h},difference:function(){S=d-a,S<0&&(S=-S),x=g-u,x<0&&(x=-x),y=m-h,y<0&&(y=-y)},exclusion:function(){S=d+a*(255-d-d)/255,x=g+u*(255-g-g)/255,y=m+h*(255-m-m)/255},hue:function(){w(a,u,h,T(d,g,m)),P(S,x,y,L(d,g,m))},saturation:function(){w(d,g,m,T(a,u,h)),P(S,x,y,L(d,g,m))},luminosity:function(){P(d,g,m,L(a,u,h))},color:function(){P(a,u,h,L(d,g,m))},add:function(){S=e(d+a,255),x=e(g+u,255),y=e(m+h,255)},subtract:function(){S=t(d-a,0),x=t(g-u,0),y=t(m-h,0)},average:function(){S=(d+a)/2,x=(g+u)/2,y=(m+h)/2},negation:function(){S=255-r(255-a-d),x=255-r(255-u-g),y=255-r(255-h-m)}},v=this.nativeModes=p.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(R){this[R]=!0},{}),I=ce.getContext(1,1,{willReadFrequently:!0});I&&(p.each(k,function(R,N){var E=N==="darken",V=!1;I.save();try{I.fillStyle=E?"#300":"#a00",I.fillRect(0,0,1,1),I.globalCompositeOperation=N,I.globalCompositeOperation===N&&(I.fillStyle=E?"#a00":"#300",I.fillRect(0,0,1,1),V=I.getImageData(0,0,1,1).data[0]!==E?170:51)}catch{}I.restore(),v[N]=V}),ce.release(I)),this.process=function(R,N,E,V,H){var q=N.canvas,K=R==="normal";if(K||v[R])E.save(),E.setTransform(1,0,0,1,0,0),E.globalAlpha=V,K||(E.globalCompositeOperation=R),E.drawImage(q,H.x,H.y),E.restore();else{var B=k[R];if(!B)return;for(var W=E.getImageData(H.x,H.y,q.width,q.height),$=W.data,X=N.getImageData(0,0,q.width,q.height).data,ee=0,ne=$.length;ee<ne;ee+=4){a=X[ee],d=$[ee],u=X[ee+1],g=$[ee+1],h=X[ee+2],m=$[ee+2],f=X[ee+3],b=$[ee+3],B();var _e=f*V/255,Pe=1-_e;$[ee]=_e*S+Pe*d,$[ee+1]=_e*x+Pe*g,$[ee+2]=_e*y+Pe*m,$[ee+3]=f*V+Pe*b}E.putImageData(W,H.x,H.y)}}},xe=new function(){var e="http://www.w3.org/2000/svg",t="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",a={href:r,xlink:t,xmlns:t+"/","xmlns:xlink":t+"/"};function u(d,g,m){return f(_.createElementNS(e,d),g,m)}function h(d,g){var m=a[g],b=m?d.getAttributeNS(m,g):d.getAttribute(g);return b==="null"?null:b}function f(d,g,m){for(var b in g){var S=g[b],x=a[b];typeof S=="number"&&m&&(S=m.number(S)),x?d.setAttributeNS(x,b,S):d.setAttribute(b,S)}return d}return{svg:e,xmlns:t,xlink:r,create:u,get:h,set:f}},je=p.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(e,t){return!t&&(e instanceof me||e instanceof He||e instanceof oi)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(e,t){var r=p.capitalize(t),a=e[2];this[t]={type:e[1],property:t,attribute:e[0],toSVG:a,fromSVG:a&&p.each(a,function(u,h){this[u]=h},{}),exportFilter:e[3],get:"get"+r,set:"set"+r}},{});new function(){var e;function t(k,v,I){var R=new p,N=k.getTranslation();if(v){var E;k.isInvertible()?(k=k._shiftless(),E=k._inverseTransform(N),N=null):E=new U,R[I?"cx":"x"]=E.x,R[I?"cy":"y"]=E.y}if(!k.isIdentity()){var V=k.decompose();if(V){var H=[],q=V.rotation,K=V.scaling,B=V.skewing;N&&!N.isZero()&&H.push("translate("+e.point(N)+")"),q&&H.push("rotate("+e.number(q)+")"),(!Q.isZero(K.x-1)||!Q.isZero(K.y-1))&&H.push("scale("+e.point(K)+")"),B.x&&H.push("skewX("+e.number(B.x)+")"),B.y&&H.push("skewY("+e.number(B.y)+")"),R.transform=H.join(" ")}else R.transform="matrix("+k.getValues().join(",")+")"}return R}function r(k,v){for(var I=t(k._matrix),R=k._children,N=xe.create("g",I,e),E=0,V=R.length;E<V;E++){var H=R[E],q=T(H,v);if(q)if(H.isClipMask()){var K=xe.create("clipPath");K.appendChild(q),L(H,K,"clip"),xe.set(N,{"clip-path":"url(#"+K.id+")"})}else N.appendChild(q)}return N}function a(k,v){var I=t(k._matrix,!0),R=k.getSize(),N=k.getImage();return I.x-=R.width/2,I.y-=R.height/2,I.width=R.width,I.height=R.height,I.href=v.embedImages==!1&&N&&N.src||k.toDataURL(),xe.create("image",I,e)}function u(k,v){var I=v.matchShapes;if(I){var R=k.toShape(!1);if(R)return h(R)}var N=k._segments,E=N.length,V,H=t(k._matrix);if(I&&E>=2&&!k.hasHandles())if(E>2){V=k._closed?"polygon":"polyline";for(var q=[],K=0;K<E;K++)q.push(e.point(N[K]._point));H.points=q.join(" ")}else{V="line";var B=N[0]._point,W=N[1]._point;H.set({x1:B.x,y1:B.y,x2:W.x,y2:W.y})}else V="path",H.d=k.getPathData(null,v.precision);return xe.create(V,H,e)}function h(k){var v=k._type,I=k._radius,R=t(k._matrix,!0,v!=="rectangle");if(v==="rectangle"){v="rect";var N=k._size,E=N.width,V=N.height;R.x-=E/2,R.y-=V/2,R.width=E,R.height=V,I.isZero()&&(I=null)}return I&&(v==="circle"?R.r=I:(R.rx=I.width,R.ry=I.height)),xe.create(v,R,e)}function f(k,v){var I=t(k._matrix),R=k.getPathData(null,v.precision);return R&&(I.d=R),xe.create("path",I,e)}function d(k,v){var I=t(k._matrix,!0),R=k._definition,N=y(R,"symbol"),E=R._item,V=E.getStrokeBounds();return N||(N=xe.create("symbol",{viewBox:e.rectangle(V)}),N.appendChild(T(E,v)),L(R,N,"symbol")),I.href="#"+N.id,I.x+=V.x,I.y+=V.y,I.width=V.width,I.height=V.height,I.overflow="visible",xe.create("use",I,e)}function g(k){var v=y(k,"color");if(!v){var I=k.getGradient(),R=I._radial,N=k.getOrigin(),E=k.getDestination(),V;if(R){V={cx:N.x,cy:N.y,r:N.getDistance(E)};var H=k.getHighlight();H&&(V.fx=H.x,V.fy=H.y)}else V={x1:N.x,y1:N.y,x2:E.x,y2:E.y};V.gradientUnits="userSpaceOnUse",v=xe.create((R?"radial":"linear")+"Gradient",V,e);for(var q=I._stops,K=0,B=q.length;K<B;K++){var W=q[K],$=W._color,X=$.getAlpha(),ee=W._offset;V={offset:ee??K/(B-1)},$&&(V["stop-color"]=$.toCSS(!0)),X<1&&(V["stop-opacity"]=X),v.appendChild(xe.create("stop",V,e))}L(k,v,"color")}return"url(#"+v.id+")"}function m(k){var v=xe.create("text",t(k._matrix,!0),e);return v.textContent=k._content,v}var b={Group:r,Layer:r,Raster:a,Path:u,Shape:h,CompoundPath:f,SymbolItem:d,PointText:m};function S(k,v,I,R){var N={},E=!R&&k.getParent(),V=[];return k._name!=null&&(N.id=k._name),p.each(je,function(H){var q=H.get,K=H.type,B=k[q]();if(H.exportFilter?H.exportFilter(k,B):I.reduceAttributes==!1||!E||!p.equals(E[q](),B)){if(K==="color"&&B!=null){var W=B.getAlpha();W<1&&(N[H.attribute+"-opacity"]=W)}K==="style"?V.push(H.attribute+": "+B):N[H.attribute]=B==null?"none":K==="color"?B.gradient?g(B):B.toCSS(!0):K==="array"?B.join(","):K==="lookup"?H.toSVG[B]:B}}),V.length&&(N.style=V.join(";")),N.opacity===1&&delete N.opacity,k._visible||(N.visibility="hidden"),xe.set(v,N,e)}var x;function y(k,v){return x||(x={ids:{},svgs:{}}),k&&x.svgs[v+"-"+(k._id||k.__id||(k.__id=oe.get("svg")))]}function L(k,v,I){x||y();var R=x.ids[I]=(x.ids[I]||0)+1;v.id=I+"-"+R,x.svgs[I+"-"+(k._id||k.__id)]=v}function P(k,v){var I=k,R=null;if(x){I=k.nodeName.toLowerCase()==="svg"&&k;for(var N in x.svgs)R||(I||(I=xe.create("svg"),I.appendChild(k)),R=I.insertBefore(xe.create("defs"),I.firstChild)),R.appendChild(x.svgs[N]);x=null}return v.asString?new s.XMLSerializer().serializeToString(I):I}function T(k,v,I){var R=b[k._class],N=R&&R(k,v);if(N){var E=v.onExport;E&&(N=E(k,N,v)||N);var V=JSON.stringify(k._data);V&&V!=="{}"&&V!=="null"&&N.setAttribute("data-paper-data",V)}return N&&S(k,N,v,I)}function w(k){return k||(k={}),e=new J(k.precision),k}M.inject({exportSVG:function(k){return k=w(k),P(T(this,k,!0),k)}}),pe.inject({exportSVG:function(k){k=w(k);var v=this._children,I=this.getView(),R=p.pick(k.bounds,"view"),N=k.matrix||R==="view"&&I._matrix,E=N&&Ve.read([N]),V=R==="view"?new Ce([0,0],I.getViewSize()):R==="content"?M._getBounds(v,E,{stroke:!0}).rect:Ce.read([R],0,{readNull:!0}),H={version:"1.1",xmlns:xe.svg,"xmlns:xlink":xe.xlink};V&&(H.width=V.width,H.height=V.height,(V.x||V.x===0||V.y||V.y===0)&&(H.viewBox=e.rectangle(V)));var q=xe.create("svg",H,e),K=q;E&&!E.isIdentity()&&(K=q.appendChild(xe.create("g",t(E),e)));for(var B=0,W=v.length;B<W;B++)K.appendChild(T(v[B],k,!0));return P(q,k)}})},new function(){var e={},t;function r(v,I,R,N,E,V){var H=xe.get(v,I)||V,q=H==null?N?null:R?"":0:R?H:parseFloat(H);return/%\s*$/.test(H)?q/100*(E?1:t[/x|^width/.test(I)?"width":"height"]):q}function a(v,I,R,N,E,V,H){return I=r(v,I||"x",!1,N,E,V),R=r(v,R||"y",!1,N,E,H),N&&(I==null||R==null)?null:new U(I,R)}function u(v,I,R,N,E){return I=r(v,I||"width",!1,N,E),R=r(v,R||"height",!1,N,E),N&&(I==null||R==null)?null:new de(I,R)}function h(v,I,R){return v==="none"?null:I==="number"?parseFloat(v):I==="array"?v?v.split(/[\s,]+/g).map(parseFloat):[]:I==="color"?T(v)||v:I==="lookup"?R[v]:v}function f(v,I,R,N){var E=v.childNodes,V=I==="clippath",H=I==="defs",q=new Ge,K=q._project,B=K._currentStyle,W=[];if(!V&&!H&&(q=P(q,v,N),K._currentStyle=q._style.clone()),N)for(var $=v.querySelectorAll("defs"),X=0,ee=$.length;X<ee;X++)w($[X],R,!1);for(var X=0,ee=E.length;X<ee;X++){var ne=E[X],_e;ne.nodeType===1&&!/^defs$/i.test(ne.nodeName)&&(_e=w(ne,R,!1))&&!(_e instanceof ut)&&W.push(_e)}return q.addChildren(W),V&&(q=P(q.reduce(),v,N)),K._currentStyle=B,(V||H)&&(q.remove(),q=null),q}function d(v,I){for(var R=v.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),N=[],E=0,V=R.length;E<V;E+=2)N.push(new U(parseFloat(R[E]),parseFloat(R[E+1])));var H=new Ee(N);return I==="polygon"&&H.closePath(),H}function g(v){return me.create(v.getAttribute("d"))}function m(v,I){var R=(r(v,"href",!0)||"").substring(1),N=I==="radialgradient",E;if(R)E=e[R].getGradient(),E._radial^N&&(E=E.clone(),E._radial=N);else{for(var V=v.childNodes,H=[],q=0,K=V.length;q<K;q++){var B=V[q];B.nodeType===1&&H.push(P(new Ti,B))}E=new ui(H,N)}var W,$,X,ee=r(v,"gradientUnits",!0)!=="userSpaceOnUse";N?(W=a(v,"cx","cy",!1,ee,"50%","50%"),$=W.add(r(v,"r",!1,!1,ee,"50%"),0),X=a(v,"fx","fy",!0,ee)):(W=a(v,"x1","y1",!1,ee,"0%","0%"),$=a(v,"x2","y2",!1,ee,"100%","0%"));var ne=P(new Pt(E,W,$,X),v);return ne._scaleToBounds=ee,null}var b={"#document":function(v,I,R,N){for(var E=v.childNodes,V=0,H=E.length;V<H;V++){var q=E[V];if(q.nodeType===1)return w(q,R,N)}},g:f,svg:f,clippath:f,polygon:d,polyline:d,path:g,lineargradient:m,radialgradient:m,image:function(v){var I=new lt(r(v,"href",!0));return I.on("load",function(){var R=u(v);this.setSize(R);var N=a(v).add(R.divide(2));this._matrix.append(new Ve().translate(N))}),I},symbol:function(v,I,R,N){return new ut(f(v,I,R,N),!0)},defs:f,use:function(v){var I=(r(v,"href",!0)||"").substring(1),R=e[I],N=a(v);return R?R instanceof ut?R.place(N):R.clone().translate(N):null},circle:function(v){return new He.Circle(a(v,"cx","cy"),r(v,"r"))},ellipse:function(v){return new He.Ellipse({center:a(v,"cx","cy"),radius:u(v,"rx","ry")})},rect:function(v){return new He.Rectangle(new Ce(a(v),u(v)),u(v,"rx","ry"))},line:function(v){return new Ee.Line(a(v,"x1","y1"),a(v,"x2","y2"))},text:function(v){var I=new gn(a(v).add(a(v,"dx","dy")));return I.setContent(v.textContent.trim()||""),I},switch:f};function S(v,I,R,N){if(v.transform){for(var E=(N.getAttribute(R)||"").split(/\)\s*/g),V=new Ve,H=0,q=E.length;H<q;H++){var K=E[H];if(!K)break;for(var B=K.split(/\(\s*/),W=B[0].trim(),$=B[1].split(/[\s,]+/g),X=0,ee=$.length;X<ee;X++)$[X]=parseFloat($[X]);switch(W){case"matrix":V.append(new Ve($[0],$[1],$[2],$[3],$[4],$[5]));break;case"rotate":V.rotate($[0],$[1]||0,$[2]||0);break;case"translate":V.translate($[0],$[1]||0);break;case"scale":V.scale($);break;case"skewX":V.skew($[0],0);break;case"skewY":V.skew(0,$[0]);break}}v.transform(V)}}function x(v,I,R){var N=R==="fill-opacity"?"getFillColor":"getStrokeColor",E=v[N]&&v[N]();E&&E.setAlpha(parseFloat(I))}var y=p.set(p.each(je,function(v){this[v.attribute]=function(I,R){if(I[v.set]&&(I[v.set](h(R,v.type,v.fromSVG)),v.type==="color")){var N=I[v.get]();if(N&&N._scaleToBounds){var E=I.getBounds();N.transform(new Ve().translate(E.getPoint()).scale(E.getSize()))}}}},{}),{id:function(v,I){e[I]=v,v.setName&&v.setName(I)},"clip-path":function(v,I){var R=T(I);if(R)if(R=R.clone(),R.setClipMask(!0),v instanceof Ge)v.insertChild(0,R);else return new Ge(R,v)},gradientTransform:S,transform:S,"fill-opacity":x,"stroke-opacity":x,visibility:function(v,I){v.setVisible&&v.setVisible(I==="visible")},display:function(v,I){v.setVisible&&v.setVisible(I!==null)},"stop-color":function(v,I){v.setColor&&v.setColor(I)},"stop-opacity":function(v,I){v._color&&v._color.setAlpha(parseFloat(I))},offset:function(v,I){if(v.setOffset){var R=I.match(/(.*)%$/);v.setOffset(R?R[1]/100:parseFloat(I))}},viewBox:function(v,I,R,N,E){var V=new Ce(h(I,"array")),H=u(N,null,null,!0),q,K;if(v instanceof Ge){var B=H?H.divide(V.getSize()):1,K=new Ve().scale(B).translate(V.getPoint().negate());q=v}else v instanceof ut&&(H&&V.setSize(H),q=v._item);if(q){if(L(N,"overflow",E)!=="visible"){var W=new He.Rectangle(V);W.setClipMask(!0),q.addChild(W)}K&&q.transform(K)}}});function L(v,I,R){var N=v.attributes[I],E=N&&N.value;if(!E&&v.style){var V=p.camelize(I);E=v.style[V],!E&&R.node[V]!==R.parent[V]&&(E=R.node[V])}return E?E==="none"?null:E:o}function P(v,I,R){var N=I.parentNode,E={node:mt.getStyles(I)||{},parent:!R&&!/^defs$/i.test(N.tagName)&&mt.getStyles(N)||{}};return p.each(y,function(V,H){var q=L(I,H,E);v=q!==o&&V(v,q,H,I,E)||v}),v}function T(v){var I=v&&v.match(/\((?:["'#]*)([^"')]+)/),R=I&&I[1],N=R&&e[c?R.replace(c.location.href.split("#")[0]+"#",""):R];return N&&N._scaleToBounds&&(N=N.clone(),N._scaleToBounds=!0),N}function w(v,I,R){var N=v.nodeName.toLowerCase(),E=N!=="#document",V=_.body,H,q,K;R&&E&&(t=Ae.getView().getSize(),t=u(v,null,null,!0)||t,H=xe.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),q=v.parentNode,K=v.nextSibling,H.appendChild(v),V.appendChild(H));var B=Ae.settings,W=B.applyMatrix,$=B.insertItems;B.applyMatrix=!1,B.insertItems=!1;var X=b[N],ee=X&&X(v,N,I,R)||null;if(B.insertItems=$,B.applyMatrix=W,ee){E&&!(ee instanceof Ge)&&(ee=P(ee,v,R));var ne=I.onImport,_e=E&&v.getAttribute("data-paper-data");ne&&(ee=ne(v,ee,I)||ee),I.expandShapes&&ee instanceof He&&(ee.remove(),ee=ee.toPath()),_e&&(ee._data=JSON.parse(_e))}return H&&(V.removeChild(H),q&&(K?q.insertBefore(v,K):q.appendChild(v))),R&&(e={},ee&&p.pick(I.applyMatrix,W)&&ee.matrix.apply(!0,!0)),ee}function k(v,I,R){if(!v)return null;I=typeof I=="function"?{onLoad:I}:I||{};var N=Ae,E=null;function V(B){try{var W=typeof B=="object"?B:new s.DOMParser().parseFromString(B.trim(),"image/svg+xml");if(!W.nodeName)throw W=null,new Error("Unsupported SVG source: "+v);Ae=N,E=w(W,I,!0),(!I||I.insert!==!1)&&R._insertItem(o,E);var $=I.onLoad;$&&$(E,B)}catch(X){H(X)}}function H(B,W){var $=I.onError;if($)$(B,W);else throw new Error(B)}if(typeof v=="string"&&!/^[\s\S]*</.test(v)){var q=_.getElementById(v);q?V(q):ke.request({url:v,async:!0,onLoad:V,onError:H})}else if(typeof File<"u"&&v instanceof File){var K=new FileReader;return K.onload=function(){V(K.result)},K.onerror=function(){H(K.error)},K.readAsText(v)}else V(v);return E}M.inject({importSVG:function(v,I){return k(v,I,this)}}),pe.inject({importSVG:function(v,I){return this.activate(),k(v,I,this)}})},p.exports.PaperScript=(function(){var e=this,t=e.acorn;if(!t&&typeof xf<"u")try{t=Sf()}catch{}if(!t){var r,a;t=r=a={},function(P,T){if(typeof r=="object"&&typeof a=="object")return T(r);if(typeof o=="function"&&o.amd)return o(["exports"],T);T(P.acorn||(P.acorn={}))}(this,function(P){P.version="0.5.0";var T,w,k,v;P.parse=function(G,Z){return w=String(G),k=w.length,R(Z),_a(),Zu(T.program)};var I=P.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function R(G){T=G||{};for(var Z in I)Object.prototype.hasOwnProperty.call(T,Z)||(T[Z]=I[Z]);v=T.sourceFile||null}var N=P.getLineInfo=function(G,Z){for(var ae=1,fe=0;;){En.lastIndex=fe;var Qe=En.exec(G);if(Qe&&Qe.index<Z)++ae,fe=Qe.index+Qe[0].length;else break}return{line:ae,column:Z-fe}};P.tokenize=function(G,Z){w=String(G),k=w.length,R(Z),_a();var ae={};function fe(Qe){return _e=H,xn(Qe),ae.start=V,ae.end=H,ae.startLoc=q,ae.endLoc=K,ae.type=B,ae.value=W,ae}return fe.jumpTo=function(Qe,it){if(E=Qe,T.locations){X=1,ee=En.lastIndex=0;for(var rt;(rt=En.exec(w))&&rt.index<Qe;)++X,ee=rt.index+rt[0].length}$=it,Tn()},fe};var E,V,H,q,K,B,W,$,X,ee,ne,_e,Pe,Te,De,ue;function he(G,Z){var ae=N(w,G);Z+=" ("+ae.line+":"+ae.column+")";var fe=new SyntaxError(Z);throw fe.pos=G,fe.loc=ae,fe.raisedAt=E,fe}var Me=[],Ue={type:"num"},Be={type:"regexp"},Ze={type:"string"},Ke={type:"name"},tt={type:"eof"},at={keyword:"break"},Xe={keyword:"case",beforeExpr:!0},Lt={keyword:"catch"},Et={keyword:"continue"},Vt={keyword:"debugger"},Tt={keyword:"default"},Ie={keyword:"do",isLoop:!0},It={keyword:"else",beforeExpr:!0},At={keyword:"finally"},Rt={keyword:"for",isLoop:!0},si={keyword:"function"},Si={keyword:"if"},li={keyword:"return",beforeExpr:!0},hi={keyword:"switch"},Wt={keyword:"throw",beforeExpr:!0},ti={keyword:"try"},Pi={keyword:"var"},Nt={keyword:"while",isLoop:!0},jt={keyword:"with"},mr={keyword:"new",beforeExpr:!0},Hn={keyword:"this"},vr={keyword:"null",atomValue:null},yr={keyword:"true",atomValue:!0},xr={keyword:"false",atomValue:!1},An={keyword:"in",binop:7,beforeExpr:!0},Ji={break:at,case:Xe,catch:Lt,continue:Et,debugger:Vt,default:Tt,do:Ie,else:It,finally:At,for:Rt,function:si,if:Si,return:li,switch:hi,throw:Wt,try:ti,var:Pi,while:Nt,with:jt,null:vr,true:yr,false:xr,new:mr,in:An,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Hn,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},_n={type:"[",beforeExpr:!0},mn={type:"]"},Bi={type:"{",beforeExpr:!0},mi={type:"}"},nt={type:"(",beforeExpr:!0},ci={type:")"},vi={type:",",beforeExpr:!0},fi={type:";",beforeExpr:!0},zi={type:":",beforeExpr:!0},qn={type:"."},Gn={type:"?",beforeExpr:!0},Wn={binop:10,beforeExpr:!0},i={isAssign:!0,beforeExpr:!0},l={isAssign:!0,beforeExpr:!0},C={postfix:!0,prefix:!0,isUpdate:!0},O={prefix:!0,beforeExpr:!0},z={binop:1,beforeExpr:!0},ie={binop:2,beforeExpr:!0},re={binop:3,beforeExpr:!0},Se={binop:4,beforeExpr:!0},Le={binop:5,beforeExpr:!0},et={binop:6,beforeExpr:!0},ht={binop:7,beforeExpr:!0},bt={binop:8,beforeExpr:!0},Ut={binop:9,prefix:!0,beforeExpr:!0},vn={binop:10,beforeExpr:!0};P.tokTypes={bracketL:_n,bracketR:mn,braceL:Bi,braceR:mi,parenL:nt,parenR:ci,comma:vi,semi:fi,colon:zi,dot:qn,question:Gn,slash:Wn,eq:i,name:Ke,eof:tt,num:Ue,regexp:Be,string:Ze};for(var Ui in Ji)P.tokTypes["_"+Ui]=Ji[Ui];function Mi(G){G=G.split(" ");var Z="",ae=[];e:for(var fe=0;fe<G.length;++fe){for(var Qe=0;Qe<ae.length;++Qe)if(ae[Qe][0].length==G[fe].length){ae[Qe].push(G[fe]);continue e}ae.push([G[fe]])}function it(_t){if(_t.length==1)return Z+="return str === "+JSON.stringify(_t[0])+";";Z+="switch(str){";for(var ki=0;ki<_t.length;++ki)Z+="case "+JSON.stringify(_t[ki])+":";Z+="return true}return false;"}if(ae.length>3){ae.sort(function(_t,ki){return ki.length-_t.length}),Z+="switch(str.length){";for(var fe=0;fe<ae.length;++fe){var rt=ae[fe];Z+="case "+rt[0].length+":",it(rt)}Z+="}"}else it(G);return new Function("str",Z)}var Yi=Mi("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Xi=Mi("class enum extends super const export import"),fa=Mi("implements interface let package private protected public static yield"),br=Mi("eval arguments"),Lu=Mi("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ru=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,da="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",Nu="------------------------------------------------------------------------------------------------------------------------------------------",pa=new RegExp("["+da+"]"),Fu=new RegExp("["+da+Nu+"]"),wr=/[\n\r\u2028\u2029]/,En=/\r\n|[\n\r\u2028\u2029]/g,Cr=P.isIdentifierStart=function(G){return G<65?G===36:G<91?!0:G<97?G===95:G<123?!0:G>=170&&pa.test(String.fromCharCode(G))},ga=P.isIdentifierChar=function(G){return G<48?G===36:G<58?!0:G<65?!1:G<91?!0:G<97?G===95:G<123?!0:G>=170&&Fu.test(String.fromCharCode(G))};function yn(){this.line=X,this.column=E-ee}function _a(){X=1,E=ee=0,$=!0,Tn()}function Ht(G,Z){H=E,T.locations&&(K=new yn),B=G,Tn(),W=Z,$=G.beforeExpr}function Vu(){var G=T.onComment&&T.locations&&new yn,Z=E,ae=w.indexOf("*/",E+=2);if(ae===-1&&he(E-2,"Unterminated comment"),E=ae+2,T.locations){En.lastIndex=Z;for(var fe;(fe=En.exec(w))&&fe.index<E;)++X,ee=fe.index+fe[0].length}T.onComment&&T.onComment(!0,w.slice(Z+2,ae),Z,E,G,T.locations&&new yn)}function rs(){for(var G=E,Z=T.onComment&&T.locations&&new yn,ae=w.charCodeAt(E+=2);E<k&&ae!==10&&ae!==13&&ae!==8232&&ae!==8233;)++E,ae=w.charCodeAt(E);T.onComment&&T.onComment(!1,w.slice(G+2,E),G,E,Z,T.locations&&new yn)}function Tn(){for(;E<k;){var G=w.charCodeAt(E);if(G===32)++E;else if(G===13){++E;var Z=w.charCodeAt(E);Z===10&&++E,T.locations&&(++X,ee=E)}else if(G===10||G===8232||G===8233)++E,T.locations&&(++X,ee=E);else if(G>8&&G<14)++E;else if(G===47){var Z=w.charCodeAt(E+1);if(Z===42)Vu();else if(Z===47)rs();else break}else if(G===160)++E;else if(G>=5760&&Ru.test(String.fromCharCode(G)))++E;else break}}function Du(){var G=w.charCodeAt(E+1);return G>=48&&G<=57?va(!0):(++E,Ht(qn))}function Bu(){var G=w.charCodeAt(E+1);return $?(++E,ma()):G===61?qt(l,2):qt(Wn,1)}function zu(){var G=w.charCodeAt(E+1);return G===61?qt(l,2):qt(vn,1)}function Uu(G){var Z=w.charCodeAt(E+1);return Z===G?qt(G===124?z:ie,2):Z===61?qt(l,2):qt(G===124?re:Le,1)}function Hu(){var G=w.charCodeAt(E+1);return G===61?qt(l,2):qt(Se,1)}function qu(G){var Z=w.charCodeAt(E+1);return Z===G?Z==45&&w.charCodeAt(E+2)==62&&wr.test(w.slice(_e,E))?(E+=3,rs(),Tn(),xn()):qt(C,2):Z===61?qt(l,2):qt(Ut,1)}function Gu(G){var Z=w.charCodeAt(E+1),ae=1;return Z===G?(ae=G===62&&w.charCodeAt(E+2)===62?3:2,w.charCodeAt(E+ae)===61?qt(l,ae+1):qt(bt,ae)):Z==33&&G==60&&w.charCodeAt(E+2)==45&&w.charCodeAt(E+3)==45?(E+=4,rs(),Tn(),xn()):(Z===61&&(ae=w.charCodeAt(E+2)===61?3:2),qt(ht,ae))}function Wu(G){var Z=w.charCodeAt(E+1);return Z===61?qt(et,w.charCodeAt(E+2)===61?3:2):qt(G===61?i:O,1)}function ju(G){switch(G){case 46:return Du();case 40:return++E,Ht(nt);case 41:return++E,Ht(ci);case 59:return++E,Ht(fi);case 44:return++E,Ht(vi);case 91:return++E,Ht(_n);case 93:return++E,Ht(mn);case 123:return++E,Ht(Bi);case 125:return++E,Ht(mi);case 58:return++E,Ht(zi);case 63:return++E,Ht(Gn);case 48:var Z=w.charCodeAt(E+1);if(Z===120||Z===88)return Ku();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return va(!1);case 34:case 39:return $u(G);case 47:return Bu();case 37:case 42:return zu();case 124:case 38:return Uu(G);case 94:return Hu();case 43:case 45:return qu(G);case 60:case 62:return Gu(G);case 61:case 33:return Wu(G);case 126:return qt(O,1)}return!1}function xn(G){if(G?E=V+1:V=E,T.locations&&(q=new yn),G)return ma();if(E>=k)return Ht(tt);var Z=w.charCodeAt(E);if(Cr(Z)||Z===92)return xa();var ae=ju(Z);if(ae===!1){var fe=String.fromCharCode(Z);if(fe==="\\"||pa.test(fe))return xa();he(E,"Unexpected character '"+fe+"'")}return ae}function qt(G,Z){var ae=w.slice(E,E+Z);E+=Z,Ht(G,ae)}function ma(){for(var Qe="",G,Z,ae=E;;){E>=k&&he(ae,"Unterminated regular expression");var fe=w.charAt(E);if(wr.test(fe)&&he(ae,"Unterminated regular expression"),G)G=!1;else{if(fe==="[")Z=!0;else if(fe==="]"&&Z)Z=!1;else if(fe==="/"&&!Z)break;G=fe==="\\"}++E}var Qe=w.slice(ae,E);++E;var it=ya();it&&!/^[gmsiy]*$/.test(it)&&he(ae,"Invalid regexp flag");try{var rt=new RegExp(Qe,it)}catch(_t){_t instanceof SyntaxError&&he(ae,_t.message),he(_t)}return Ht(Be,rt)}function jn(G,Z){for(var ae=E,fe=0,Qe=0,it=Z??1/0;Qe<it;++Qe){var rt=w.charCodeAt(E),_t;if(rt>=97?_t=rt-97+10:rt>=65?_t=rt-65+10:rt>=48&&rt<=57?_t=rt-48:_t=1/0,_t>=G)break;++E,fe=fe*G+_t}return E===ae||Z!=null&&E-ae!==Z?null:fe}function Ku(){E+=2;var G=jn(16);return G==null&&he(V+2,"Expected hexadecimal number"),Cr(w.charCodeAt(E))&&he(E,"Identifier directly after number"),Ht(Ue,G)}function va(G){var Z=E,ae=!1,fe=w.charCodeAt(E)===48;!G&&jn(10)===null&&he(Z,"Invalid number"),w.charCodeAt(E)===46&&(++E,jn(10),ae=!0);var Qe=w.charCodeAt(E);(Qe===69||Qe===101)&&(Qe=w.charCodeAt(++E),(Qe===43||Qe===45)&&++E,jn(10)===null&&he(Z,"Invalid number"),ae=!0),Cr(w.charCodeAt(E))&&he(E,"Identifier directly after number");var it=w.slice(Z,E),rt;return ae?rt=parseFloat(it):!fe||it.length===1?rt=parseInt(it,10):/[89]/.test(it)||ue?he(Z,"Invalid number"):rt=parseInt(it,8),Ht(Ue,rt)}function $u(G){E++;for(var Z="";;){E>=k&&he(V,"Unterminated string constant");var ae=w.charCodeAt(E);if(ae===G)return++E,Ht(Ze,Z);if(ae===92){ae=w.charCodeAt(++E);var fe=/^[0-7]+/.exec(w.slice(E,E+3));for(fe&&(fe=fe[0]);fe&&parseInt(fe,8)>255;)fe=fe.slice(0,-1);if(fe==="0"&&(fe=null),++E,fe)ue&&he(E-2,"Octal literal in strict mode"),Z+=String.fromCharCode(parseInt(fe,8)),E+=fe.length-1;else switch(ae){case 110:Z+=`
`;break;case 114:Z+="\r";break;case 120:Z+=String.fromCharCode(Sr(2));break;case 117:Z+=String.fromCharCode(Sr(4));break;case 85:Z+=String.fromCharCode(Sr(8));break;case 116:Z+="	";break;case 98:Z+="\b";break;case 118:Z+="\v";break;case 102:Z+="\f";break;case 48:Z+="\0";break;case 13:w.charCodeAt(E)===10&&++E;case 10:T.locations&&(ee=E,++X);break;default:Z+=String.fromCharCode(ae);break}}else(ae===13||ae===10||ae===8232||ae===8233)&&he(V,"Unterminated string constant"),Z+=String.fromCharCode(ae),++E}}function Sr(G){var Z=jn(16,G);return Z===null&&he(V,"Bad character escape sequence"),Z}var Mn;function ya(){Mn=!1;for(var G,Z=!0,ae=E;;){var fe=w.charCodeAt(E);if(ga(fe))Mn&&(G+=w.charAt(E)),++E;else if(fe===92){Mn||(G=w.slice(ae,E)),Mn=!0,w.charCodeAt(++E)!=117&&he(E,"Expecting Unicode escape sequence \\uXXXX"),++E;var Qe=Sr(4),it=String.fromCharCode(Qe);it||he(E-1,"Invalid Unicode escape"),(Z?Cr(Qe):ga(Qe))||he(E-4,"Invalid Unicode escape"),G+=it}else break;Z=!1}return Mn?G:w.slice(ae,E)}function xa(){var G=ya(),Z=Ke;return!Mn&&Lu(G)&&(Z=Ji[G]),Ht(Z,G)}function dt(){ne=V,_e=H,Pe=K,xn()}function ss(G){if(ue=G,E=V,T.locations)for(;E<ee;)ee=w.lastIndexOf(`
`,ee-2)+1,--X;Tn(),xn()}function ba(){this.type=null,this.start=V,this.end=null}function wa(){this.start=q,this.end=null,v!==null&&(this.source=v)}function Kt(){var G=new ba;return T.locations&&(G.loc=new wa),T.directSourceFile&&(G.sourceFile=T.directSourceFile),T.ranges&&(G.range=[V,0]),G}function Qi(G){var Z=new ba;return Z.start=G.start,T.locations&&(Z.loc=new wa,Z.loc.start=G.loc.start),T.ranges&&(Z.range=[G.range[0],0]),Z}function ft(G,Z){return G.type=Z,G.end=_e,T.locations&&(G.loc.end=Pe),T.ranges&&(G.range[1]=_e),G}function as(G){return T.ecmaVersion>=5&&G.type==="ExpressionStatement"&&G.expression.type==="Literal"&&G.expression.value==="use strict"}function Mt(G){if(B===G)return dt(),!0}function Pr(){return!T.strictSemicolons&&(B===tt||B===mi||wr.test(w.slice(_e,V)))}function bn(){!Mt(fi)&&!Pr()&&Hi()}function Dt(G){B===G?dt():Hi()}function Hi(){he(V,"Unexpected token")}function Ir(G){G.type!=="Identifier"&&G.type!=="MemberExpression"&&he(G.start,"Assigning to rvalue"),ue&&G.type==="Identifier"&&br(G.name)&&he(G.start,"Assigning to "+G.name+" in strict mode")}function Zu(G){ne=_e=E,T.locations&&(Pe=new yn),Te=ue=null,De=[],xn();var Z=G||Kt(),ae=!0;for(G||(Z.body=[]);B!==tt;){var fe=Ii();Z.body.push(fe),ae&&as(fe)&&ss(!0),ae=!1}return ft(Z,"Program")}var os={kind:"loop"},Ju={kind:"switch"};function Ii(){(B===Wn||B===l&&W=="/=")&&xn(!0);var G=B,Z=Kt();switch(G){case at:case Et:dt();var ae=G===at;Mt(fi)||Pr()?Z.label=null:B!==Ke?Hi():(Z.label=en(),bn());for(var fe=0;fe<De.length;++fe){var Qe=De[fe];if((Z.label==null||Qe.name===Z.label.name)&&(Qe.kind!=null&&(ae||Qe.kind==="loop")||Z.label&&ae))break}return fe===De.length&&he(Z.start,"Unsyntactic "+G.keyword),ft(Z,ae?"BreakStatement":"ContinueStatement");case Vt:return dt(),bn(),ft(Z,"DebuggerStatement");case Ie:return dt(),De.push(os),Z.body=Ii(),De.pop(),Dt(Nt),Z.test=Kn(),bn(),ft(Z,"DoWhileStatement");case Rt:if(dt(),De.push(os),Dt(nt),B===fi)return us(Z,null);if(B===Pi){var it=Kt();return dt(),Sa(it,!0),ft(it,"VariableDeclaration"),it.declarations.length===1&&Mt(An)?Ca(Z,it):us(Z,it)}var it=Jt(!1,!0);return Mt(An)?(Ir(it),Ca(Z,it)):us(Z,it);case si:return dt(),ds(Z,!0);case Si:return dt(),Z.test=Kn(),Z.consequent=Ii(),Z.alternate=Mt(It)?Ii():null,ft(Z,"IfStatement");case li:return!Te&&!T.allowReturnOutsideFunction&&he(V,"'return' outside of function"),dt(),Mt(fi)||Pr()?Z.argument=null:(Z.argument=Jt(),bn()),ft(Z,"ReturnStatement");case hi:dt(),Z.discriminant=Kn(),Z.cases=[],Dt(Bi),De.push(Ju);for(var rt,_t;B!=mi;)if(B===Xe||B===Tt){var ki=B===Xe;rt&&ft(rt,"SwitchCase"),Z.cases.push(rt=Kt()),rt.consequent=[],dt(),ki?rt.test=Jt():(_t&&he(ne,"Multiple default clauses"),_t=!0,rt.test=null),Dt(zi)}else rt||Hi(),rt.consequent.push(Ii());return rt&&ft(rt,"SwitchCase"),dt(),De.pop(),ft(Z,"SwitchStatement");case Wt:return dt(),wr.test(w.slice(_e,V))&&he(_e,"Illegal newline after throw"),Z.argument=Jt(),bn(),ft(Z,"ThrowStatement");case ti:if(dt(),Z.block=$n(),Z.handler=null,B===Lt){var wn=Kt();dt(),Dt(nt),wn.param=en(),ue&&br(wn.param.name)&&he(wn.param.start,"Binding "+wn.param.name+" in strict mode"),Dt(ci),wn.guard=null,wn.body=$n(),Z.handler=ft(wn,"CatchClause")}return Z.guardedHandlers=Me,Z.finalizer=Mt(At)?$n():null,!Z.handler&&!Z.finalizer&&he(Z.start,"Missing catch or finally clause"),ft(Z,"TryStatement");case Pi:return dt(),Sa(Z),bn(),ft(Z,"VariableDeclaration");case Nt:return dt(),Z.test=Kn(),De.push(os),Z.body=Ii(),De.pop(),ft(Z,"WhileStatement");case jt:return ue&&he(V,"'with' in strict mode"),dt(),Z.object=Kn(),Z.body=Ii(),ft(Z,"WithStatement");case Bi:return $n();case fi:return dt(),ft(Z,"EmptyStatement");default:var gs=W,kr=Jt();if(G===Ke&&kr.type==="Identifier"&&Mt(zi)){for(var fe=0;fe<De.length;++fe)De[fe].name===gs&&he(kr.start,"Label '"+gs+"' is already declared");var il=B.isLoop?"loop":B===hi?"switch":null;return De.push({name:gs,kind:il}),Z.body=Ii(),De.pop(),Z.label=kr,ft(Z,"LabeledStatement")}else return Z.expression=kr,bn(),ft(Z,"ExpressionStatement")}}function Kn(){Dt(nt);var G=Jt();return Dt(ci),G}function $n(G){var Z=Kt(),ae=!0,fe=!1,Qe;for(Z.body=[],Dt(Bi);!Mt(mi);){var it=Ii();Z.body.push(it),ae&&G&&as(it)&&(Qe=fe,ss(fe=!0)),ae=!1}return fe&&!Qe&&ss(!1),ft(Z,"BlockStatement")}function us(G,Z){return G.init=Z,Dt(fi),G.test=B===fi?null:Jt(),Dt(fi),G.update=B===ci?null:Jt(),Dt(ci),G.body=Ii(),De.pop(),ft(G,"ForStatement")}function Ca(G,Z){return G.left=Z,G.right=Jt(),Dt(ci),G.body=Ii(),De.pop(),ft(G,"ForInStatement")}function Sa(G,Z){for(G.declarations=[],G.kind="var";;){var ae=Kt();if(ae.id=en(),ue&&br(ae.id.name)&&he(ae.id.start,"Binding "+ae.id.name+" in strict mode"),ae.init=Mt(i)?Jt(!0,Z):null,G.declarations.push(ft(ae,"VariableDeclarator")),!Mt(vi))break}return G}function Jt(G,Z){var ae=ls(Z);if(!G&&B===vi){var fe=Qi(ae);for(fe.expressions=[ae];Mt(vi);)fe.expressions.push(ls(Z));return ft(fe,"SequenceExpression")}return ae}function ls(G){var Z=Yu(G);if(B.isAssign){var ae=Qi(Z);return ae.operator=W,ae.left=Z,dt(),ae.right=ls(G),Ir(Z),ft(ae,"AssignmentExpression")}return Z}function Yu(G){var Z=Xu(G);if(Mt(Gn)){var ae=Qi(Z);return ae.test=Z,ae.consequent=Jt(!0),Dt(zi),ae.alternate=Jt(!0,G),ft(ae,"ConditionalExpression")}return Z}function Xu(G){return hs(cs(),-1,G)}function hs(G,Z,ae){var fe=B.binop;if(fe!=null&&(!ae||B!==An)&&fe>Z){var Qe=Qi(G);Qe.left=G,Qe.operator=W;var it=B;dt(),Qe.right=hs(cs(),fe,ae);var rt=ft(Qe,it===z||it===ie?"LogicalExpression":"BinaryExpression");return hs(rt,Z,ae)}return G}function cs(){if(B.prefix){var G=Kt(),Z=B.isUpdate;return G.operator=W,G.prefix=!0,$=!0,dt(),G.argument=cs(),Z?Ir(G.argument):ue&&G.operator==="delete"&&G.argument.type==="Identifier"&&he(G.start,"Deleting local variable in strict mode"),ft(G,Z?"UpdateExpression":"UnaryExpression")}for(var ae=Qu();B.postfix&&!Pr();){var G=Qi(ae);G.operator=W,G.prefix=!1,G.argument=ae,Ir(ae),dt(),ae=ft(G,"UpdateExpression")}return ae}function Qu(){return Zn(fs())}function Zn(G,Z){if(Mt(qn)){var ae=Qi(G);return ae.object=G,ae.property=en(!0),ae.computed=!1,Zn(ft(ae,"MemberExpression"),Z)}else if(Mt(_n)){var ae=Qi(G);return ae.object=G,ae.property=Jt(),ae.computed=!0,Dt(mn),Zn(ft(ae,"MemberExpression"),Z)}else if(!Z&&Mt(nt)){var ae=Qi(G);return ae.callee=G,ae.arguments=ps(ci,!1),Zn(ft(ae,"CallExpression"),Z)}else return G}function fs(){switch(B){case Hn:var fe=Kt();return dt(),ft(fe,"ThisExpression");case Ke:return en();case Ue:case Ze:case Be:var fe=Kt();return fe.value=W,fe.raw=w.slice(V,H),dt(),ft(fe,"Literal");case vr:case yr:case xr:var fe=Kt();return fe.value=B.atomValue,fe.raw=B.keyword,dt(),ft(fe,"Literal");case nt:var G=q,Z=V;dt();var ae=Jt();return ae.start=Z,ae.end=H,T.locations&&(ae.loc.start=G,ae.loc.end=K),T.ranges&&(ae.range=[Z,H]),Dt(ci),ae;case _n:var fe=Kt();return dt(),fe.elements=ps(mn,!0,!0),ft(fe,"ArrayExpression");case Bi:return tl();case si:var fe=Kt();return dt(),ds(fe,!1);case mr:return el();default:Hi()}}function el(){var G=Kt();return dt(),G.callee=Zn(fs(),!0),Mt(nt)?G.arguments=ps(ci,!1):G.arguments=Me,ft(G,"NewExpression")}function tl(){var G=Kt(),Z=!0,ae=!1;for(G.properties=[],dt();!Mt(mi);){if(Z)Z=!1;else if(Dt(vi),T.allowTrailingCommas&&Mt(mi))break;var fe={key:Pa()},Qe=!1,it;if(Mt(zi)?(fe.value=Jt(!0),it=fe.kind="init"):T.ecmaVersion>=5&&fe.key.type==="Identifier"&&(fe.key.name==="get"||fe.key.name==="set")?(Qe=ae=!0,it=fe.kind=fe.key.name,fe.key=Pa(),B!==nt&&Hi(),fe.value=ds(Kt(),!1)):Hi(),fe.key.type==="Identifier"&&(ue||ae))for(var rt=0;rt<G.properties.length;++rt){var _t=G.properties[rt];if(_t.key.name===fe.key.name){var ki=it==_t.kind||Qe&&_t.kind==="init"||it==="init"&&(_t.kind==="get"||_t.kind==="set");ki&&!ue&&it==="init"&&_t.kind==="init"&&(ki=!1),ki&&he(fe.key.start,"Redefinition of property")}}G.properties.push(fe)}return ft(G,"ObjectExpression")}function Pa(){return B===Ue||B===Ze?fs():en(!0)}function ds(G,Z){B===Ke?G.id=en():Z?Hi():G.id=null,G.params=[];var ae=!0;for(Dt(nt);!Mt(ci);)ae?ae=!1:Dt(vi),G.params.push(en());var fe=Te,Qe=De;if(Te=!0,De=[],G.body=$n(!0),Te=fe,De=Qe,ue||G.body.body.length&&as(G.body.body[0]))for(var it=G.id?-1:0;it<G.params.length;++it){var rt=it<0?G.id:G.params[it];if((fa(rt.name)||br(rt.name))&&he(rt.start,"Defining '"+rt.name+"' in strict mode"),it>=0)for(var _t=0;_t<it;++_t)rt.name===G.params[_t].name&&he(rt.start,"Argument name clash in strict mode")}return ft(G,Z?"FunctionDeclaration":"FunctionExpression")}function ps(G,Z,ae){for(var fe=[],Qe=!0;!Mt(G);){if(Qe)Qe=!1;else if(Dt(vi),Z&&T.allowTrailingCommas&&Mt(G))break;ae&&B===vi?fe.push(null):fe.push(Jt(!0))}return fe}function en(G){var Z=Kt();return G&&T.forbidReserved=="everywhere"&&(G=!1),B===Ke?(!G&&(T.forbidReserved&&(T.ecmaVersion===3?Yi:Xi)(W)||ue&&fa(W))&&w.slice(V,H).indexOf("\\")==-1&&he(V,"The keyword '"+W+"' is reserved"),Z.name=W):G&&B.keyword?Z.name=B.keyword:Hi(),$=!1,dt(),ft(Z,"Identifier")}}),t.version||(t=null)}function u(P,T){return(e.acorn||t).parse(P,T)}var h={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},f={"-":"__negate","+":"__self"},d=p.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(P){this["__"+P]="#"+P},{__self:function(){return this}});U.inject(d),de.inject(d),Pt.inject(d);function g(P,T,w){var k=h[T];if(P&&P[k]){var v=P[k](w);return T==="!="?!v:v}switch(T){case"+":return P+w;case"-":return P-w;case"*":return P*w;case"/":return P/w;case"%":return P%w;case"==":return P==w;case"!=":return P!=w}}function m(P,T){var w=f[P];if(T&&T[w])return T[w]();switch(P){case"+":return+T;case"-":return-T}}function b(P,T){if(!P)return"";T=T||{};var w=[];function k(ue){for(var he=0,Me=w.length;he<Me;he++){var Ue=w[he];if(Ue[0]>=ue)break;ue+=Ue[1]}return ue}function v(ue){return P.substring(k(ue.range[0]),k(ue.range[1]))}function I(ue,he){return P.substring(k(ue.range[1]),k(he.range[0]))}function R(ue,he){for(var Me=k(ue.range[0]),Ue=k(ue.range[1]),Be=0,Ze=w.length-1;Ze>=0;Ze--)if(Me>w[Ze][0]){Be=Ze+1;break}w.splice(Be,0,[Me,he.length-Ue+Me]),P=P.substring(0,Me)+he+P.substring(Ue)}function N(ue,he){switch(ue.type){case"UnaryExpression":if(ue.operator in f&&ue.argument.type!=="Literal"){var Me=v(ue.argument);R(ue,'$__("'+ue.operator+'", '+Me+")")}break;case"BinaryExpression":if(ue.operator in h&&ue.left.type!=="Literal"){var Ue=v(ue.left),Be=v(ue.right),Ze=I(ue.left,ue.right),Ke=ue.operator;R(ue,"__$__("+Ue+","+Ze.replace(new RegExp("\\"+Ke),'"'+Ke+'"')+", "+Be+")")}break;case"UpdateExpression":case"AssignmentExpression":var tt=he&&he.type;if(!(tt==="ForStatement"||tt==="BinaryExpression"&&/^[=!<>]/.test(he.operator)||tt==="MemberExpression"&&he.computed)){if(ue.type==="UpdateExpression"){var Me=v(ue.argument),at="__$__("+Me+', "'+ue.operator[0]+'", 1)',Xe=Me+" = "+at;ue.prefix?Xe="("+Xe+")":(tt==="AssignmentExpression"||tt==="VariableDeclarator"||tt==="BinaryExpression")&&(v(he.left||he.id)===Me&&(Xe=at),Xe=Me+"; "+Xe),R(ue,Xe)}else if(/^.=$/.test(ue.operator)&&ue.left.type!=="Literal"){var Ue=v(ue.left),Be=v(ue.right),at=Ue+" = __$__("+Ue+', "'+ue.operator[0]+'", '+Be+")";R(ue,/^\(.*\)$/.test(v(ue))?"("+at+")":at)}}break}}function E(ue){switch(ue.type){case"ExportDefaultDeclaration":R({range:[ue.start,ue.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var he=ue.declaration,Me=ue.specifiers;if(he){var Ue=he.declarations;Ue&&(Ue.forEach(function(Ze){R(Ze,"module.exports."+v(Ze))}),R({range:[ue.start,he.start+he.kind.length]},""))}else if(Me){var Be=Me.map(function(Ze){var Ke=v(Ze);return"module.exports."+Ke+" = "+Ke+"; "}).join("");Be&&R(ue,Be)}break}}function V(ue,he,Me){if(ue){for(var Ue in ue)if(Ue!=="range"&&Ue!=="loc"){var Be=ue[Ue];if(Array.isArray(Be))for(var Ze=0,Ke=Be.length;Ze<Ke;Ze++)V(Be[Ze],ue,Me);else Be&&typeof Be=="object"&&V(Be,ue,Me)}Me.operatorOverloading!==!1&&N(ue,he),Me.moduleExports!==!1&&E(ue)}}function H(ue){var he="",Me="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(ue=(Math.abs(ue)<<1)+(ue<0?1:0);ue||!he;){var Ue=ue&31;ue>>=5,ue&&(Ue|=32),he+=Me[Ue]}return he}var q=T.url||"",K=T.sourceMaps,B=T.paperFeatures||{},W=T.source||P,$=T.offset||0,X=Ae.agent,ee=X.versionNumber,ne=!1,_e=/\r\n|\n|\r/mg,Pe;if(K&&(X.chrome&&ee>=30||X.webkit&&ee>=537.76||X.firefox&&ee>=23||X.node)){if(X.node)$-=2;else if(c&&q&&!c.location.href.indexOf(q)){var Te=_.getElementsByTagName("html")[0].innerHTML;$=Te.substr(0,Te.indexOf(P)+1).match(_e).length+1}ne=$>0&&!(X.chrome&&ee>=36||X.safari&&ee>=600||X.firefox&&ee>=40||X.node);var De=["AA"+H(ne?0:$)+"A"];De.length=(P.match(_e)||[]).length+1+(ne?$:0),Pe={version:3,file:q,names:[],mappings:De.join(";AACA"),sourceRoot:"",sources:[q],sourcesContent:[W]}}return(B.operatorOverloading!==!1||B.moduleExports!==!1)&&V(u(P,{ranges:!0,preserveParens:!0,sourceType:"module"}),null,B),Pe&&(ne&&(P=new Array($+1).join(`
`)+P),/^(inline|both)$/.test(K)&&(P+=`
//# sourceMappingURL=data:application/json;base64,`+s.btoa(unescape(encodeURIComponent(JSON.stringify(Pe))))),P+=`
//# sourceURL=`+(q||"paperscript")),{url:q,source:W,code:P,map:Pe}}function S(P,T,w){Ae=T;var k=T.getView(),v=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(P)&&!/\bnew\s+Tool\b/.test(P)?new Ne:null,I=v?v._events:[],R=["onFrame","onResize"].concat(I),N=[],E=[],V,H=typeof P=="object"?P:b(P,w);P=H.code;function q(ee,ne){for(var _e in ee)(ne||!/^_/.test(_e))&&new RegExp("([\\b\\s\\W]|^)"+_e.replace(/\$/g,"\\$")+"\\b").test(P)&&(N.push(_e),E.push(ee[_e]))}q({__$__:g,$__:m,paper:T,tool:v},!0),q(T),P="var module = { exports: {} }; "+P;var $=p.each(R,function(ee){new RegExp("\\s+"+ee+"\\b").test(P)&&(N.push(ee),this.push("module.exports."+ee+" = "+ee+";"))},[]).join(`
`);$&&(P+=`
`+$),P+=`
return module.exports;`;var K=Ae.agent;if(_&&(K.chrome||K.firefox&&K.versionNumber<40)){var B=_.createElement("script"),W=_.head||_.getElementsByTagName("head")[0];K.firefox&&(P=`
`+P),B.appendChild(_.createTextNode("document.__paperscript__ = function("+N+") {"+P+`
}`)),W.appendChild(B),V=_.__paperscript__,delete _.__paperscript__,W.removeChild(B)}else V=Function(N,P);var $=V&&V.apply(T,E),X=$||{};return p.each(I,function(ee){var ne=X[ee];ne&&(v[ee]=ne)}),k&&(X.onResize&&k.setOnResize(X.onResize),k.emit("resize",{size:k.size,delta:new U}),X.onFrame&&k.setOnFrame(X.onFrame),k.requestUpdate()),$}function x(P){if(/^text\/(?:x-|)paperscript$/.test(P.type)&&F.getAttribute(P,"ignore")!=="true"){var T=F.getAttribute(P,"canvas"),w=_.getElementById(T),k=P.src||P.getAttribute("data-src"),v=F.hasAttribute(P,"async"),I="data-paper-scope";if(!w)throw new Error('Unable to find canvas with id "'+T+'"');var R=F.get(w.getAttribute(I))||new F().setup(w);return w.setAttribute(I,R._id),k?ke.request({url:k,async:v,mimeType:"text/plain",onLoad:function(N){S(N,R,k)}}):S(P.innerHTML,R,P.baseURI),P.setAttribute("data-paper-ignore","true"),R}}function y(){p.each(_&&_.getElementsByTagName("script"),x)}function L(P){return P?x(P):y()}return c&&(_.readyState==="complete"?setTimeout(y):pt.add(c,{load:y})),{compile:b,execute:S,load:L,parse:u,calculateBinary:g,calculateUnary:m}}).call(this);var Ae=new(F.inject(p.exports,{Base:p,Numerical:Q,Key:we,DomEvent:pt,DomElement:mt,document:_,window:c,Symbol:ut,PlacedSymbol:yt}));return Ae.agent.node&&lo(Ae),typeof o=="function"&&o.amd?o("paper",Ae):n&&(n.exports=Ae),Ae}).call(Pf,typeof self=="object"?self:null)}(Fr)),Fr.exports}var kf=If();const se=vf(kf);function Af(n,s){const o=s.x-n.x,c=s.y-n.y;return Math.sqrt(o*o+c*c)}function ha(n){const s=Math.sqrt(n.x*n.x+n.y*n.y);return s===0?{x:0,y:0}:{x:n.x/s,y:n.y/s}}function Ei(n,s){return{x:n.x+s.x,y:n.y+s.y}}function ca(n,s){return{x:n.x-s.x,y:n.y-s.y}}function Ci(n,s){return{x:n.x*s,y:n.y*s}}function Tu(n,s){return n.x*s.x+n.y*s.y}function Ef(n,s){const o=ha(s),c=Tu(n,o);return ca(n,Ci(o,2*c))}function fn(n){return{x:Math.cos(n),y:Math.sin(n)}}function Tf(n,s,o,c){const _=n.x,p=n.y,A=s.x,F=s.y,D=o.x,te=o.y,J=c.x,Q=c.y,oe=(_-A)*(te-Q)-(p-F)*(D-J);if(Math.abs(oe)<1e-10)return null;const U=((_-D)*(te-Q)-(p-te)*(D-J))/oe,ze=-((_-A)*(p-te)-(p-F)*(_-D))/oe;return U>=0&&U<=1&&ze>=0&&ze<=1?{x:_+U*(A-_),y:p+U*(F-p)}:null}function Mf(n,s,o,c){const _=Ei(n,Ci(s,1e3)),p=Tf(n,_,o,c);if(!p)return null;const A=ca(p,n);return Tu(A,s)<0?null:{point:p,distance:Af(n,p)}}function Of(n,s){const o=ca(s,n);return ha({x:o.y,y:-o.x})}class Lf{rayGroup=null;metersToPixelsRatio;constructor(s){this.metersToPixelsRatio=s}render(s){return this.clear(),this.rayGroup=new se.Group,s.forEach((o,c)=>{const _=Gr(o.origin,this.metersToPixelsRatio),p=Gr(Ei(o.origin,Ci(o.direction,o.length)),this.metersToPixelsRatio),A=new se.Path;A.moveTo(new se.Point(_.x,_.y)),A.lineTo(new se.Point(p.x,p.y));const F=["red","orange","yellow","green","blue","purple"],D=c%F.length;if(A.strokeColor=new se.Color(F[D]),A.strokeWidth=3,A.opacity=.8,c===0){const te=new se.Path.Circle(new se.Point(_.x,_.y),3);te.fillColor=new se.Color("red"),this.rayGroup.addChild(te)}if(o.hitComponentId){const te=new se.Path.Circle(new se.Point(p.x,p.y),2);te.fillColor=new se.Color("darkred"),this.rayGroup.addChild(te)}this.rayGroup.addChild(A)}),this.rayGroup}updateMetersToPixelsRatio(s){this.metersToPixelsRatio=s}clear(){this.rayGroup&&(this.rayGroup.remove(),this.rayGroup=null)}destroy(){this.clear()}}class Rf{metersToPixelsRatio;animationGroup=null;isAnimating=!1;animationId=null;constructor(s){this.metersToPixelsRatio=s}updateMetersToPixelsRatio(s){this.metersToPixelsRatio=s}convertPosition(s){const o=Gr(s,this.metersToPixelsRatio);return new se.Point(o.x,o.y)}calculateSegmentEnd(s){return{x:s.origin.x+s.direction.x*s.length,y:s.origin.y+s.direction.y*s.length}}createAnimatedRayPath(){const s=new se.Path;return s.strokeColor=new se.Color("#FFD700"),s.strokeWidth=3,s.shadowColor=new se.Color("#FFD700"),s.shadowBlur=8,s.opacity=.9,s}createMirrorImageLine(s,o){const c=this.convertPosition(s),_=this.convertPosition(o),p=new se.Path.Line(c,_);return p.strokeColor=new se.Color("#00BFFF"),p.strokeWidth=2,p.dashArray=[8,4],p.opacity=.7,p}async animateReverseRay(s,o=[],c=2e3){if(this.isAnimating&&this.stopAnimation(),this.clear(),!se.project||s.length===0)return;this.isAnimating=!0,this.animationGroup=new se.Group,console.log("[Ray Animation] Starting reverse ray animation with",s.length,"segments");const _=this.createAnimatedRayPath();this.animationGroup.addChild(_);const p=[],A=s[s.length-1],F=this.calculateSegmentEnd(A);p.push(this.convertPosition(F));for(let Q=s.length-1;Q>=0;Q--){const oe=s[Q];p.push(this.convertPosition(oe.origin))}console.log("[Ray Animation] Animation path has",p.length,"points");const D=2e3,te=Date.now(),J=()=>{if(!this.isAnimating)return;const Q=Date.now()-te,oe=Math.min(Q/D,1),U=this.calculateTotalDistance(p),ze=oe*U,de=this.getPathToDistance(p,ze);if(_.removeSegments(),de.length>1){_.moveTo(de[0]);for(let be=1;be<de.length;be++)_.lineTo(de[be])}oe<1?this.animationId=requestAnimationFrame(J):(this.addMirrorImageLines(s,o),this.isAnimating=!1,console.log("[Ray Animation] Reverse ray animation completed")),se.view?.update()};this.animationId=requestAnimationFrame(J)}addMirrorImageLines(s,o){if(!this.animationGroup||o.length===0)return;console.log("[Ray Animation] Adding",o.length,"mirror image lines");const c=[];for(let _=0;_<s.length-1;_++){const p=s[_];if(p.hitComponentId){const A=this.calculateSegmentEnd(p);c.push(A),console.log(`[Ray Animation] Reflection point ${c.length-1}: (${A.x.toFixed(2)}, ${A.y.toFixed(2)}) from segment ${_}`)}}o.forEach((_,p)=>{const A=_.reflectionPointIndex;if(A>=0&&A<c.length){const F=c[A],D=this.createMirrorImageLine(F,_.position);this.animationGroup.addChild(D),console.log(`[Ray Animation] Mirror image ${p}: line from reflection point ${A} (${F.x.toFixed(2)}, ${F.y.toFixed(2)}) to image (${_.position.x.toFixed(2)}, ${_.position.y.toFixed(2)})`),D.opacity=0,D.tween({opacity:.7},500)}else console.warn(`[Ray Animation] Invalid reflection point index ${A} for mirror image ${p}`)})}calculateTotalDistance(s){let o=0;for(let c=1;c<s.length;c++)o+=s[c].getDistance(s[c-1]);return o}getPointAtDistance(s,o){if(s.length===0)return new se.Point(0,0);if(o<=0)return s[0];let c=0;for(let _=1;_<s.length;_++){const p=s[_].getDistance(s[_-1]);if(c+p>=o){const A=(o-c)/p;return s[_-1].add(s[_].subtract(s[_-1]).multiply(A))}c+=p}return s[s.length-1]}getPathToDistance(s,o){if(s.length===0)return[];if(o<=0)return[s[0]];const c=[s[0]];let _=0;for(let p=1;p<s.length;p++){const A=s[p].getDistance(s[p-1]);if(_+A<=o)c.push(s[p]),_+=A;else{const F=(o-_)/A,D=s[p-1].add(s[p].subtract(s[p-1]).multiply(F));c.push(D);break}}return c}stopAnimation(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.isAnimating=!1}async animateUnfoldRay(s){if(this.isAnimating&&this.stopAnimation(),this.clear(),!se.project||s.length<2)return;this.isAnimating=!0,this.animationGroup=new se.Group,console.log("[Ray Animation] Starting unfold ray animation with",s.length,"segments");const o=[],c=[];for(let _=0;_<s.length;_++){const p=s[_],A=this.convertPosition(p.origin),F=this.convertPosition(this.calculateSegmentEnd(p)),D=new se.Path;D.moveTo(A),D.lineTo(F),D.strokeColor=new se.Color("#FF6B6B"),D.strokeWidth=3,D.opacity=.8,o.push(D),this.animationGroup.addChild(D),c.push({start:A.clone(),end:F.clone(),originalDirection:F.subtract(A).normalize()}),console.log(`[Ray Animation] Segment ${_}: (${A.x.toFixed(1)}, ${A.y.toFixed(1)}) to (${F.x.toFixed(1)}, ${F.y.toFixed(1)})`)}for(let _=s.length-1;_>=1;_--){console.log(`[Ray Animation] Unfolding segment ${_}`);const p=s[_],A=s[_-1];console.log("Segment points: ",p.origin,this.calculateSegmentEnd(p)),console.log(" Prev segment points: ",A.origin,this.calculateSegmentEnd(A));const F=this.convertPosition(p.origin),D=this.rotationToAlign(p,A);console.log(`[Ray Animation] Rotating segment ${_} by ${D} radians around reflection point`),await this.animateSegmentRotation(o,c,_,F,D)}this.isAnimating=!1,console.log("[Ray Animation] Unfold ray animation completed")}rotationToAlign(s,o){const c=this.calculateSegmentEnd(s).x-s.origin.x,_=(this.calculateSegmentEnd(s).y-s.origin.y)*-1,p=o.origin.x-this.calculateSegmentEnd(o).x,A=(o.origin.y-this.calculateSegmentEnd(o).y)*-1;console.info(`[Ray Animation] Calculating rotation to align segments: target (${c.toFixed(4)}, ${_.toFixed(4)}), previous (${p.toFixed(4)}, ${A.toFixed(4)})`);const F=c*p+_*A,D=c*A-_*p;let te=Math.atan2(D,F);return console.log(`[Ray Animation] Calculated angle between segments: ${te.toFixed(4)} radians`),te+=Math.PI,console.log(`[Ray Animation] Adjusted angle for unfolding: ${te.toFixed(4)} radians`),te>Math.PI&&(te-=2*Math.PI),te<-Math.PI&&(te+=2*Math.PI),console.log(`[Ray Animation] Normalized angle: ${te.toFixed(4)} radians`),console.log(`[Ray Animation] Calculated rotation angle: ${te.toFixed(4)} radians`),te*-1}async animateSegmentRotation(s,o,c,_,p){return new Promise(A=>{const D=Date.now();let te=D;const J=()=>{if(!this.isAnimating){A();return}const Q=Date.now()-D,U=(Date.now()-te)/2e3,ze=p*U,de=Math.min(Q/2e3,1);for(let be=c;be<s.length;be++){const Ce=s[be],Ye=o[be],Ve=this.rotatePointAround(Ye.start,_,ze),Fe=this.rotatePointAround(Ye.end,_,ze);Ce.removeSegments(),Ce.moveTo(Ve),Ce.lineTo(Fe),Ye.start=Ve,Ye.end=Fe}de<1?(te=Date.now(),requestAnimationFrame(J)):A(),se.view?.update()};requestAnimationFrame(J)})}rotatePointAround(s,o,c){const _=Math.cos(c),p=Math.sin(c),A=s.x-o.x,F=s.y-o.y,D=A*_-F*p,te=A*p+F*_;return new se.Point(o.x+D,o.y+te)}easeInOut(s){return s<.5?2*s*s:-1+(4-2*s)*s}clear(){this.stopAnimation(),this.animationGroup&&(this.animationGroup.remove(),this.animationGroup=null)}destroy(){this.clear()}}class Un{paperItem=null;spec;store;metersToPixelsRatio;isSelected=!1;isDragging=!1;isHovered=!1;isHandleBeingDragged=!1;isShowingHandles=!1;constructor(s,o,c){this.spec={...s},this.store=o,this.metersToPixelsRatio=c}isPaperReady(){return!!(se.project&&se.project.activeLayer)}update(s){this.spec=s,this.render()}destroy(){this.paperItem&&(this.paperItem.remove(),this.paperItem=null)}setSelected(s){this.isSelected!==s&&(this.isSelected=s,this.updateVisualState())}setDragging(s){this.isDragging=s,this.updateVisualState()}setHovered(s){this.isHovered!==s&&(this.isHovered=s,this.updateVisualState())}updateMetersToPixelsRatio(s){this.metersToPixelsRatio=s,this.render()}convertPosition(s){const o=Gr(s,this.metersToPixelsRatio);return new se.Point(o.x,o.y)}convertLength(s){return s*this.metersToPixelsRatio}pixelPositionToMeters(s){return qc({x:s.x,y:s.y},this.metersToPixelsRatio)}updateVisualState(){this.paperItem}onMouseDown(s){this.canDrag()&&(this.store.selectComponent(this.spec.id),this.setDragging(!0),se.view&&se.view.setDraggingComponent&&se.view.setDraggingComponent(this),s.stopPropagation())}onMouseMove(s){if(!this.isDragging||!this.canDrag())return;const o=this.pixelPositionToMeters(s.point),c=this.store.stageSpec.worldSize;if(o.x=Math.max(0,Math.min(c.width,o.x)),o.y=Math.max(0,Math.min(c.height,o.y)),this.spec.position=o,this.paperItem){const _=this.convertPosition(o);this.paperItem.position=_}}onMouseUp(s){this.isDragging&&(this.setDragging(!1),this.commitSpecToStore(),se.view&&se.view.setDraggingComponent&&se.view.setDraggingComponent(null))}commitSpecToStore(){this.store.updateComponent(this.spec.id,this.spec)}getSpec(){return{...this.spec}}handleMouseMove(s){this.onMouseMove(s)}handleMouseUp(s){this.onMouseUp(s)}onMouseEnter(s){this.setHovered(!0)}onMouseLeave(s){this.setHovered(!1)}canDrag(){const s=this.store.currentMode;return s==="edit"?!0:s==="sandbox"?this.spec.type==="viewer"||this.spec.type==="bunny":!1}setupEventHandlers(){this.paperItem&&(this.paperItem.onMouseDown=s=>this.onMouseDown(s),this.paperItem.onMouseMove=s=>this.onMouseMove(s),this.paperItem.onMouseUp=s=>this.onMouseUp(s),this.paperItem.onMouseEnter=s=>this.onMouseEnter(s),this.paperItem.onMouseLeave=s=>this.onMouseLeave(s))}getPaperItem(){return this.paperItem}getId(){return this.spec.id}}class Nf extends Un{eyeShape=null;directionArrow=null;render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=new se.Group,o=this.convertPosition(this.spec.position),c=this.convertLength(.3);return this.eyeShape=new se.Path.Circle(o,c),this.eyeShape.fillColor=new se.Color("green"),this.eyeShape.strokeColor=new se.Color("darkgreen"),this.eyeShape.strokeWidth=2,this.updateDirectionArrow(),s.addChild(this.eyeShape),this.directionArrow&&s.addChild(this.directionArrow),s}updateDirectionArrow(){this.directionArrow&&this.directionArrow.remove();const s=this.convertPosition(this.spec.position),o=fn(this.spec.orientation),c=this.convertLength(.4),_=s.add(new se.Point(o.x*c,o.y*c));this.directionArrow=new se.Group;const p=new se.Path;p.moveTo(s),p.lineTo(_),p.strokeColor=new se.Color("darkgreen"),p.strokeWidth=3;const A=this.convertLength(.1),F=new se.Point(-o.y,o.x),D=new se.Path;D.moveTo(_),D.lineTo(_.subtract(new se.Point(o.x*A,o.y*A)).add(F.multiply(A*.5))),D.lineTo(_.subtract(new se.Point(o.x*A,o.y*A)).subtract(F.multiply(A*.5))),D.closePath(),D.fillColor=new se.Color("darkgreen"),this.directionArrow.addChild(p),this.directionArrow.addChild(D)}onRotate(s){const o=this.spec,c=s;o.orientation=c,this.updateDirectionArrow()}resetVisualState(){this.eyeShape&&(this.eyeShape.strokeColor=new se.Color("darkgreen"),this.eyeShape.strokeWidth=2)}update(s){super.update(s),this.updateDirectionArrow()}getGeometry(){return{id:this.spec.id,type:"viewer",boundingLines:[]}}getOrientation(){return this.spec.orientation||0}destroy(){super.destroy()}}class Ff extends Un{wallPath=null;render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=this.convertPosition(this.spec.position),o=this.spec,c=fn(o.orientation),p=this.convertLength(o.length)/2,A=s.subtract(new se.Point(c.x*p,c.y*p)),F=s.add(new se.Point(c.x*p,c.y*p));return this.wallPath=new se.Path,this.wallPath.moveTo(A),this.wallPath.lineTo(F),this.wallPath.strokeColor=new se.Color("gray"),this.wallPath.strokeWidth=5,this.wallPath.strokeCap="round",this.wallPath}resetVisualState(){this.wallPath&&(this.wallPath.strokeColor=new se.Color("gray"),this.wallPath.strokeWidth=5)}update(s){super.update(s)}getGeometry(){const s=this.spec,o=fn(s.orientation),c=s.length/2,_=Ei(s.position,Ci(o,-c)),p=Ei(s.position,Ci(o,c));return{id:s.id,type:"wall",boundingLines:[{p1:_,p2:p,componentId:s.id,reflect:!1}]}}destroy(){super.destroy()}}class Vf extends Un{mirrorPath=null;render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=this.convertPosition(this.spec.position),o=this.spec,c=fn(o.orientation),p=this.convertLength(o.length)/2,A=s.subtract(new se.Point(c.x*p,c.y*p)),F=s.add(new se.Point(c.x*p,c.y*p));return this.mirrorPath=new se.Path,this.mirrorPath.moveTo(A),this.mirrorPath.lineTo(F),this.mirrorPath.strokeColor=new se.Color("lightblue"),this.mirrorPath.strokeWidth=5,this.mirrorPath.strokeCap="round",new se.Group([this.mirrorPath])}resetVisualState(){this.mirrorPath&&(this.mirrorPath.strokeColor=new se.Color("silver"),this.mirrorPath.strokeWidth=5)}update(s){super.update(s)}getGeometry(){const s=this.spec,o=fn(s.orientation),c=s.length/2,_=Ei(s.position,Ci(o,-c)),p=Ei(s.position,Ci(o,c));return{id:s.id,type:"mirror",boundingLines:[{p1:_,p2:p,componentId:s.id,reflect:!0}]}}destroy(){super.destroy()}}class Df extends Un{body=null;ears=null;leftEye=null;rightEye=null;shouldShowRotateHandles(){return!1}render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=new se.Group,o=this.convertPosition(this.spec.position),c=this.convertLength(.24);console.log(`[Real Bunny] Rendering bunny ${this.spec.id} at meters=(${this.spec.position.x.toFixed(2)}, ${this.spec.position.y.toFixed(2)}), pixels=(${o.x.toFixed(1)}, ${o.y.toFixed(1)}), radius=${c.toFixed(1)}px`),this.body=new se.Path.Circle(o,c),this.body.fillColor=new se.Color("pink"),this.body.strokeColor=new se.Color("hotpink"),this.body.strokeWidth=2,this.ears=new se.Group;const _=this.convertLength(.06),p=this.convertLength(.03),A=new se.Path.Ellipse({center:o.add(new se.Point(-c*.5,-c*.8)),size:new se.Size(p,_)});A.fillColor=new se.Color("pink"),A.strokeColor=new se.Color("hotpink"),A.strokeWidth=1;const F=new se.Path.Ellipse({center:o.add(new se.Point(c*.5,-c*.8)),size:new se.Size(p,_)});F.fillColor=new se.Color("pink"),F.strokeColor=new se.Color("hotpink"),F.strokeWidth=1,this.ears.addChild(A),this.ears.addChild(F);const D=this.convertLength(.01);return this.leftEye=new se.Path.Circle(o.add(new se.Point(-c*.3,-c*.2)),D),this.leftEye.fillColor=new se.Color("black"),this.rightEye=new se.Path.Circle(o.add(new se.Point(c*.3,-c*.2)),D),this.rightEye.fillColor=new se.Color("black"),s.addChild(this.body),s.addChild(this.ears),s.addChild(this.leftEye),s.addChild(this.rightEye),s}createRotateHandles(){return new se.Group}resetVisualState(){this.body&&(this.body.strokeColor=new se.Color("hotpink"),this.body.strokeWidth=2)}update(s){super.update(s)}getGeometry(){const s=this.spec,c=.16/2,_=[{x:s.position.x-c,y:s.position.y-c},{x:s.position.x+c,y:s.position.y-c},{x:s.position.x+c,y:s.position.y+c},{x:s.position.x-c,y:s.position.y+c}],p=[];for(let A=0;A<_.length;A++){const F=(A+1)%_.length;p.push({p1:_[A],p2:_[F],componentId:s.id,reflect:!1})}return{id:s.id,type:"bunny",boundingLines:p}}}class Bf extends Un{isClickable=!1;constructor(s,o,c,_=!1){super(s,o,c),this.isClickable=_}shouldShowRotateHandles(){return!1}render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=new se.Group,o=this.convertPosition(this.spec.position),c=this.convertLength(.24);console.log(`[Phantom Bunny] Rendering phantom ${this.spec.id} at meters=(${this.spec.position.x.toFixed(2)}, ${this.spec.position.y.toFixed(2)}), pixels=(${o.x.toFixed(1)}, ${o.y.toFixed(1)}), radius=${c.toFixed(1)}px`);const _=new se.Path.Circle(o,c);_.fillColor=new se.Color("lightblue"),_.fillColor.alpha=.5,_.strokeColor=new se.Color("blue"),_.strokeColor.alpha=.7,_.strokeWidth=2,_.dashArray=[4,4];const p=this.convertLength(.06),A=this.convertLength(.03),F=new se.Path.Ellipse({center:o.add(new se.Point(-c*.5,-c*.8)),size:new se.Size(A,p)});F.fillColor=new se.Color("lightblue"),F.fillColor.alpha=.5,F.strokeColor=new se.Color("blue"),F.strokeColor.alpha=.7,F.strokeWidth=1,F.dashArray=[2,2];const D=new se.Path.Ellipse({center:o.add(new se.Point(c*.5,-c*.8)),size:new se.Size(A,p)});D.fillColor=new se.Color("lightblue"),D.fillColor.alpha=.5,D.strokeColor=new se.Color("blue"),D.strokeColor.alpha=.7,D.strokeWidth=1,D.dashArray=[2,2];const te=this.convertLength(.01),J=new se.Path.Circle(o.add(new se.Point(-c*.3,-c*.2)),te);J.fillColor=new se.Color("darkblue"),J.fillColor.alpha=.6;const Q=new se.Path.Circle(o.add(new se.Point(c*.3,-c*.2)),te);if(Q.fillColor=new se.Color("darkblue"),Q.fillColor.alpha=.6,s.addChild(_),s.addChild(F),s.addChild(D),s.addChild(J),s.addChild(Q),this.isClickable){const oe=new se.Path.Circle(o,c+this.convertLength(.02));oe.strokeColor=new se.Color("yellow"),oe.strokeWidth=3,oe.dashArray=[6,6],oe.opacity=.8,s.addChild(oe)}return s}createRotateHandles(){return new se.Group}setClickable(s){this.isClickable!==s&&(this.isClickable=s,this.render())}resetVisualState(){}update(s){super.update(s)}getGeometry(){return{id:this.spec.id,type:"phantom",boundingLines:[]}}canDrag(){return this.store.currentMode==="edit"}onMouseDown(s){this.store.currentMode==="game"&&this.isClickable?(this.store.checkPhantomGuess(this.spec.id),s.stopPropagation()):this.store.currentMode==="edit"&&super.onMouseDown(s)}onMouseEnter(s){this.store.currentMode==="game"&&this.isClickable&&this.paperItem&&(this.paperItem.opacity=.8),super.onMouseEnter(s)}onMouseLeave(s){this.store.currentMode==="game"&&this.isClickable&&this.paperItem&&(this.paperItem.opacity=1),super.onMouseLeave(s)}}class zf extends Un{body=null;ears=null;leftEye=null;rightEye=null;shouldShowRotateHandles(){return!1}render(){if(this.destroy(),!this.isPaperReady())return;this.paperItem=new se.Group;const s=this.renderShape();this.paperItem.addChild(s),this.setupEventHandlers(),this.updateVisualState()}renderShape(){const s=new se.Group,o=this.convertPosition(this.spec.position),c=this.convertLength(.24);console.log(`[Mirror Image] Rendering mirror image ${this.spec.id} at meters=(${this.spec.position.x.toFixed(2)}, ${this.spec.position.y.toFixed(2)}), pixels=(${o.x.toFixed(1)}, ${o.y.toFixed(1)}), radius=${c.toFixed(1)}px`),this.body=new se.Path.Circle(o,c),this.body.fillColor=new se.Color("pink"),this.body.fillColor.alpha=.5,this.body.strokeColor=new se.Color("hotpink"),this.body.strokeColor.alpha=.5,this.body.strokeWidth=2,this.body.dashArray=[8,4],this.ears=new se.Group;const _=this.convertLength(.06),p=this.convertLength(.03),A=new se.Path.Ellipse({center:o.add(new se.Point(-c*.5,-c*.8)),size:new se.Size(p,_)});A.fillColor=new se.Color("pink"),A.fillColor.alpha=.5,A.strokeColor=new se.Color("hotpink"),A.strokeColor.alpha=.5,A.strokeWidth=1,A.dashArray=[4,2];const F=new se.Path.Ellipse({center:o.add(new se.Point(c*.5,-c*.8)),size:new se.Size(p,_)});F.fillColor=new se.Color("pink"),F.fillColor.alpha=.5,F.strokeColor=new se.Color("hotpink"),F.strokeColor.alpha=.5,F.strokeWidth=1,F.dashArray=[4,2],this.ears.addChild(A),this.ears.addChild(F);const D=this.convertLength(.01);return this.leftEye=new se.Path.Circle(o.add(new se.Point(-c*.3,-c*.2)),D),this.leftEye.fillColor=new se.Color("black"),this.leftEye.fillColor.alpha=.5,this.rightEye=new se.Path.Circle(o.add(new se.Point(c*.3,-c*.2)),D),this.rightEye.fillColor=new se.Color("black"),this.rightEye.fillColor.alpha=.5,s.addChild(this.body),s.addChild(this.ears),s.addChild(this.leftEye),s.addChild(this.rightEye),s}createRotateHandles(){return new se.Group}resetVisualState(){}update(s){super.update(s)}getGeometry(){return{id:this.spec.id,type:"mirror_image",boundingLines:[]}}canDrag(){return!1}onMouseDown(s){s.stopPropagation()}}class Uf{static create(s,o,c,_={}){switch(s.type){case"viewer":return new Nf(s,o,c);case"wall":return new Ff(s,o,c);case"mirror":return new Vf(s,o,c);case"bunny":return new Df(s,o,c);case"phantom":return new Bf(s,o,c,_.isClickable||!1);case"mirror_image":return new zf(s,o,c);default:throw new Error(`Unknown component type: ${s.type}`)}}static getComponentTypes(){return["viewer","wall","mirror","bunny","phantom","mirror_image"]}static isValidComponentType(s){return this.getComponentTypes().includes(s)}}function ks(n,s,o=50){const c=[];let _=s.position,p=fn(s.orientation),A=0,F=0;const D=10;if(o<=0)return c.push({origin:_,direction:p,length:0}),c;for(;F<D&&A<o;){const te=Hf(_,p,n);if(!te){const oe=o-A;if(oe>0){const U=Math.min(oe,20);c.push({origin:_,direction:p,length:U})}break}const J=te.distance;c.push({origin:_,direction:p,length:J,hitComponentId:te.componentId}),A+=J;const Q=n.find(oe=>oe.id===te.componentId);if(!Q||Q.type==="wall"||Q.type==="bunny")break;if(Q.type==="mirror"&&te.normal&&te.isReflective)_=te.point,p=Ef(p,te.normal),F++;else break}return c}function Hf(n,s,o){let c=null,_=1/0;for(const p of o)if(p.type!=="viewer")for(let A=0;A<p.boundingLines.length;A++){const F=p.boundingLines[A],D=Mf(n,s,F.p1,F.p2);if(D&&D.distance>.001&&D.distance<_){const te=Of(F.p1,F.p2);_=D.distance,c={point:D.point,distance:D.distance,componentId:p.id,segmentIndex:A,normal:te,isReflective:F.reflect||!1}}}return c}function qf(n){if(n.length===0)return console.log("[Mirror Image] No ray segments provided"),null;n.forEach((A,F)=>{console.log(`[Mirror Image] Segment ${F}: origin=(${A.origin.x.toFixed(2)}, ${A.origin.y.toFixed(2)}), direction=(${A.direction.x.toFixed(2)}, ${A.direction.y.toFixed(2)}), length=${A.length.toFixed(2)}${A.hitComponentId?`, hit=${A.hitComponentId}`:""}`)});const s=n.reduce((A,F)=>A+F.length,0);console.log(`[Mirror Image] Total ray path length: ${s.toFixed(2)}m`);const c=n[0].direction;console.log(`[Mirror Image] Final ray direction: (${c.x.toFixed(2)}, ${c.y.toFixed(2)})`);const _=n[0].origin,p=Ei(_,Ci(ha(c),s));return console.log(`[Mirror Image] Viewer position: (${_.x.toFixed(2)}, ${_.y.toFixed(2)})`),console.log(`[Mirror Image] Computed mirror image position: (${p.x.toFixed(2)}, ${p.y.toFixed(2)})`),p}function fo(n){if(n.length===0)return console.log("[Mirror Images] No ray segments provided"),[];if(!n[n.length-1].hitComponentId)return console.log("[Mirror Images] Ray does not hit any object"),[];const o=[];for(let c=0;c<n.length-1;c++)if(n[c].hitComponentId){const p=n.slice(c),A=qf(p);A&&(o.push({position:A,reflectionPointIndex:c}),console.log(`[Mirror Images] Created mirror image ${c} at (${A.x.toFixed(2)}, ${A.y.toFixed(2)}) from reflection point ${c}`))}return console.log(`[Mirror Images] Computed ${o.length} mirror images from ${n.length} ray segments`),o}const po={viewer:Gf,wall:Wf,mirror:jf,bunny:Kf,phantom:$f};function Gf(n){return{id:n.id,type:"viewer",boundingLines:[]}}function Wf(n){const s=n,o=fn(s.orientation),c=s.length/2,_=Ei(s.position,Ci(o,-c)),p=Ei(s.position,Ci(o,c));return{id:s.id,type:"wall",boundingLines:[{p1:_,p2:p,componentId:s.id,reflect:!1}]}}function jf(n){const s=n,o=fn(s.orientation),c=s.length/2,_=Ei(s.position,Ci(o,-c)),p=Ei(s.position,Ci(o,c));return{id:s.id,type:"mirror",boundingLines:[{p1:_,p2:p,componentId:s.id,reflect:!0}]}}function Kf(n){const s=n,c=.2/2,_=[{x:s.position.x-c,y:s.position.y-c},{x:s.position.x+c,y:s.position.y-c},{x:s.position.x+c,y:s.position.y+c},{x:s.position.x-c,y:s.position.y+c}],p=[];for(let A=0;A<_.length;A++){const F=(A+1)%_.length;p.push({p1:_[A],p2:_[F],componentId:s.id,reflect:!1})}return{id:s.id,type:"bunny",boundingLines:p}}function $f(n){return{id:n.id,type:"phantom",boundingLines:[]}}function As(n){return n.filter(s=>s.type in po).map(s=>po[s.type](s))}const Zf={class:"main-stage"},Jf={class:"canvas-container"},Yf=Xr({__name:"MainStage",setup(n,{expose:s}){const o=la(),c=Gt(),_=new Map,p=Gt(),A=Gt();let F=null;Yo(async()=>{await ta(),c.value&&(te(),Q(),oe())}),ra(()=>{Fe()}),un(()=>o.stageSpec.components,()=>{oe()},{deep:!0}),un(()=>o.currentMode,()=>{o.currentMode==="game"?Ce():(o.clearRays(),o.stageSpec.components=o.stageSpec.components.filter(pe=>!pe.id.startsWith("computed_phantom_")))});let D=null;un(()=>[window.innerWidth,window.innerHeight],()=>{D&&clearTimeout(D),D=setTimeout(()=>{J()},100)});function te(){if(!c.value)return;se.setup(c.value);let pe=null;se.view.onMouseMove=M=>{pe&&pe.handleMouseMove(M)},se.view.onMouseUp=M=>{pe&&(pe.handleMouseUp(M),pe=null)},se.view.setDraggingComponent=M=>{pe=M},p.value=new Lf(o.metersToPixelsRatio),A.value=new Rf(o.metersToPixelsRatio),J()}function J(){if(!c.value||!se.project)return;const pe=c.value.parentElement;if(!pe)return;const M=pe.getBoundingClientRect?.()||{width:pe.clientWidth||800,height:pe.clientHeight||600},Ge=Math.max(400,M.width-20),$e=Math.max(300,M.height-20);if(Ge<=0||$e<=0)return;const He=o.stageSpec.worldSize.width,lt=Ge/He,yt=o.metersToPixelsRatio;if(yt>0&&Math.abs(lt-yt)<1&&se.view?.viewSize&&_.size>0)return;o.updateMetersToPixelsRatio(lt);const ut=Math.round(Ge),Ct=Math.round($e);(c.value.width!==ut||c.value.height!==Ct)&&se.view&&(se.view.viewSize=new se.Size(ut,Ct)),_.forEach(qe=>{qe.updateMetersToPixelsRatio(lt)}),p.value&&p.value.updateMetersToPixelsRatio(lt),A.value&&A.value.updateMetersToPixelsRatio(lt)}function Q(){window.addEventListener("resize",J),c.value?.parentElement&&"ResizeObserver"in window&&(F=new ResizeObserver(()=>{J()}),F.observe(c.value.parentElement))}function oe(){_.forEach(pe=>pe.destroy()),_.clear(),o.stageSpec.components.forEach(pe=>{if(pe.type==="phantom"&&o.currentMode!=="game"&&o.currentMode!=="edit"||pe.type==="mirror_image"&&o.currentMode=="game")return;const M=o.currentMode==="game"&&pe.type==="phantom",Ge=Uf.create(pe,o,o.metersToPixelsRatio,{isClickable:M});Ge.render(),_.set(pe.id,Ge),pe.id===o.selectedComponentId&&Ge.setSelected(!0)}),se.view&&se.view.update()}function U(pe){o.selectComponent(null)}function ze(pe){}function de(pe){}function be(pe){}function Ce(){const pe=o.getViewer;if(!pe)return;const M=As(o.stageSpec.components),Ge=ks(M,pe,50),$e=fo(Ge);if($e.length===0){console.log("[Game Mode] No mirror images found - cannot start game");return}const He=$e[0],lt=`computed_phantom_${Date.now()}`,yt={id:lt,type:"phantom",position:He.position};o.stageSpec.components.push(yt),o.setCorrectPhantom(lt),setTimeout(async()=>{A.value&&o.currentMode==="game"&&(console.log("[Game Mode] Starting automatic ray animation"),p.value&&p.value.clear(),await A.value.animateReverseRay(Ge,[]))},500),oe()}async function Ye(){if(!A.value){console.log("[MainStage] Cannot animate: no animation renderer");return}const pe=o.getViewer;if(!pe)return;const M=As(o.stageSpec.components),Ge=ks(M,pe,50),$e=fo(Ge);o.stageSpec.components=o.stageSpec.components.filter(He=>!He.id.startsWith("computed_mirror_")),$e.forEach((He,lt)=>{const ut={id:`computed_mirror_${Date.now()}_${lt}`,type:"mirror_image",position:He.position};o.stageSpec.components.push(ut)}),console.log("[MainStage] Starting reverse ray animation with",Ge.length,"segments and",$e.length,"mirror images"),p.value&&p.value.clear(),await A.value.animateReverseRay(Ge,$e)}async function Ve(){if(!A.value||!o.getViewer){console.log("[MainStage] Cannot animate unfold: no animation renderer");return}const pe=As(o.stageSpec.components),M=ks(pe,o.getViewer,50);await A.value.animateUnfoldRay(M)}function Fe(){window.removeEventListener("resize",J),F&&(F.disconnect(),F=null),_.forEach(pe=>pe.destroy()),_.clear(),p.value?.destroy(),A.value?.destroy()}return s({animateReverseRay:Ye,animateUnfoldRay:Ve}),(pe,M)=>($t(),Yt("div",Zf,[Je("div",Jf,[Je("canvas",{ref_key:"canvasRef",ref:c,onMousedown:U,onMousemove:ze,onMouseup:de,onClick:be},null,544)])]))}}),Xf={class:"sidebar"},Qf={class:"debug-panel"},ed={key:0,style:{color:"red","font-size":"12px","margin-top":"10px"}},td={style:{"margin-top":"20px","font-size":"12px",color:"#666"}},id=Xr({__name:"DebugPanel",setup(n){const s=la(),o=Gt(""),c=Gt("");J(),un(()=>s.stageSpec,()=>{c.value||J()},{deep:!0});const _=sn(()=>s.currentMode),p=sn(()=>s.stageSpec.components.length),A=sn(()=>s.selectedComponentId||"None"),F=sn(()=>s.stageSpec.worldSize),D=sn(()=>s.metersToPixelsRatio);function te(){try{const Q=JSON.parse(o.value);if(!Q.version||!Q.worldSize||!Q.components)throw new Error("Invalid stage specification format");if(typeof Q.worldSize.width!="number"||typeof Q.worldSize.height!="number")throw new Error("World size must contain numeric width and height");if(!Array.isArray(Q.components))throw new Error("Components must be an array");for(const oe of Q.components){if(!oe.id||!oe.type||!oe.position)throw new Error(`Invalid component: ${JSON.stringify(oe)}`);if(typeof oe.position.x!="number"||typeof oe.position.y!="number")throw new Error(`Component position must be numeric: ${oe.id}`)}s.loadStageSpec(Q),c.value=""}catch(Q){c.value=`JSON Error: ${Q instanceof Error?Q.message:"Unknown error"}`}}function J(){o.value=JSON.stringify(s.stageSpec,null,2),c.value=""}return(Q,oe)=>($t(),Yt("div",Xf,[oe[6]||(oe[6]=Je("h2",null,"Debug Panel",-1)),Je("div",Qf,[Ko(Je("textarea",{"onUpdate:modelValue":oe[0]||(oe[0]=U=>o.value=U),placeholder:"Stage specification JSON..."},null,512),[[wu,o.value]]),Je("div",{class:"debug-buttons"},[Je("button",{class:"debug-button",onClick:te}," Save "),Je("button",{class:"debug-button",onClick:J}," Reset ")]),c.value?($t(),Yt("div",ed,yi(c.value),1)):Li("",!0)]),Je("div",td,[Je("div",null,[oe[1]||(oe[1]=Je("strong",null,"Mode:",-1)),Nn(" "+yi(_.value),1)]),Je("div",null,[oe[2]||(oe[2]=Je("strong",null,"Components:",-1)),Nn(" "+yi(p.value),1)]),Je("div",null,[oe[3]||(oe[3]=Je("strong",null,"Selected:",-1)),Nn(" "+yi(A.value),1)]),Je("div",null,[oe[4]||(oe[4]=Je("strong",null,"World Size:",-1)),Nn(" "+yi(F.value.width)+"m  "+yi(F.value.height)+"m",1)]),Je("div",null,[oe[5]||(oe[5]=Je("strong",null,"Scale:",-1)),Nn(" "+yi(D.value.toFixed(1))+" px/m",1)])])]))}}),nd=Xr({__name:"App",setup(n){const s=Gt();async function o(){s.value&&await s.value.animateReverseRay()}async function c(){s.value&&await s.value.animateUnfoldRay()}return(_,p)=>($t(),Yt(xi,null,[gi(mf,{onAnimateRay:o,onUnfoldRay:c}),gi(Yf,{ref_key:"mainStageRef",ref:s},null,512),gi(id)],64))}}),Mu=Ic();Mu.use(Hc);const Ou=Cc(nd);Ou.use(Mu);Ou.mount("#app");
